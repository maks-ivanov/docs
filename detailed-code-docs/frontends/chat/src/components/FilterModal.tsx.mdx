---
title: "FilterModal.tsx"
---

## High-level description
This code defines a FilterModal component in React, which provides a user interface for creating and managing filters for data querying. It allows users to set various filter types such as geo-radius, range, date range, and match filters, and applies these filters to the dataset being queried.

## Table of contents
- Filter and Filters interfaces
- FilterModalProps interface
- FilterModal component
- FilterItemProps interface
- FilterItem component

## Code Structure
The main components are FilterModal and FilterItem. FilterModal manages the overall filter state and rendering, while FilterItem handles individual filter creation and editing. These components use various signals and effects to manage state and side effects.

## Symbols

### FilterModal
#### Description
A component that renders a modal for managing filters. It allows users to add, edit, and apply filters to their data queries.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| showFilterModal | Accessor&lt;boolean&gt; | Controls the visibility of the filter modal |
| setShowFilterModal | (open: boolean) =&gt; void | Function to set the visibility of the filter modal |

#### Internal Logic
- Manages state for different types of filters (must, must not, should)
- Handles adding and editing filters
- Saves filters to local storage
- Dispatches a custom event when filters are updated

### FilterItem
#### Description
A component that renders an individual filter item, allowing users to set specific filter parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| initialFilter | Filter (optional) | Initial filter configuration |
| onFilterChange | (filter: Filter) =&gt; void | Callback function when the filter is changed |

#### Internal Logic
- Manages state for different filter modes (geo_radius, range, date_range, match)
- Renders appropriate input fields based on the selected filter mode
- Updates the filter state and triggers the onFilterChange callback when inputs change

## Side Effects
- Saves filters to local storage
- Dispatches a custom event 'filtersUpdated' when filters are applied

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive programming and component creation |
| UserContext | To access the current dataset information |

## Future Improvements
1. Implement validation for filter inputs to ensure data integrity
2. Add ability to reorder filters within each category (must, must not, should)
3. Implement a more user-friendly interface for complex filter types like geo-radius
4. Add support for more advanced filter types or combinations
5. Implement undo/redo functionality for filter changes
6. Add ability to save and load filter presets