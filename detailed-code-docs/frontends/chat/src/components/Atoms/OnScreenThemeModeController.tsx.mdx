---
title: "OnScreenThemeModeController.tsx"
---

## High-level description
This code implements a theme mode controller component for a web application, allowing users to switch between light, dark, and system-defined themes. It provides functions to set, get, and clear the theme mode, as well as a UI component for user interaction.

## Table of contents
- Theme mode utility functions
- OnScreenThemeModeController component
- Button handlers for theme switching

## Code Structure
The code consists of utility functions (`setThemeMode`, `getThemeMode`, `clearThemeMode`) and a main component (`OnScreenThemeModeController`). The utility functions manage theme-related operations, while the component provides the user interface for theme switching.

## Symbols

### `setThemeMode`
#### Description
Sets the theme mode for the application by updating the document's class list and storing the preference in local storage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | "light" \| "dark" | The desired theme mode |

#### Internal Logic
1. Determines the opposite mode
2. Removes the opposite mode class from the document
3. Stores the new mode in local storage
4. Adds the new mode class to the document

### `getThemeMode`
#### Description
Retrieves the current theme mode from local storage.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | string | The current theme mode ("light", "dark", or "system") |

### `clearThemeMode`
#### Description
Clears the theme mode preference from local storage and sets the theme based on the system preference.

#### Internal Logic
1. Removes the theme preference from local storage
2. Checks the system's color scheme preference
3. Updates the document's class list accordingly

### `OnScreenThemeModeController`
#### Description
A component that renders buttons for switching between light, dark, and system themes.

#### Internal Logic
1. Creates a signal to track the current theme mode
2. Renders buttons for dark and light modes
3. Implements click handlers for theme switching

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-icons/bi | Provides icons for the theme mode buttons |
| solid-js | Used for reactive state management |

## Future Improvements
1. Consider adding smooth transitions between theme changes for better user experience.
2. Implement a more robust system theme detection mechanism that reacts to system changes in real-time.
3. Add accessibility features, such as aria labels, to improve usability for screen readers.
4. Consider adding a tooltip or visual indicator to show the current active theme mode.