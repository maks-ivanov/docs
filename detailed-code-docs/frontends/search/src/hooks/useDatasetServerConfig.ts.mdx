---
title: "useDatasetServerConfig.ts"
---

## High-level description
This code defines a SolidJS resource that fetches the server configuration for a given dataset from an API. It uses the dataset ID from a context and returns the `server_configuration` property from the API response.

## Table of contents
- `useDatasetServerConfig` function

## References
- `DatasetAndUserContext`
- `DatasetDTO`

## Symbols

### `useDatasetServerConfig`
#### Description
This function is a custom SolidJS hook that fetches and returns the server configuration for a given dataset. It uses the `createResource` function to manage the asynchronous data fetching and caching.

#### Inputs
This function takes no direct inputs.

#### Outputs
- Returns a SolidJS Resource object. The `data` property of this object will contain the server configuration (an object) once the fetch request is successful.

#### Internal Logic
1. **Retrieves Context:** Uses `useContext` to access the `DatasetAndUserContext`, which is assumed to hold the current dataset information.
2. **Creates Resource:** Utilizes `createResource` to define a resource that depends on the `currentDataset` from the context.
3. **Fetches Data:** When `currentDataset` changes, the resource fetches data from the API endpoint `/dataset/{datasetId}`.
    - It includes credentials in the request and sets specific headers, including the API version and the dataset ID.
4. **Parses Response:** If the fetch is successful (response is OK), it parses the response as a `DatasetDTO` object.
5. **Returns Server Config:** Extracts and returns the `server_configuration` property from the parsed `DatasetDTO`.
6. **Error Handling:** If the fetch request fails, it throws an error.

## Side Effects
- This function makes an API request to fetch the dataset configuration.

## Dependencies
- `solid-js`: For `createResource` and `useContext`.

### Configuration
- `VITE_API_HOST`: Environment variable defining the base URL for the API.

## Error Handling
- Throws an error if the API request fails.
