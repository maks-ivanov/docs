---
title: "ScoreChunk.tsx"
---

## High-level description
The `ScoreChunk` component displays a single chunk of data with its associated score, metadata, and actions. It allows users to expand/collapse the chunk content, view metadata, delete the chunk, and manage its group memberships.

## Table of contents
- Imports
- Constants
- Helper Functions
- Component Definition
- Return Value

## References
- `ChunkBookmarksDTO`, `ChunkMetadata`, `indirectHasOwnProperty`, `ChunkGroupDTO` from `../utils/apiTypes`
- `BiRegularChevronDown`, `BiRegularChevronUp` from `solid-icons/bi`
- `BookmarkPopover` from `./BookmarkPopover`
- `FiEye` from `solid-icons/fi`
- `sanitizeHtml` from `sanitize-html`
- `FiEdit`, `FiTrash` from `solid-icons/fi`
- `Tooltip` from `shared/ui`
- `FullScreenModal` from `./Atoms/FullScreenModal`
- `A` from `@solidjs/router`
- `DatasetAndUserContext` from `./Contexts/DatasetAndUserContext`

## Symbols
### `ScoreChunk`
#### Description
This component renders a single chunk of data with its associated score, metadata, and actions. It allows users to expand/collapse the chunk content, view metadata, delete the chunk, and manage its group memberships.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| chunkGroups | `ChunkGroupDTO[]` | An array of chunk groups. |
| totalGroupPages | `number` | The total number of pages for chunk groups. |
| group | `boolean` | Whether the chunk is displayed in a group context. |
| chunk | `ChunkMetadata` | The chunk metadata object. |
| score | `number` | The score associated with the chunk. |
| setShowModal | `Setter&lt;boolean&gt;` | A setter function to control the visibility of a modal. |
| setOnDelete | `Setter&lt;() =&gt; void&gt;` | A setter function to set a callback for deleting the chunk. |
| setShowConfirmModal | `Setter&lt;boolean&gt;` | A setter function to control the visibility of a confirmation modal. |
| initialExpanded | `boolean` | Whether the chunk content should be initially expanded. |
| bookmarks | `ChunkBookmarksDTO[]` | An array of chunk bookmarks. |
| showExpand | `boolean` | Whether to show the expand/collapse button. |
| defaultShowMetadata | `boolean` | Whether to show metadata by default. |
| setChunkGroups | `Setter&lt;ChunkGroupDTO[]&gt;` | A setter function to update the chunk groups. |
| counter | `string` | A counter for the chunk. |
| order | `string` | An order for the chunk. |
| setSelectedIds | `Setter&lt;string[]&gt;` | A setter function to update the selected chunk IDs. |
| selectedIds | `Accessor&lt;string[]&gt;` | An accessor function to get the selected chunk IDs. |
| chat | `boolean` | Whether the chunk is displayed in a chat context. |

#### Outputs
The component renders the chunk data and actions.

#### Internal Logic
- The component uses SolidJS signals to manage its state, including whether the chunk content is expanded, whether modals are visible, and whether the chunk is being deleted.
- It uses the `sanitizeHtml` library to sanitize the chunk HTML content before rendering it.
- It fetches data from the API to get chunk groups, bookmarks, and recommendations.
- It provides actions for deleting the chunk, editing the chunk, and managing group memberships.

## Side Effects
- The component makes API calls to fetch data and perform actions.
- It modifies the global state by updating the selected chunk IDs.

#### Performance Considerations
- The component uses memoization to optimize the rendering of the chunk content and metadata.
- It uses a virtual list to render the list of chunk groups, which improves performance for large lists.

## Dependencies
- solid-js
- solid-icons
- sanitize-html
- shared/ui
- @solidjs/router

## Error Handling
- The component handles errors from API calls by displaying error messages.

## Logging
- The component does not implement any specific logging mechanisms.
