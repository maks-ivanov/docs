---
title: "DatasetSelectBox.tsx"
---

## High-level description
The `DatasetSelectBox` component displays a dropdown menu that allows users to select a dataset from a list of available datasets. It provides a search bar for filtering datasets and displays a checkmark next to the currently selected dataset.

## Table of contents
- Imports
- Component Logic
  - Context Consumption
  - State Management
  - Memoized Dataset List
  - Search Functionality
  - JSX Structure

## Code Structure
The `DatasetSelectBox` component utilizes several SolidJS primitives for state management, data flow, and UI rendering. The component subscribes to the `DatasetAndUserContext` to access and manage the current dataset and available datasets. It uses signals to track the search query and filter the dataset list accordingly. The filtered dataset list is then rendered within a popover menu, allowing users to select a dataset.

## References
- `DatasetAndUserContext`: Provides access to the current dataset and a list of available datasets.
- `DatasetAndUsageDTO`: Represents the structure of a dataset object.

## Symbols

### Symbol Name: `DatasetSelectBox`
#### Description
This component renders a dropdown menu for selecting a dataset. It displays a list of datasets fetched from the context and allows users to search and select a dataset. The selected dataset is then updated in the context.

#### Inputs
This is a React component, it doesn't have traditional function inputs.

#### Outputs
This is a React component, its output is the rendered HTML.

#### Internal Logic
1. **Retrieves Datasets and Current Dataset:** Fetches the list of available datasets and the currently selected dataset from the `DatasetAndUserContext`.
2. **Implements Search Functionality:**
   - Uses a search input field to filter the list of datasets based on the user's input.
   - Employs fuzzy search (`@nozbe/microfuzz`) to provide more flexible search results.
3. **Renders Dropdown Menu:**
   - Displays a dropdown menu with a list of datasets.
   - Each dataset is rendered as a selectable menu item.
   - A checkmark icon indicates the currently selected dataset.
4. **Handles Dataset Selection:**
   - Updates the `currentDataset` in the `DatasetAndUserContext` when a user selects a dataset.

## Side Effects
- **Updates URL Parameters:** When a dataset is selected, the component updates the URL parameters to reflect the new selection.
- **Updates Local Storage:** The selected dataset is stored in local storage for persistence.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js     | Provides the core SolidJS framework for building reactive user interfaces. |
| solid-headless | Offers headless UI components for building accessible and customizable UI elements. |
| @nozbe/microfuzz | Implements fuzzy search functionality for filtering datasets. |
| solid-icons/fa | Provides SolidJS components for Font Awesome icons. |
| solid-icons/fi | Provides SolidJS components for Feather icons. |

```jsx
import { FaSolidCheck } from "solid-icons/fa";
import {
  Show,
  For,
  createMemo,
  useContext,
  Switch,
  Match,
  createSignal,
  createEffect,
} from "solid-js";
import {
  Menu,
  MenuItem,
  Popover,
  PopoverButton,
  PopoverPanel,
} from "solid-headless";
import { DatasetAndUserContext } from "./Contexts/DatasetAndUserContext";
import { FiChevronDown, FiChevronUp } from "solid-icons/fi";
import { DatasetAndUsageDTO } from "../utils/apiTypes";
import createFuzzySearch from "@nozbe/microfuzz";
```