---
title: "ThemeModeController.tsx"
---

## High-level description
The code defines a `ThemeModeController` component in TypeScript using the SolidJS framework. This component provides a user interface for switching between light, dark, and system theme modes, persisting the user's choice in local storage.

## Table of contents
- `setThemeMode` function
- `getThemeMode` function
- `clearThemeMode` function
- `ThemeModeController` component

## Symbols

### `setThemeMode`
#### Description
Sets the theme mode of the application by manipulating CSS classes and storing the selected mode in local storage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | "light" \| "dark" | The desired theme mode to apply. |

#### Outputs
This function does not return any value.

#### Side Effects
- Modifies the `classList` of the `documentElement` to add or remove "light" or "dark" classes.
- Sets the "theme" item in local storage to the provided `mode`.

### `getThemeMode`
#### Description
Retrieves the currently stored theme mode from local storage.

#### Inputs
This function does not accept any inputs.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| themeMode | string | The stored theme mode ("light", "dark", or "system"). Defaults to "system" if no value is found. |

### `clearThemeMode`
#### Description
Clears the stored theme mode from local storage and applies the system default theme based on the user's preference.

#### Inputs
This function does not accept any inputs.

#### Outputs
This function does not return any value.

#### Side Effects
- Removes the "theme" item from local storage.
- Modifies the `classList` of the `documentElement` to add or remove the "dark" class based on the system's preferred color scheme.

### `ThemeModeController`
#### Description
A SolidJS component that renders a popover button to toggle the application's theme mode. It provides options for "Light", "Dark", and "System" modes. The selected theme is persisted in local storage and applied to the document.

#### Inputs
This component does not accept any inputs.

#### Outputs
This component renders a JSX element representing the theme mode controller.

#### Internal Logic
1. Uses `createSignal` to manage the `currentTheme` state, initialized with the value from `getThemeMode()`.
2. Employs `createEffect` to apply the appropriate theme class to the `documentElement` on component mount and whenever `currentTheme` changes.
3. Renders a `Popover` component that:
    - Displays a button with either a sun or moon icon based on the current theme.
    - Opens a `PopoverPanel` on click, revealing a `Menu` with options for "Light", "Dark", and "System" themes.
    - Each `MenuItem` updates the `currentTheme` state using `setCurrentTheme` and persists the selection using `setThemeMode` or `clearThemeMode`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-headless | Provides headless UI components like `Menu`, `Popover`, etc. |
| solid-js | The core SolidJS library for creating reactive components and effects. |
| solid-icons/bs | Provides Bootstrap icons like `BsMoonStars` and `BsSun`. |
| solid-icons/cg | Provides other icon sets like `CgScreen` from Codingame. |

## References
- `ThemeModeController` is referenced and rendered within the `Footer` component (frontends/search/src/components/Footer.tsx).
