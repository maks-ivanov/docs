---
title: "OrgGroupPageView.tsx"
---

## High-level description
The `GroupUserPageView` component displays a paginated list of chunk groups associated with a specific dataset. It allows users to view group details, delete groups, and download associated files if the feature is enabled. The component fetches group data, handles user interactions, and provides navigation between pages.

## Table of contents
- Imports
- `GroupUserPageViewProps` interface
- `GroupUserPageView` component
  - State variables
  - Effects
    - Fetching chunk groups
  - Functions
    - `deleteGroup`
    - `handleDownloadFile`
  - JSX Structure

## References
- `isChunkGroupPageDTO` and `ChunkGroupDTO` from `../utils/apiTypes`
- `getLocalTime` from `./ChunkMetadataDisplay`
- `DatasetAndUserContext` from `./Contexts/DatasetAndUserContext`
- `useDatasetServerConfig` from `../hooks/useDatasetServerConfig`
- `downloadFile` from `../utils/downloadFile`

### Symbol Name
`GroupUserPageView`

#### Description
This component fetches and displays a paginated list of chunk groups for the current dataset. It allows users to view group details, delete groups, and download associated files.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| setOnDelete | Setter&lt;(delete_chunks: boolean) =&gt; void&gt; | A setter function to update the parent component's state with a function that handles the deletion of a group and its chunks. |
| setShowConfirmModal | Setter&lt;boolean&gt; | A setter function to control the visibility of a confirmation modal in the parent component. |

#### Outputs
This component renders JSX that represents the chunk group list view.

#### Internal Logic
1. **Fetching Chunk Groups:**
   - On component mount and whenever the current dataset or page number changes, the component fetches the list of chunk groups for the current page from the API.
   - It uses the `fetch` API to make a GET request to `/dataset/groups/:datasetId/:pageNumber`.
   - The fetched data is then used to update the `groups`, `groupPageCount`, and `loading` state variables.

2. **Deleting a Group:**
   - When the user clicks the delete button for a group, the `deleteGroup` function is called.
   - This function updates the `setOnDelete` prop with a function that will make a DELETE request to `/chunk_group/:groupId` when called.
   - It also sets the `setShowConfirmModal` prop to true to display a confirmation modal to the user.

3. **Downloading a File:**
   - If the `DOCUMENT_DOWNLOAD_FEATURE` is enabled in the server configuration and the group has a `file_id`, a download button is displayed.
   - Clicking this button calls the `handleDownloadFile` function, which uses the `downloadFile` utility function to download the file associated with the group.

4. **Pagination:**
   - The component provides buttons to navigate between pages of chunk groups.
   - The `groupPage` state variable tracks the current page number.
   - The `groupPageCount` state variable stores the total number of pages.

5. **Conditional Rendering:**
   - The component uses the `Show` component from SolidJS to conditionally render different parts of the UI based on the state.
   - For example, it shows a loading message while fetching data, an empty message if no groups are found, and the group list when data is available.

## Side Effects
- Fetches data from the API.
- Updates the parent component's state via the `setOnDelete` and `setShowConfirmModal` props.
- Downloads files to the user's computer.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Provides the core functionality for building the component's UI and logic. |
| solid-icons/fi | Provides icons used in the component. |
| solid-icons/bi | Provides icons used in the component. |
| ../utils/apiTypes | Provides type definitions for API responses. |
| ./ChunkMetadataDisplay | Provides the `getLocalTime` function. |
| ./Contexts/DatasetAndUserContext | Provides access to the current dataset and user context. |
| ../hooks/useDatasetServerConfig | Provides access to the server configuration for the current dataset. |
| ../utils/downloadFile | Provides the `downloadFile` utility function. |

## Future Improvements
- **Error Handling:** Implement more robust error handling for API requests and display user-friendly error messages.
- **Accessibility:** Improve the accessibility of the component, such as adding ARIA attributes and keyboard navigation.
- **Code Optimization:** Explore potential optimizations for rendering and data fetching, especially when dealing with a large number of groups or pages.
- **Implement Search/Filter:** Add functionality to search or filter the list of groups.
- **Group Detail View:** Instead of just linking to the group detail page, consider adding an option to expand and view group details within the list.
