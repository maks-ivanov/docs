---
title: "apiTypes.ts"
---

## High-level description
This file defines TypeScript interfaces and utility functions for handling API types and responses in a search frontend application. It includes definitions for various data structures like chunks, groups, users, and datasets, as well as type guards and helper functions for working with these types.

## Table of contents
- ChunkMetadata interface
- ChunkMetadataWithScore interface
- indirectHasOwnProperty function
- APIRequest interface
- isChunkMetadata function
- ChunkGroup interface
- ChunkBookmarksDTO interface
- ChunksWithTotalPagesDTO interface
- ScoreChunkDTO interface
- isScoreChunkDTO function
- ActixApiDefaultError interface
- isActixApiDefaultError function
- ActixChunkUpdateError type
- isActixChunkUpdateError function
- detectReferralToken function
- getReferralTokenArray function
- UserOrganization interface
- Organization interface
- SlimUser interface
- UserDTO interface
- isUserDTO function
- UserDTOWithVotesAndChunks type
- isUserDTOWithVotesAndChunks function
- UsersWithTotalPagesDTO interface
- UserDTOWithScore type
- isUserDTOWithScore function
- ChunkGroupDTO interface
- ChunkGroupPageDTO interface
- isChunkGroupPageDTO function
- isChunkGroupDTO function
- ChunkGroupBookmarkDTO interface
- ChunkGroupSearchDTO interface
- CreateChunkDTO interface
- SingleChunkDTO interface
- ChunkGroupBookmarksDTO interface
- ChunkGroupBookmarksWithStatusDTO interface
- FileDTO interface
- FileUploadCompleteNotificationDTO interface
- FileAndGroupId interface
- isFileUploadCompleteNotificationDTO function
- NotificationDTO type
- NotificationWithPagesDTO interface
- Message interface
- messageRoleFromIndex function
- OrganizationDTO interface
- isOrganizationDTO function
- DatasetDTO interface
- isDatasetDTO function
- UsageDTO interface
- isUsageDTO function
- DatasetAndUsageDTO interface
- isDatasetAndUsageDTO function
- GroupScoreChunkDTO interface
- SearchOverGropsResponseBody interface
- ChunkFile interface
- isChunkFile function
- ChunkFilePagesDTO interface
- isChunkFilePagesDTO function
- BookmarkData interface
- Range interface
- MatchCondition type
- FieldCondition interface
- ChunkFilter interface

## Code Structure
The file defines a series of interfaces and types that represent various data structures used in the application. These are accompanied by type guard functions (e.g., `isChunkMetadata`, `isUserDTO`) that check if a given object conforms to a specific interface. The file also includes utility functions for handling referral tokens and message roles.

## Symbols

### `ChunkMetadata`
#### Description
Represents metadata for a chunk of text or document.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | Unique identifier for the chunk |
| chunk_html | string | Optional HTML content of the chunk |
| link | string | Optional link associated with the chunk |
| qdrant_point_id | string | Identifier for the chunk in Qdrant vector database |
| created_at | string | Timestamp of creation |
| updated_at | string | Timestamp of last update |
| tag_set | string[] | Optional array of tags |
| tracking_id | string | Optional tracking identifier |
| time_stamp | string | Optional timestamp |
| metadata | Record&lt;string, never&gt; | Optional additional metadata |
| dataset_id | string | Identifier of the dataset the chunk belongs to |
| weight | number | Weight of the chunk |
| location | { lat: number; lon: number } | Optional location data |
| num_value | number | Optional numerical value |
| image_urls | string[] | Optional array of image URLs |

#### Outputs
This is an interface definition, so it doesn't have direct outputs.

### `indirectHasOwnProperty`
#### Description
A utility function to safely check if an object has a specific property.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| obj | unknown | The object to check |
| prop | string | The property name to look for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the object has the property, false otherwise |

### `isChunkMetadata`
#### Description
Type guard function to check if an object is of type ChunkMetadata.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| chunk | unknown | The object to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the object is ChunkMetadata, false otherwise |

### `detectReferralToken`
#### Description
Detects and stores a referral token in local storage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| queryParamT | string | undefined | null | The referral token from query parameters |

#### Outputs
This function doesn't return a value but updates local storage.

### `getReferralTokenArray`
#### Description
Retrieves the array of referral tokens from local storage.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tokens | string[] | Array of stored referral tokens |

## Dependencies
This file doesn't have external dependencies, but it's likely used throughout the application for type checking and data handling.

## Error Handling
The file includes several type guard functions (e.g., `isChunkMetadata`, `isUserDTO`) that can be used for runtime type checking to prevent errors when working with data of uncertain structure.

## Future Improvements
- Consider adding more comprehensive documentation for each interface and function.
- Implement stricter type checking for complex nested structures.
- Add validation logic for critical fields like IDs and timestamps.
- Consider using a schema validation library for more robust runtime type checking.