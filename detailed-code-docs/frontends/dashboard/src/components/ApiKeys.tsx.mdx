---
title: "ApiKeys.tsx"
---

## High-level description
This code defines a SolidJS component called `ApiKeys` that displays a list of API keys associated with the current user. It allows users to view key details, generate new keys with specific permissions, and delete existing keys.

## Table of contents
- Imports
- `ApiKeys` component
  - State variables
  - Resource for fetching API keys
  - `deleteApiKey` function
  - JSX rendering

## References
- `ApiKeyGenerateModal` (component)
- `UserContext` (context)
- `ApiKeyRespBody`, `fromI32ToApiKeyRole`, `fromI32ToUserRole`, `formatDate` (types and functions)

## Symbols

### `ApiKeys`
#### Description
This component fetches, displays, and manages API keys for the current user. It renders a table listing existing keys and provides functionality for creating and deleting keys.

#### Inputs
This component does not accept any props.

#### Outputs
This component renders a JSX element representing the API keys management section.

#### Internal Logic
1. **Fetches API keys:** Uses `createResource` to fetch API keys from the `/user/api_key` endpoint.
2. **Displays API keys:** Renders a table listing the fetched API keys, including their name, permissions, associated datasets and organizations, and creation date.
3. **Handles key deletion:** Provides a `deleteApiKey` function to remove a key from the UI and send a DELETE request to the server.
4. **Handles key creation:** Renders an `ApiKeyGenerateModal` component when the "Create New Key +" button is clicked, allowing users to generate new keys.

## Side Effects
- Modifies the UI to display fetched and updated API keys.
- Sends API requests to fetch, create, and delete API keys.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Core SolidJS library for component creation, state management, and data fetching. |
| solid-icons/fa | Font Awesome icon library for rendering icons. |
| terracotta | UI component library for dialogs and other UI elements. |
| shared/types | Shared type definitions for API responses and other data structures. |

### Configuration
This component relies on environment variables for the API host:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| VITE_API_HOST | string | N/A | The base URL of the API server. |
