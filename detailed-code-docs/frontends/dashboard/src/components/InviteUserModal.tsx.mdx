---
title: "InviteUserModal.tsx"
---

## High-level description
The `InviteUserModal` component displays a modal dialog for inviting new users to an organization. It allows the inviting user to specify the email address and role of the invitee. Upon submission, it sends an invitation request to the backend and displays a success or error message.

## Table of contents
- Imports
- Interface `InviteUserModalProps`
- Component `InviteUserModal`

## Symbols

### `InviteUserModal`
#### Description
This component renders a modal dialog that allows users to invite other users to their organization. It handles user input, validation, and submission of the invitation request to the backend API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | Accessor&lt;boolean&gt; |  A signal indicating whether the modal is open or closed. |
| closeModal | () =&gt; void | A function to close the modal. |

#### Outputs
This component doesn't have any explicit outputs. It updates the UI and displays toasts based on the success or failure of the invitation request.

#### Internal Logic
1. **Initialization:**
    - Retrieves the API host from environment variables.
    - Initializes signals for email, sendingEmail status, and user role.
    - Gets the user context to access user information and organization details.
    - Computes the current user's role in the selected organization.
    - Sets the initial role of the invitee to the current user's role.
2. **Modal Handling:**
    - Defines `handleCloseModal` to reset input fields and close the modal.
3. **Invitation Logic:**
    - Defines `inviteUser` to handle the invitation process:
        - Sets `sendingEmail` to true to indicate the invitation is being sent.
        - Sends a POST request to the `/invitation` endpoint with the invitee's email, role, and organization ID.
        - Handles the response from the API:
            - If successful, closes the modal and displays a success toast.
            - If there's an error, parses the error message from the response and displays an error toast.
4. **Rendering:**
    - Conditionally renders the modal dialog based on the `isOpen` prop.
    - Displays input fields for the invitee's email and role.
    - Disables the "Invite New User" button while the invitation is being sent or if the email input is empty.

## Side Effects
- Sends API requests to invite users and fetch user data.
- Updates the UI by showing/hiding the modal and displaying toasts.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js |  Used for creating reactive UI components and managing state. |
| terracotta | Used for UI components like Dialog, DialogOverlay, DialogPanel, and DialogTitle. |
| shared/types | Used for importing types like UserRole, fromI32ToUserRole, stringToUserRole, and DefaultError. |

## Error Handling
- Displays error messages returned by the backend API as toasts to the user.

## Logging
- Logs errors encountered during API requests to the console.
