---
title: "createDataset.ts"
---

## High-level description
The `createNewDataset` function sends a POST request to the backend API to create a new dataset with the given name, organization ID, and server configuration. It returns the newly created Dataset object if successful, or throws an error if the request fails.

## Table of contents
- `createNewDataset` function

## References
- `Dataset`, `DefaultError`, `ServerEnvsConfiguration` types from "shared/types" module.

## Symbols

### `createNewDataset`
#### Description
This function sends a POST request to the `/dataset` endpoint of the API to create a new dataset. It includes the dataset name, organization ID, and server configuration in the request body. If the request is successful, it parses the response JSON as a `Dataset` object and returns it. If the request fails, it parses the response JSON as a `DefaultError` object and throws a new error with the error message.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | string | The name of the new dataset. |
| organizationId | string | The ID of the organization that the dataset belongs to. |
| serverConfig | ServerEnvsConfiguration | The server configuration for the new dataset. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Dataset | Dataset | The newly created Dataset object. |

#### Internal Logic
1. Constructs the API endpoint URL using the `api_host` variable and the `/dataset` path.
2. Sends a POST request to the API endpoint with the following:
    - `credentials: "include"` to include cookies in the request.
    - `Content-Type: "application/json"` header to indicate the request body is in JSON format.
    - `TR-Organization` header with the organization ID.
    - Request body containing the dataset name, organization ID, server configuration, and an empty client configuration object.
3. Checks if the response status is OK (200-299).
    - If yes, parses the response JSON as a `Dataset` object and returns it.
    - If not, parses the response JSON as a `DefaultError` object, extracts the error message, and throws a new error with the message.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| shared/types | Provides the `Dataset`, `DefaultError`, and `ServerEnvsConfiguration` types. |

## Error Handling
The function handles errors by catching any exceptions thrown during the API request. If an error occurs, it parses the error response as a `DefaultError` object and throws a new error with the error message.
