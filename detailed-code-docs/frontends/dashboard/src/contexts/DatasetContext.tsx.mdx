---
title: "DatasetContext.tsx"
---

## High-level description
This code defines a SolidJS context, `DatasetContext`, for managing and accessing dataset information within a dashboard application. It fetches dataset details from an API based on the provided dataset ID and exposes the dataset data through a context provider.

## Table of contents
- `DatasetStoreContextProps` interface
- `DatasetStore` interface
- `DatasetContext` context
- `DatasetContextWrapper` component

## References
- `UserContext` from './UserContext'
- `useParams` from '@solidjs/router'
- `createToast` from '../components/ShowToasts'
- `Dataset` from 'shared/types'

## Symbols

### `DatasetStoreContextProps`
#### Description
Defines the properties for the `DatasetContextWrapper` component, requiring a `children` prop of type `JSX.Element`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| children | JSX.Element | The child elements to be rendered within the context provider. |

### `DatasetStore`
#### Description
Defines the structure of the dataset store object, which includes an accessor for the dataset.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dataset | Accessor&lt;Dataset \| null&gt; \| null | An accessor function to retrieve the dataset data or null if not available. |

### `DatasetContext`
#### Description
A SolidJS context that holds the `DatasetStore` object. This context allows components to access the dataset data and any related functionality provided by the store.

### `DatasetContextWrapper`
#### Description
A wrapper component that provides the `DatasetContext`. It fetches the dataset data from the API and makes it available to its children components through the context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | DatasetStoreContextProps | The properties for the component, including the child elements. |

#### Internal Logic
1. Retrieves the API host from environment variables.
2. Accesses the `UserContext` to check for user authentication.
3. Uses `useParams` to get the `dataset_id` from the route.
4. If a valid `dataset_id` and authenticated user exist, it fetches the dataset data from the API.
5. Sets the fetched dataset data to the `dataset` signal.
6. Creates a `datasetStore` object containing the `dataset` signal.
7. Renders the `DatasetContext.Provider` with the `datasetStore` value, making it accessible to all child components.

## Side Effects
- Fetches data from the API, potentially modifying the `dataset` signal.
- Displays toast notifications on successful or failed data fetching.

## Dependencies
- solid-js
- shared/types
- @solidjs/router

## Error Handling
- If the dataset fetching fails, a toast notification with an error message is displayed.
- Invalid dataset IDs are logged as errors to the console.
