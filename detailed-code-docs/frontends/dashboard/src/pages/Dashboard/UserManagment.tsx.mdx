---
title: "UserManagment.tsx"
---

## High-level description
This code defines the `UserManagement` component in a web application's dashboard. It allows organization owners and admins to manage users within their organization, including viewing user details, inviting new users, editing existing user roles, and removing users. It also handles the display and deletion of invitations.

## Table of contents
- Imports
- `UserManagement` component
  - State variables
  - `getUsers` function
  - `getInvitations` function
  - `removeUser` function
  - `deleteInvitation` function
  - Effects
  - JSX structure

## References
- `UserContext`
- `InviteUserModal`
- `EditUserModal`
- `createToast`
- `FaRegularTrashCan`
- `SlimUser`, `Invitation`, `fromI32ToUserRole`, `isInvitation` (from shared types)

## Symbols
### `UserManagement`
#### Description
This component renders the user management section of the dashboard, providing functionality for viewing, inviting, editing, and removing users within an organization. It also manages invitations, allowing users to view and delete pending invitations.

#### Inputs
This component does not accept any props.

#### Outputs
This component renders the JSX structure for the user management section.

#### Internal Logic
1. **State Management:** Utilizes SolidJS's `createSignal` to manage component state, including the list of users, invitations, modal visibility, and the user being edited.
2. **Data Fetching:** Fetches user and invitation data from the API using `fetch` calls.
3. **User Actions:** Provides functions for removing users (`removeUser`) and deleting invitations (`deleteInvitation`).
4. **Modal Management:** Controls the visibility of the "Invite User" and "Edit User" modals using state variables.
5. **Conditional Rendering:** Uses SolidJS's `Show` component to conditionally render elements based on user roles and the presence of invitations.

## Side Effects
- Makes API calls to fetch user and invitation data.
- Updates the user interface based on API responses and user interactions.
- Displays toast notifications for success and error messages.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Provides core reactivity and rendering functions. |
| terracotta | Used for the modal dialog components. |
| solid-icons/fa | Provides the trash can icon. |
| shared/types | Imports shared type definitions. |

## Error Handling
- Includes basic error handling for `fetch` calls, displaying error toasts to the user.
- Handles 403 Forbidden responses from the API, suggesting a potential role mismatch and prompting the user to sign out and back in.

## Logging
- Logs errors encountered during API calls to the console.
