---
title: "Overview"
---

## High-level description
This directory contains utility functions and hooks for the analytics frontend of the application. It includes functions for API host configuration, date formatting and parsing, string manipulation, and enhanced navigation. These utilities are designed to support various features of the analytics dashboard, particularly in handling date-related operations and URL management.

## What does it do?
The utilities in this directory perform several key functions:

1. API Configuration: It provides a constant for the API host URL, which is used throughout the application to construct API endpoints.

2. Date Handling: It offers a set of functions for formatting dates for API requests, parsing custom date strings, and transforming date parameters for analytics filters. These functions are crucial for ensuring proper date representation in API calls and user interfaces.

3. String Manipulation: It includes a function to convert strings to title case, which is useful for improving the presentation of data in the analytics dashboard.

4. Enhanced Navigation: It provides a custom navigation hook that preserves existing query parameters when navigating between routes, ensuring a smoother user experience in the analytics interface.

These utilities work together to support the core functionality of the analytics dashboard, enabling proper data formatting, API communication, and user interface enhancements.

## Key Files

1. `apiHost.ts`:
   - Defines the `apiHost` constant, which stores the base URL of the API.
   - Retrieves the API host value from the `VITE_API_HOST` environment variable.

2. `formatDate.ts`:
   - Contains several functions for date formatting and parsing:
     - `formatDateForApi`: Formats dates for API requests.
     - `parseCustomDateString`: Parses custom date strings.
     - `transformAnalyticsFilter`: Transforms analytics filters with date ranges.
     - `transformDateParams`: Formats date parameters for filters.
     - `formatSensibleTimestamp`: Formats timestamps based on date ranges.

3. `titleCase.ts`:
   - Defines the `toTitleCase` function, which converts strings to title case.

4. `useBetterNav.ts`:
   - Implements the `useBetterNav` custom hook for enhanced navigation.
   - Preserves existing query parameters when navigating to new routes.

## Dependencies
- Vite: Used for environment variable injection in `apiHost.ts`.
- date-fns: Utilized in `formatDate.ts` for date manipulation and formatting.
- @solidjs/router: Employed in `useBetterNav.ts` for navigation and query parameter management.

## Configuration
The API host is configured using the `VITE_API_HOST` environment variable, which should be set during the Vite build process. This configuration is crucial for ensuring that the application communicates with the correct API endpoint.

Here's an example of how these utilities might be used together in the analytics frontend:

```typescript
import { apiHost } from './utils/apiHost';
import { formatDateForApi, transformAnalyticsFilter } from './utils/formatDate';
import { toTitleCase } from './utils/titleCase';
import { useBetterNav } from './utils/useBetterNav';

// Constructing an API endpoint
const endpoint = `${apiHost}/analytics/data`;

// Formatting a date for an API request
const formattedDate = formatDateForApi(new Date());

// Transforming an analytics filter with date range
const filter = transformAnalyticsFilter({
  date_range: { gt: new Date(), lt: new Date() },
  // other filter properties
});

// Converting a string to title case for display
const displayTitle = toTitleCase('analytics dashboard');

// Using the enhanced navigation
const navigate = useBetterNav();
navigate('/new-analytics-view');
```

This example demonstrates how these utilities can be combined to handle API requests, format data for display, and manage navigation within the analytics frontend. The `apiHost` ensures consistent API endpoint construction, the date formatting functions prepare data for API requests, the `toTitleCase` function improves text presentation, and `useBetterNav` provides smooth navigation while preserving query parameters.