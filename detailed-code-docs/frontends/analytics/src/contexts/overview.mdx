---
title: "Overview"
---

## High-level description
This directory contains two important context providers for managing user authentication and organization selection in a SolidJS-based analytics application. The `UserAuthContext.tsx` and `OrgContext.tsx` files work together to handle user authentication, organization selection, and provide this information to the rest of the application.

## What does it do?
The code in this directory implements a user authentication and organization management system for an analytics application. Here's a simplified explanation of what it does:

1. When a user accesses the application, it checks if they're logged in.
2. If the user isn't logged in, they're redirected to a login page.
3. Once logged in, the application fetches the user's information, including their associated organizations.
4. The user can select an organization to work with, and this selection is reflected in the URL.
5. The selected organization and user information are made available to other parts of the application, so features and data can be tailored to the specific user and organization.

This system ensures that only authenticated users can access the application and that they're always working within the context of a specific organization.

## Key Files

### UserAuthContext.tsx
This file is responsible for user authentication and providing user information to the rest of the application. It includes:

- A `UserContext` for storing and sharing user data.
- A `UserAuthContextProvider` component that:
  - Attempts to log in the user when the application loads.
  - Redirects to a login page if the user is not authenticated.
  - Provides user data to child components once authenticated.
  - Wraps child components with organization context and layout components.

### OrgContext.tsx
This file manages the selection and provision of organization data. It includes:

- An `OrgContext` for storing and sharing the selected organization.
- An `OrgContextProvider` component that:
  - Initializes the selected organization based on URL parameters or defaults.
  - Provides functions to change the selected organization.
  - Updates URL parameters when the organization changes.
  - Redirects to an error page if no valid organization is found.

## Dependencies
The code relies on several external libraries and frameworks:

1. SolidJS (version not specified): A reactive JavaScript library for building user interfaces.
   - Used for creating reactive components, contexts, and managing state.

2. @solidjs/router (version not specified): The official router for SolidJS applications.
   - Used for handling navigation, redirects, and URL parameter management.

3. shared/types (likely an internal package): Provides shared type definitions.
   - Used for type definitions like `SlimUser` and `Organization`.

These dependencies were chosen to leverage the reactive programming model of SolidJS and to ensure type safety across the application.

## Configuration
While there are no explicit configuration files mentioned, the code does use some configurable elements:

1. API Host: The `apiHost` variable (imported from "../utils/apiHost") is used to construct API endpoints. This likely allows for easy switching between development and production environments.

2. URL Parameters: The application uses URL parameters to store and retrieve the selected organization, allowing for bookmarkable and shareable links to specific organization contexts.

3. Error Redirection: There's a hardcoded "/error" path used for redirecting in case of errors, which could potentially be configurable.

4. Login Page: The login page URL is constructed using the current origin, which allows for flexible deployment across different domains.

```typescript
window.location.href = `${apiHost}/auth/login?redirect_uri=${window.location.origin}`;
```

This configuration approach allows for flexibility in deployment while maintaining a consistent structure for authentication and organization management across the application.