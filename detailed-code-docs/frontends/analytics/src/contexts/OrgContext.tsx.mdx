---
title: "OrgContext.tsx"
---

## High-level description
The `OrgContext.tsx` file defines a SolidJS context, `OrgContext`, for managing the currently selected organization within the application. It provides a way to access and update the selected organization across different components.

## Table of contents
- `OrgDatasetContextProps` interface
- `OrgContextType` interface
- `OrgContext` context
- `OrgContextProvider` component

## References
- `@solidjs/router` - for redirecting and using search params
- `shared/types` - for `Organization` and `SlimUser` types
- `solid-js` - for SolidJS core functionalities

## Symbols

### `OrgDatasetContextProps`
#### Description
An interface defining the props expected by the `OrgContextProvider` component. It extends the `ParentProps` interface and requires a `user` property of type `SlimUser`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user | `SlimUser` | The currently logged-in user with their associated organizations. |

### `OrgContextType`
#### Description
An interface defining the shape of the context object provided by the `OrgContext`. It includes an accessor for the `selectedOrg` and a function `selectOrg` to update it.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| selectedOrg | `Accessor&lt;Organization&gt;` | An accessor function to retrieve the currently selected organization. |
| selectOrg | `(orgId: string) =&gt; void` | A function to update the selected organization based on the provided organization ID. |

### `OrgContext`
#### Description
A SolidJS context created using `createContext` to manage the selected organization globally within the application.

### `OrgContextProvider`
#### Description
A SolidJS component that provides the `OrgContext`. It initializes the context with the user's organizations and handles selecting an organization, including updating the URL parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | `OrgDatasetContextProps` | The props for the component, including the currently logged-in user. |

#### Internal Logic
1. **Initialization:**
   - Retrieves the initial organization from the URL parameters or defaults to the user's first organization.
   - If no organizations are found, redirects to an error page.
2. **State Management:**
   - Uses `createSignal` to create a reactive signal for the `selectedOrg`.
3. **`setSelectedOrgWithParams` Function:**
   - Updates the `selectedOrg` state with the organization matching the provided `orgId`.
   - Updates the URL parameters to reflect the selected organization.
   - Redirects to an error page if no matching organization is found.
4. **Rendering:**
   - Provides the `OrgContext` with the `selectedOrg` accessor and the `selectOrg` function.
   - Conditionally renders the children components only when a `selectedOrg` is available.

## Side Effects
- Redirects to `/error` if the user has no organizations or if an invalid organization ID is selected.
- Updates the URL search parameters when a new organization is selected.

## Dependencies
- `@solidjs/router` - for redirecting and using search params
- `shared/types` - for `Organization` and `SlimUser` types
- `solid-js` - for SolidJS core functionalities
