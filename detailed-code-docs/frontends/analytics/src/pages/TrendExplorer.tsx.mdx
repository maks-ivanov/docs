---
title: "TrendExplorer.tsx"
---

## High-level description
The `TrendExplorer.tsx` file defines a React component that displays a table of trending search topics within a selected dataset. Users can click on a topic to view a list of associated search queries.

## Table of contents
- `WIPWarning` component
- `TrendExplorer` component
- `TopicRow` component
- `SearchQueryEventModal` component
- `SmallCol` component

## Code Structure
The `TrendExplorer` component uses the `createQuery` hook from `@tanstack/solid-query` to fetch trending topics data. It then renders a `Table` component, which in turn renders a `TopicRow` component for each topic. The `TopicRow` component uses another `createQuery` hook to fetch search queries related to the selected topic. The `SearchQueryEventModal` component is used to display details of a selected search query event.

## References
- `getTrendsBubbles` from `../api/trends`
- `getQueriesForTopic` from `../api/trends`
- `DatasetContext` from `../layouts/TopBarLayout`
- `FullScreenModal`, `Table`, `Tr` from `shared/ui`
- `parseCustomDateString` from `../utils/formatDate`
- `toTitleCase` from `../utils/titleCase`

## Symbols

### `WIPWarning`
#### Description
This component renders a warning message indicating that the Trend Explorer feature is a work in progress.

#### Inputs
None

#### Outputs
JSX representing a warning message.

### `TrendExplorer`
#### Description
This component fetches and displays a table of trending search topics for the selected dataset.

#### Inputs
None

#### Outputs
JSX representing a table of trending search topics.

#### Internal Logic
1. Fetches the selected dataset from the `DatasetContext`.
2. Uses `createQuery` to fetch trending topics data using `getTrendsBubbles` API call.
3. Renders a loading message while data is being fetched.
4. Once data is available, renders a `Table` component with the trending topics.

### `TopicRow`
#### Description
This component represents a single row in the trending topics table. It displays the topic name, density, and average score. Clicking on a row fetches and displays a list of associated search queries in a modal.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| topic | `SearchClusterTopics` | An object containing details of a trending topic. |
| datasetId | `string` | The ID of the selected dataset. |

#### Outputs
JSX representing a table row for a trending topic.

#### Internal Logic
1. Uses `createQuery` to fetch search queries related to the topic when the row is clicked.
2. Renders the topic name, density, and average score in the table row.
3. Renders a `FullScreenModal` component that displays the fetched search queries when open.

### `SearchQueryEventModal`
#### Description
This component displays details of a selected search query event in a modal.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| searchEvent | `SearchQueryEvent` | An object containing details of a search query event. |

#### Outputs
JSX representing a modal with search query event details.

#### Internal Logic
Renders the following details of the search query event using `SmallCol` components:
- Results obtained timestamp
- Number of results obtained
- Search type
- Latency
- Top score

### `SmallCol`
#### Description
This component renders a label and value pair in a horizontal layout.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| label | `string` | The label to display. |
| value | `string` \| `number` | The value to display. |

#### Outputs
JSX representing a label and value pair.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/solid-query | Used for data fetching and caching. |
| solid-js | The core SolidJS library. |
| shared/ui | Provides shared UI components like `FullScreenModal`, `Table`, and `Tr`. |
| ../api/trends | Provides API functions to fetch trending topics and search queries. |
| ../layouts/TopBarLayout | Provides the `DatasetContext`. |
| ../utils/formatDate | Provides the `parseCustomDateString` function. |
| ../utils/titleCase | Provides the `toTitleCase` function. |

## Future Improvements
- Implement pagination for the search queries list in the `TopicRow` component.
- Add filtering and sorting options to the trending topics table.
- Display more detailed information in the `SearchQueryEventModal` component, such as the full list of returned results.
- Consider adding visualizations to the Trend Explorer, such as a line chart showing the trend of a topic's density over time. 
