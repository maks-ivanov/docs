---
title: "tables.ts"
---

## High-level description
The `getSearchQueries` function fetches search query data from the analytics API endpoint. It takes search parameters and a dataset ID as input and returns an array of `SearchQueryEvent` objects representing the retrieved search queries.

## Table of contents
- `getSearchQueries`

## References
- `SearchQueriesTablesParams`
- `SearchQueryResponse`
- `transformAnalyticsFilter`
- `apiHost`

## Symbols

### `getSearchQueries`
#### Description
This function fetches search query data from the analytics API based on provided parameters and dataset ID.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | `SearchQueriesTablesParams` | An object containing filter, pagination, sorting options for the search queries. |
| datasetId | `string` | The ID of the dataset to fetch search queries from. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| queries | `SearchQueryEvent[]` | An array of `SearchQueryEvent` objects representing the retrieved search queries. |

#### Internal Logic
1. Constructs the API endpoint URL using `apiHost` and the `/analytics/search` path.
2. Sends a POST request to the API endpoint with the following:
    - `credentials: "include"` to include cookies in the request.
    - Request body containing the transformed filter, page number, sort options, and query type.
    - Headers including the dataset ID.
3. Checks if the response is successful. If not, throws an error.
4. Parses the response JSON as a `SearchQueryResponse` object.
5. Returns the `queries` array from the parsed response.

## Side Effects
- This function makes a network request to the analytics API.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `shared/types` | Provides type definitions for `AnalyticsFilter`, `SearchQueryResponse`, `SearchSortBy`, and `SortOrder`. |
| `../utils/formatDate` | Provides the `transformAnalyticsFilter` function for transforming date formats. |
| `../utils/apiHost` | Provides the `apiHost` variable for constructing the API endpoint URL. |
```typescript
import {
  AnalyticsFilter,
  SearchQueryResponse,
  SearchSortBy,
  SortOrder,
} from "shared/types";
import { transformAnalyticsFilter } from "../utils/formatDate";
import { apiHost } from "../utils/apiHost";
```
