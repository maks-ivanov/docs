---
title: "error_correct_intbcs_to_whitelist_test.py"
---

## High-level description

The target file `error_correct_intbcs_to_whitelist_test.py` is a unit test module designed to test the functionality of the `error_correct_intbcs_to_whitelist` function from the `cassiopeia` library. This function is responsible for correcting integer barcodes (intBCs) in a dataset to match a given whitelist, ensuring data integrity by correcting potential errors in the barcodes.

## Code Structure

The main class in this file is `TestErrorCorrectIntBCstoWhitelist`, which is a subclass of `unittest.TestCase`. This class contains setup logic to prepare test data and two test methods that validate the behavior of the `error_correct_intbcs_to_whitelist` function using different input formats for the whitelist.

## Symbols

### `TestErrorCorrectIntBCstoWhitelist`
#### Description
This class is a test case for the `error_correct_intbcs_to_whitelist` function. It sets up test data and contains methods to verify that the function correctly adjusts integer barcodes to match a specified whitelist.

#### Inputs
- None directly, but uses instance variables initialized in `setUp`.

#### Outputs
- None directly, but asserts the correctness of the function's output.

#### Internal Logic
- **`setUp` Method**: Initializes test data, including a DataFrame `multi_case` with various columns representing cell barcodes, UMIs, read counts, sequences, integer barcodes, and other metadata. It also sets up a whitelist and a dictionary of expected corrections.
- **`test_correct` Method**: Tests the function using a file path to the whitelist. It compares the function's output DataFrame to an expected DataFrame where integer barcodes have been corrected according to the `corrections` dictionary.
- **`test_correct_whitelist_list` Method**: Similar to `test_correct`, but uses a list directly as the whitelist input instead of a file path.

## References

- **`cassiopeia.pp.error_correct_intbcs_to_whitelist`**: The function being tested, which is expected to correct integer barcodes in a DataFrame to match a given whitelist.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `os` | Used to handle file paths for locating test files. |
| `unittest` | Provides the framework for writing and running tests. |
| `numpy` | Imported but not directly used in this file. |
| `pandas` | Used to create and manipulate DataFrames for test data. |
| `cassiopeia` | The library containing the function under test. |

## Error Handling

The test methods use `pandas.testing.assert_frame_equal` to assert that the output DataFrame matches the expected DataFrame. If the DataFrames do not match, an assertion error will be raised, indicating a failure in the function's behavior.

## Logging

No explicit logging is implemented in this test file. The `unittest` framework will handle output related to test results.

## TODOs

No TODOs or notes are present in the code.