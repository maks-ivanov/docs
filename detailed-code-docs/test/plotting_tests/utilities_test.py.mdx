---
title: "utilities_test.py"
---

## High-level description

The `utilities_test.py` file is a unit test suite for testing various utility functions used in plotting trees within the Cassiopeia framework. It uses the `unittest` framework to verify the correctness of functions related to coordinate transformations, color generation, and tree placement. The tests ensure that the utility functions perform as expected, providing accurate conversions and placements for visualizations.

## Code Structure

The main class in this file is `TestPlottingUtilities`, which inherits from `unittest.TestCase`. This class contains several test methods, each designed to test a specific function from the `cassiopeia.plotting.utilities` module. The `setUp` method initializes common test data used across multiple tests, such as a random state and a basic tree structure.

## Symbols

### `TestPlottingUtilities`
#### Description
This class contains unit tests for the utility functions in the `cassiopeia.plotting.utilities` module. It verifies the correctness of functions that handle coordinate transformations, color generation, and tree placement.

#### Methods

- **`setUp`**
  - **Description**: Initializes the test environment by setting up a random state, indel priors, and a basic tree structure. This setup is used by multiple test methods to ensure consistency.
  - **Inputs**: None
  - **Outputs**: None

- **`test_degrees_to_radians`**
  - **Description**: Tests the `degrees_to_radians` function to ensure it correctly converts degrees to radians.
  - **Inputs**: None
  - **Outputs**: None

- **`test_polar_to_cartesian`**
  - **Description**: Tests the `polar_to_cartesian` function to verify the conversion of polar coordinates to Cartesian coordinates.
  - **Inputs**: None
  - **Outputs**: None

- **`test_generate_random_color`**
  - **Description**: Tests the `generate_random_color` function to ensure it generates colors within specified RGB ranges.
  - **Inputs**: None
  - **Outputs**: None

- **`test_place_tree`**
  - **Description**: Tests the `place_tree` function to verify the correct placement of nodes and branches in a tree structure. It checks various configurations and orientations.
  - **Inputs**: None
  - **Outputs**: None

- **`test_place_colorstrip`**
  - **Description**: Tests the `place_colorstrip` function to ensure it correctly computes the coordinates for color strips used in tree annotations.
  - **Inputs**: None
  - **Outputs**: None

- **`test_generate_indel_colors_from_priors`**
  - **Description**: Tests the `get_indel_colors` function to verify that it assigns colors to indels based on prior probabilities.
  - **Inputs**: None
  - **Outputs**: None

- **`test_color_converters`**
  - **Description**: Tests the `hex_to_rgb` and `rgb_to_hex` functions to ensure accurate conversion between hex and RGB color formats.
  - **Inputs**: None
  - **Outputs**: None

- **`test_generate_random_indel_colors`**
  - **Description**: Tests the `get_random_indel_colors` function to verify that it assigns random colors to indels in a lineage profile.
  - **Inputs**: None
  - **Outputs**: None

## References

- **`cassiopeia.plotting.utilities`**: The module containing the utility functions being tested. Functions like `degrees_to_radians`, `polar_to_cartesian`, `generate_random_color`, `place_tree`, `place_colorstrip`, `get_indel_colors`, `hex_to_rgb`, and `rgb_to_hex` are directly referenced and tested.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `unittest` | Provides the framework for writing and running tests. |
| `networkx` | Used for creating and manipulating the tree structure. |
| `numpy` | Utilized for numerical operations and random state management. |
| `pandas` | Used for handling data structures like DataFrames. |
| `cassiopeia` | The main library being tested, specifically its plotting utilities. |

## Error Handling

The test methods use assertions to verify expected outcomes. If a test fails, it raises an assertion error, indicating a discrepancy between the expected and actual results.

## Logging

No explicit logging is implemented in this test suite. The `unittest` framework handles test results and outputs.

## TODOs

No TODOs or notes are present in the code.