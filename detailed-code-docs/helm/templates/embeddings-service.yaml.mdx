---
title: "embeddings-service.yaml"
---

## High-level description
This Helm template generates Kubernetes Service resources for embedding services. It iterates over a list of embedding services defined in the Helm values, creating a ClusterIP service for each one with appropriate labels and selectors.

## Table of contents
- Service definition loop
- Service metadata
- Service specification
- Port configuration
- Selector configuration

## Code Structure
The template uses a range loop to iterate over `.Values.embeddings`, creating a Service resource for each embedding service defined in the Helm values. It uses variables to store and manipulate service-specific information.

## Symbols

### Range Loop
#### Description
Iterates over the `.Values.embeddings` list, creating a Service resource for each embedding service.

#### Internal Logic
1. Extracts `port` and `name` from each service in the list
2. Generates a separator (`---`) between resources, except for the first one
3. Constructs `serviceName` and `selector` based on the service name

### Service Resource
#### Description
Defines a Kubernetes Service resource for each embedding service.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Values.embeddings | list | List of embedding services defined in Helm values |

#### Internal Logic
1. Sets the API version and kind for the Service resource
2. Configures metadata with the service name and labels
3. Specifies the service type as ClusterIP
4. Defines a single port configuration
5. Sets up the selector for pod discovery

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Kubernetes | Target platform for the generated resources |
| Helm | Templating engine used to generate the Kubernetes manifests |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| .Values.embeddings | list | N/A | List of embedding services to be created |

## Future Improvements
- Consider adding support for multiple ports per service if required
- Allow customization of the service type (e.g., NodePort, LoadBalancer) through Helm values
- Implement optional health check configurations for the services