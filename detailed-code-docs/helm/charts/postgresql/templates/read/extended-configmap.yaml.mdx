---
title: "extended-configmap.yaml"
---

## High-level description
This Kubernetes ConfigMap template is designed to create an extended configuration for PostgreSQL read replicas. It generates a ConfigMap resource with custom configuration data when specific conditions are met.

## Table of contents
- ConfigMap metadata
- ConfigMap data

## Code Structure
The template uses conditional logic to determine if the ConfigMap should be created and includes helper functions to generate names, labels, and render values.

## Symbols

### ConfigMap Resource
#### Description
Defines a Kubernetes ConfigMap resource for extended configuration of PostgreSQL read replicas.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Release.Namespace | String | Kubernetes namespace for the resource |
| .Values.commonLabels | Object | Common labels to be applied |
| .Values.commonAnnotations | Object | Common annotations to be applied |
| .Values.readReplicas.extendedConfiguration | String | Extended configuration for read replicas |

#### Internal Logic
1. Checks if the ConfigMap should be created using a helper function
2. Sets metadata including name, namespace, labels, and annotations
3. Defines data section with an `override.conf` key containing the extended configuration

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| common | Provides helper functions for labels, annotations, and value rendering |
| postgresql | Provides helper functions specific to PostgreSQL configuration |

## Future Improvements
- Consider adding validation for the extended configuration content
- Implement versioning for the ConfigMap to manage updates more effectively