---
title: "serviceaccount.yaml"
---

## High-level description
This YAML template defines a Kubernetes ServiceAccount for the Redis master node in a replication architecture. It's conditionally created based on specific configuration values and includes metadata such as labels and annotations.

## Table of contents
- ServiceAccount definition
- Metadata
  - Name
  - Namespace
  - Labels
  - Annotations

## Code Structure
The file consists of a single Kubernetes resource definition (ServiceAccount) with conditional creation and metadata configuration.

## Symbols

### ServiceAccount
#### Description
Defines a Kubernetes ServiceAccount for the Redis master node.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Values.master.serviceAccount.create | boolean | Determines if the ServiceAccount should be created |
| .Values.architecture | string | The Redis architecture type |
| .Values.sentinel.enabled | boolean | Indicates if Redis Sentinel is enabled |
| .Values.master.serviceAccount.automountServiceAccountToken | boolean | Controls automatic mounting of the ServiceAccount token |

#### Internal Logic
1. Checks if the ServiceAccount should be created based on configuration values
2. Sets the API version and kind for the ServiceAccount
3. Configures metadata including name, namespace, labels, and annotations

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| common | Provides helper templates for generating standard labels, merging values, and rendering templates |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| .Values.master.serviceAccount.create | boolean | - | Controls whether to create the ServiceAccount |
| .Values.architecture | string | - | Specifies the Redis architecture type |
| .Values.sentinel.enabled | boolean | - | Indicates if Redis Sentinel is enabled |
| .Values.master.serviceAccount.automountServiceAccountToken | boolean | - | Controls automatic mounting of the ServiceAccount token |
| .Values.commonLabels | map | - | Common labels to be applied to the resource |
| .Values.master.serviceAccount.annotations | map | - | Annotations specific to the master ServiceAccount |
| .Values.commonAnnotations | map | - | Common annotations to be applied to the resource |

## Future Improvements
- Consider adding support for custom naming of the ServiceAccount
- Implement conditional creation of the ServiceAccount based on additional parameters, such as Redis version or cluster size
- Add the ability to specify custom labels directly for the ServiceAccount, in addition to the common labels