---
title: "secret.yaml"
---

## High-level description
This Helm chart template generates a Kubernetes Secret for Redis authentication. It creates a secret containing the Redis password when authentication is enabled and no existing secret is specified.

## Table of contents
- Secret metadata
- Secret type
- Secret data

## Code Structure
The template uses conditional logic to determine whether to create the secret and includes several helper templates for generating metadata and labels.

## Symbols

### Secret Template
#### Description
This template defines a Kubernetes Secret resource for storing the Redis password.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Values.auth.enabled | boolean | Indicates if authentication is enabled |
| .Values.auth.existingSecret | string | Name of an existing secret to use (if any) |
| .Values.secretAnnotations | object | Custom annotations for the secret |
| .Values.commonAnnotations | object | Common annotations to apply |
| .Values.commonLabels | object | Common labels to apply |

#### Outputs
A Kubernetes Secret resource in YAML format.

#### Internal Logic
1. Checks if authentication is enabled and no existing secret is specified.
2. Generates metadata including name, namespace, labels, and annotations.
3. Sets the secret type to "Opaque".
4. Includes the Redis password as base64 encoded data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| common.names.fullname | Generates the full name for the secret |
| common.names.namespace | Provides the namespace for the secret |
| common.labels.standard | Generates standard labels |
| common.tplvalues.render | Renders template values |
| redis.password | Generates or retrieves the Redis password |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| auth.enabled | boolean | - | Enables Redis authentication |
| auth.existingSecret | string | - | Name of an existing secret to use |
| secretAnnotations | object | - | Custom annotations for the secret |
| commonAnnotations | object | - | Common annotations to apply |
| commonLabels | object | - | Common labels to apply |

## Future Improvements
- Consider adding support for multiple secrets or additional authentication methods.
- Implement rotation mechanisms for the Redis password.
- Add options for specifying custom keys in the secret data.