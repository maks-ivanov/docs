---
title: "service.yaml"
---

## High-level description
This YAML file defines a Kubernetes Service resource for Qdrant, a vector database. It sets up networking for Qdrant pods, allowing other services to communicate with Qdrant within the Kubernetes cluster or externally, depending on the service type.

## Table of contents
- Service metadata
- Service specification
- Port configuration
- Selector

## Code Structure
The YAML file uses Helm templating to dynamically generate the Kubernetes Service manifest. It references values from the Helm chart's `values.yaml` file and uses helper templates for consistent naming and labeling.

## Symbols

### Service Resource
#### Description
Defines a Kubernetes Service for Qdrant, which acts as a stable network endpoint for Qdrant pods.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Values.service | Object | Contains service-specific configuration values |
| .Values.service.type | String | Specifies the type of Kubernetes Service |
| .Values.service.loadBalancerIP | String | Optional IP address for LoadBalancer type services |
| .Values.service.ports | Array | List of port configurations for the service |
| .Values.service.additionalLabels | Object | Additional labels to apply to the service |
| .Values.service.annotations | Object | Annotations to apply to the service |

#### Internal Logic
1. Sets the service name using the `qdrant.fullname` helper template
2. Applies labels using the `qdrant.labels` helper template
3. Adds additional labels and annotations if specified
4. Configures the service type and optional LoadBalancer IP
5. Defines ports based on the provided configuration
6. Sets the selector to target Qdrant pods using the `qdrant.selectorLabels` helper template

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Helm | Used for templating and value injection |

### Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| service.type | String | "ClusterIP" | The type of Kubernetes Service |
| service.loadBalancerIP | String | None | Specific IP for LoadBalancer type services |
| service.ports | Array | N/A | List of port configurations |
| service.additionalLabels | Object | None | Additional labels for the service |
| service.annotations | Object | None | Annotations for the service |

## Future Improvements
- Consider adding support for `externalTrafficPolicy` and `sessionAffinity` configurations for more advanced service settings.
- Implement conditional logic to support different service types (e.g., NodePort) with their specific configurations.
- Add support for `externalIPs` if there's a need to expose the service on additional IP addresses.