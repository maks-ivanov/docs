---
title: "pdb.yaml"
---

## High-level description
This YAML file defines a Kubernetes PodDisruptionBudget (PDB) for the Qdrant application. It ensures that a specified number of pods remain available during voluntary disruptions, such as node drains or cluster upgrades.

## Table of contents
- PodDisruptionBudget definition
- Metadata
- Spec configuration
- Selector

## Code Structure
The file uses Helm templating to dynamically generate the PodDisruptionBudget based on values provided in the Helm chart.

## Symbols

### PodDisruptionBudget
#### Description
Defines a Kubernetes PodDisruptionBudget resource for the Qdrant application. It is only created if `.Values.podDisruptionBudget.enabled` is set to true.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Values.podDisruptionBudget.enabled | boolean | Determines whether to create the PodDisruptionBudget |
| .Values.podDisruptionBudget.maxUnavailable | string/integer | Maximum number of unavailable pods |
| .Values.podDisruptionBudget.minAvailable | string/integer | Minimum number of available pods |
| .Values.podDisruptionBudget.unhealthyPodEvictionPolicy | string | Policy for evicting unhealthy pods |

#### Internal Logic
1. Checks if PodDisruptionBudget is enabled
2. Sets the API version and kind
3. Defines metadata with name and labels
4. Configures the spec based on provided values
5. Sets the selector to match Qdrant pod labels

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Helm | Used for templating and value injection |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| podDisruptionBudget.enabled | boolean | N/A | Enables/disables PodDisruptionBudget creation |
| podDisruptionBudget.maxUnavailable | string/integer | N/A | Sets maximum unavailable pods |
| podDisruptionBudget.minAvailable | string/integer | N/A | Sets minimum available pods |
| podDisruptionBudget.unhealthyPodEvictionPolicy | string | N/A | Sets unhealthy pod eviction policy |

## Future Improvements
- Consider adding default values for maxUnavailable or minAvailable to ensure at least one is always set
- Implement validation to ensure that only one of maxUnavailable or minAvailable is set, as they are mutually exclusive
- Add comments explaining the purpose and impact of each configuration option