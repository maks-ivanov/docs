---
title: "Overview"
---

## High-level description
This directory contains the Helm chart for deploying Qdrant, a vector database, on Kubernetes. The chart includes templates for various Kubernetes resources, configuration options, and deployment strategies for Qdrant. It provides a flexible and customizable way to deploy Qdrant in different environments and scales.

## What does it do?
The Qdrant Helm chart automates the deployment and management of Qdrant on Kubernetes. It sets up the following:

1. Deploys Qdrant as a StatefulSet, allowing for stable network identities and persistent storage.
2. Creates Services for internal and external access to Qdrant.
3. Configures Ingress for external traffic routing.
4. Sets up persistent storage for data retention.
5. Manages configuration through ConfigMaps and Secrets.
6. Implements health checks and readiness probes.
7. Configures resource allocation and security contexts.
8. Provides options for cluster configuration and API key management.
9. Sets up monitoring and metrics collection.
10. Includes a test suite for verifying the deployment.

## Entry points
The main entry points for developers working with this Helm chart are:

1. `values.yaml`: The central configuration file where most customizations are made.
2. `templates/statefulset.yaml`: Defines the core Qdrant deployment as a StatefulSet.
3. `templates/configmap.yaml`: Contains the Qdrant configuration and initialization script.

The chart is organized conceptually around different Kubernetes resource types, with separate template files for each major resource (e.g., Service, Ingress, PodDisruptionBudget). The data flow typically starts from the StatefulSet, which references configurations from ConfigMaps and Secrets, and is exposed via Services and potentially Ingress.

## Key Files
1. `templates/configmap.yaml`: Defines the Qdrant configuration and initialization script. The script handles different scenarios like snapshot restoration and multi-pod setups.

2. `templates/ingress.yaml`: Configures external access to Qdrant, including routing rules and TLS settings.

3. `templates/pdb.yaml`: Implements a PodDisruptionBudget to ensure Qdrant availability during voluntary disruptions.

4. `templates/service-headless.yaml` and `templates/service.yaml`: Define Kubernetes Services for accessing Qdrant, with the headless service enabling direct pod communication.

5. `templates/servicemonitor.yaml`: Sets up monitoring for Qdrant using Prometheus Operator.

6. `templates/tests/`: Contains a test suite for verifying Qdrant functionality post-deployment.

## Dependencies
The chart relies on the following external dependencies:

1. Kubernetes (v1.24+): The underlying container orchestration platform.
2. Helm (v3+): The package manager used to deploy and manage the chart.
3. Qdrant Docker image: The chart uses the official Qdrant image, with the version specified in `values.yaml`.
4. PV provisioner: Required for persistent storage (provided by the infrastructure).

## Configuration
The chart is highly configurable through the `values.yaml` file. Key configuration options include:

1. `replicaCount`: Number of Qdrant replicas (default: 4).
2. `image`: Docker image settings, including repository, tag, and pull policy.
3. `service`: Kubernetes service configuration, including type and ports.
4. `ingress`: Settings for Ingress resource, if enabled.
5. `persistence`: Configuration for persistent storage.
6. `config`: Qdrant-specific configurations, including cluster settings.
7. `apiKey`: API key configuration for authentication.

Example configuration for enabling a distributed cluster:

```yaml
replicaCount: 3
config:
  cluster:
    enabled: true
```

For snapshot restoration (single-node setups only):

```yaml
config:
  snapshot_path: "/qdrant/snapshots"
  snapshots:
    - name: "snapshot-2023-04-01.snapshot"
persistence:
  existingClaim: "your-pvc-name"
```

The chart also supports configuring resource limits, security contexts, affinity rules, and more advanced Kubernetes features.

Users can refer to the [Qdrant Configuration File](https://github.com/qdrant/qdrant/blob/master/config/config.yaml) for detailed documentation on Qdrant-specific configuration options.