---
title: "compound_interest.py"
---

## High-level description

The target file is a Python script that uses the `marimo` library to create an interactive notebook for simulating compound interest over time. It allows users to adjust parameters such as initial investment, monthly investment, annual return, investment duration, and capital gains tax rate through UI sliders. The script then simulates the growth of the investment portfolio and visualizes the results using plots.

## Code Structure

The script is structured using the `marimo` library, which organizes the code into cells. Each cell is a function decorated with `@app.cell`, which allows for modular execution and interaction within the notebook. The main components include UI setup for input parameters, a simulation function for calculating investment growth, and a plotting function for visualizing the results.

## Symbols

### `app`
#### Description
`app` is an instance of `marimo.App`, which is used to create and manage the interactive notebook environment. It organizes the code into executable cells.

### `Portfolio`
#### Description
The `Portfolio` class models an investment portfolio, calculating its value over time based on monthly contributions and an annual return rate.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | float | Initial value of the portfolio. |
| annual_return | float | Annual return rate of the portfolio. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| simulate_month | float | Simulates the portfolio value after a month with additional investment. |
| total_return | float | Calculates the total return over a given number of months. |

#### Internal Logic
- **Initialization**: Sets the initial value and calculates the monthly return from the annual return.
- **simulate_month**: Updates the portfolio value by adding the additional investment and applying the monthly return.
- **total_return**: Computes the compounded return over a specified number of months.

### `simulate`
#### Description
The `simulate` function calculates the growth of the investment portfolio over a specified number of years, considering monthly investments and capital gains tax.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| annual_return | float | Annual return rate. |
| capital_gains_tax_rate | float | Capital gains tax rate. |
| initial_investment | float | Initial investment amount. |
| mo | module | Marimo module for UI and markdown rendering. |
| monthly_investment | float | Monthly investment amount. |
| plt | module | Matplotlib module for plotting. |
| years | int | Number of years for the investment. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Portfolio | class | The `Portfolio` class used for simulation. |
| ax | object | Matplotlib axis object for the plot. |
| investment_principals | list | List of cumulative investment principals over time. |
| portfolio | object | Instance of the `Portfolio` class. |
| values | list | List of portfolio values over time. |
| values_less_taxes | list | List of portfolio values after accounting for capital gains tax. |

#### Internal Logic
- Initializes a `Portfolio` instance with the initial investment and annual return.
- Simulates the portfolio growth month by month, updating values, investment principals, and values after taxes.
- Plots the results using Matplotlib, showing the portfolio value, value after taxes, and total contributions.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| marimo | Used for creating interactive notebook cells and UI components. |
| matplotlib.pyplot | Used for plotting the investment growth results. |

## Error Handling

The script does not explicitly handle errors beyond the basic functionality provided by the `marimo` and `matplotlib` libraries. It assumes valid input ranges for the sliders and does not include additional validation or exception handling.

## Logging

The script does not implement any logging mechanisms. It primarily focuses on interactive UI and visualization.

## API/Interface Reference

The script does not expose an API but provides an interactive interface through the `marimo` library, allowing users to adjust investment parameters and visualize the results within a notebook environment.

## TODOs

There are no TODOs or notes left in the code.