---
title: "main.tsx"
---

## High-level description

The `main.tsx` file serves as the main entry point for the Marimo application. It initializes the application by setting up necessary configurations, applying themes, and rendering the main application component (`MarimoApp`) within a React context. It also includes error handling and performance reporting mechanisms.

## Code Structure

The main symbols in the code are interconnected as follows:
- **ReactDOM**: Used to render the application into the DOM.
- **ThemeProvider**: Wraps the application to provide theming capabilities.
- **ErrorBoundary**: Catches and handles errors during rendering.
- **MarimoApp**: The main application component that is rendered.
- **Provider (from Jotai)**: Provides a global state management context.
- **Utility Functions**: Various utility functions are called to set up the environment, such as `maybeRegisterVSCodeBindings`, `initializePlugins`, and `cleanupAuthQueryParams`.

## References

- **ErrorBoundary**: Used to handle errors during the rendering process.
- **MarimoApp**: The main application component that is rendered.
- **ThemeProvider**: Provides theming capabilities to the application.
- **reportVitals**: Reports web vitals for performance monitoring.
- **Jotai Provider**: Manages global state for the application.

## Symbols

### `maybeRegisterVSCodeBindings`
#### Description
Registers VS Code specific keyboard and context menu bindings if the application is running in a VS Code environment.

### `initializePlugins`
#### Description
Initializes various UI and layout plugins used within the application.

### `cleanupAuthQueryParams`
#### Description
Removes authentication-related query parameters from the URL to clean up the address bar.

### `isStaticNotebook`
#### Description
Determines if the application is running in a static notebook mode, which affects how resources are loaded.

### `patchFetch`
#### Description
Overrides the global `fetch` function to resolve virtual files when the application is in static mode.

### `patchVegaLoader`
#### Description
Modifies the Vega loader to handle virtual files in static mode.

### `reportVitals`
#### Description
Reports web vitals such as CLS, FID, and LCP for performance monitoring.

## Side Effects

- **Global State Modifications**: The `Provider` from Jotai sets up a global state context.
- **DOM Manipulation**: The `ThemeProvider` modifies the document's body class to apply themes.
- **Fetch Override**: In static mode, the global `fetch` function is overridden to handle virtual files.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `react-dom/client` | Used for rendering the React application into the DOM. |
| `jotai` | Provides state management capabilities. |
| `web-vitals` | Used for measuring and reporting web performance metrics. |

## Error Handling

The application uses an `ErrorBoundary` to catch and handle errors during the rendering process. If an error occurs, it renders a fallback UI that informs the user and provides a way to retry.

## Logging

The `reportVitals` function logs performance metrics using a `Logger` utility, which helps in monitoring the application's performance.

## TODOs

No TODOs are present in the code.