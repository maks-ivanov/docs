---
title: "numbers.ts"
---

## High-level description

The target file, `numbers.ts`, provides utility functions for formatting numbers in a user-friendly manner. It includes functions to format numbers as pretty strings with commas and decimal places, and to format numbers in scientific notation when appropriate.

## Code Structure

The file contains two main functions: `prettyNumber` and `prettyScientificNumber`. These functions are designed to handle different types of input values and format them into strings that are easier to read or interpret, especially in the context of displaying data in a user interface.

## Symbols

### `prettyNumber`
#### Description
The `prettyNumber` function formats a given value into a human-readable string. It handles various input types, including numbers, strings, booleans, and null/undefined values, converting them into a string with commas as thousand separators and up to two decimal places.

#### Inputs
| Name  | Type                        | Description                                      |
|:------|:----------------------------|:-------------------------------------------------|
| value | number \| string \| undefined \| null \| boolean | The value to be formatted into a pretty string. |

#### Outputs
| Name   | Type   | Description                                      |
|:-------|:-------|:-------------------------------------------------|
| result | string | The formatted string representation of the value.|

#### Internal Logic
- If the value is `undefined` or `null`, it returns an empty string.
- If the value is a string, it returns the string as is.
- If the value is a boolean, it converts it to a string ("true" or "false").
- If the value is a number, it formats the number using `toLocaleString` with no minimum fraction digits and a maximum of two fraction digits.

### `prettyScientificNumber`
#### Description
The `prettyScientificNumber` function formats a number into a string, using scientific notation for very small or very large numbers. It handles special cases like zero, NaN, and infinity.

#### Inputs
| Name  | Type   | Description                        |
|:------|:-------|:-----------------------------------|
| value | number | The number to be formatted.        |

#### Outputs
| Name   | Type   | Description                                      |
|:-------|:-------|:-------------------------------------------------|
| result | string | The formatted string representation of the number.|

#### Internal Logic
- Handles special cases: returns "0" for zero, "NaN" for NaN, and "Infinity" or "-Infinity" for positive or negative infinity.
- Determines if the number should be in scientific notation based on its absolute value.
- Uses `Intl.NumberFormat` to format the number with one decimal place in scientific notation if the absolute value is less than 0.01 or greater than or equal to 1,000,000.
- Otherwise, formats the number with up to two decimal places.

## References

- The `prettyScientificNumber` function is referenced in several related files, such as `column_formatting.test.ts`, `feature.ts`, `range-slider.tsx`, and `slider.tsx`, indicating its use in formatting numbers for display in various UI components.
- The `prettyNumber` function is also referenced in multiple files, including `column-summary.tsx`, `datasources-panel.tsx`, and `StatPlugin.tsx`, showing its role in formatting numbers for data presentation.

## Dependencies

The code uses the `Intl.NumberFormat` API to format numbers according to locale-specific conventions, which is a built-in JavaScript feature and does not require external libraries.