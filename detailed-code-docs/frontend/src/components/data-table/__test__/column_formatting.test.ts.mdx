---
title: "column_formatting.test.ts"
---

## High-level description

The target file contains unit tests for the `applyFormat` function, which is responsible for formatting data values based on specified formats and data types. The tests cover various data types, including dates, numbers, strings, and booleans, ensuring that the `applyFormat` function correctly formats these values according to the given format options.

## Code Structure

The main symbol in the target file is the `applyFormat` function, which is imported from the `column-formatting/feature` module. This function is tested using the `vitest` testing framework. The tests are organized into different `describe` blocks, each focusing on a specific data type or scenario, such as date formatting, number formatting, string formatting, boolean formatting, and handling of unknown data types.

## References

- `applyFormat`: This function is the primary focus of the tests and is imported from the `column-formatting/feature` module.
- `prettyScientificNumber`: A utility function used within the `applyFormat` function for formatting numbers in scientific notation, imported from `@/utils/numbers`.

## Symbols

### `applyFormat`
#### Description
The `applyFormat` function formats a given value based on the specified format and data type. It handles various data types, including dates, numbers, strings, and booleans, and applies the appropriate formatting rules for each type.

#### Inputs
| Name     | Type          | Description                        |
|:---------|:--------------|:-----------------------------------|
| value    | `unknown`     | The value to be formatted.         |
| format   | `FormatOption`| The format to apply to the value.  |
| dataType | `DataType`    | The data type of the value.        |

#### Outputs
| Name   | Type   | Description                        |
|:-------|:-------|:-----------------------------------|
| result | `any`  | The formatted value as a string.   |

#### Internal Logic
- **Null or Undefined Handling**: Returns an empty string if the value is `null`, `undefined`, or an empty string.
- **Date Formatting**: Uses `Intl.DateTimeFormat` to format dates based on the specified format (e.g., "Date", "Datetime", "Time").
- **Number Formatting**: Uses `Intl.NumberFormat` and utility functions like `prettyNumber` and `prettyScientificNumber` to format numbers based on the specified format (e.g., "Auto", "Percent", "Scientific", "Integer").
- **String Formatting**: Applies string transformations such as "Uppercase", "Lowercase", "Capitalize", and "Title".
- **Boolean Formatting**: Converts boolean values to strings like "Yes/No" or "On/Off".
- **Unknown Data Types**: Returns the original value if the data type is unknown or undefined.

## Dependencies

| Dependency | Purpose                                      |
|:-----------|:---------------------------------------------|
| `vitest`   | Used for writing and running unit tests.     |
| `@/utils/numbers` | Provides utility functions for number formatting. |

## Error Handling

The `applyFormat` function includes a `logNever` call for handling unexpected data types, which is a utility function likely used to log or handle cases that should never occur.

## Logging

The `logNever` function is used within the `applyFormat` function to handle unexpected data types, although the specifics of logging are not detailed in the provided code.

## TODOs

No TODOs or notes are present in the code.