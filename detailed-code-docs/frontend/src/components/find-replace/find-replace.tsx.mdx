---
title: "find-replace.tsx"
---

## High-level description

The `find-replace.tsx` file defines a React component named `FindReplace` that provides a user interface for finding and replacing text within a code editor. It integrates with the CodeMirror editor to perform search and replace operations, allowing users to specify options such as case sensitivity, whole word matching, and regular expression usage. The component also supports keyboard shortcuts and displays the number of matches found.

## Code Structure

The main symbol in this file is the `FindReplace` React component. It interacts with several other components and hooks, such as `Input`, `Button`, `Toggle`, `Tooltip`, and `useHotkey`, to build the user interface and handle user interactions. The component uses state management through Jotai atoms to track the find and replace state and integrates with CodeMirror for text operations.

## Symbols

### `FindReplace`
#### Description
The `FindReplace` component provides a user interface for finding and replacing text in a CodeMirror editor. It allows users to input search and replace terms, toggle search options, and navigate through matches. The component manages its state using Jotai atoms and updates the editor's state accordingly.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | N/A  | The component does not take any direct inputs as it is a self-contained UI component. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSX.Element | React Element | The rendered UI for the find and replace functionality. |

#### Internal Logic
- **State Management**: Uses Jotai atoms to manage the state of the find and replace panel, including whether it is open, the search and replace text, and search options like case sensitivity and regex.
- **Event Handling**: Utilizes the `useHotkey` hook to register keyboard shortcuts for opening the find and replace panel.
- **UI Rendering**: Renders input fields for find and replace text, buttons for navigation and replacement actions, and toggles for search options. It also displays tooltips for user guidance.
- **Effect Hooks**: Uses `useEffect` to focus and select the find input when the panel opens and to update matches when search parameters change.

## Side Effects
- **Global State Modification**: Modifies the global search query state using functions like `setGlobalSearchQuery` and `clearGlobalSearchQuery`.
- **Editor Interaction**: Directly interacts with the CodeMirror editor to perform search and replace operations.

## References
- **Jotai Atoms**: `findReplaceAtom`, `hotkeysAtom` for state management.
- **CodeMirror Functions**: `getMatches`, `findNext`, `findPrev`, `replaceAll`, `replaceNext` for text operations.
- **UI Components**: `Input`, `Button`, `Toggle`, `Tooltip` for building the UI.
- **Hooks**: `useHotkey` for handling keyboard shortcuts.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `jotai` | State management using atoms. |
| `@codemirror/view` | Integration with CodeMirror editor views. |
| `lucide-react` | Icons used in the UI. |
| `@react-aria/focus` | Focus management for accessibility. |

## Error Handling
The component does not explicitly handle errors beyond basic UI interactions. It assumes that the search and replace operations will succeed if the input is valid.

## Logging
The component does not implement any logging mechanisms.

## API/Interface Reference
The component does not expose any API endpoints or public interfaces. It is intended to be used as part of a larger application where it is integrated into the UI.

## TODOs
There are no TODOs or notes left in the code.