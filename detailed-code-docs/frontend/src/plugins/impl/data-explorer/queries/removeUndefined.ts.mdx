---
title: "removeUndefined.ts"
---

## High-level description

The target file defines a utility function `removeUndefined` that is used to clean objects by removing properties with `undefined` values. This function is particularly useful in scenarios where objects are dynamically constructed and may contain optional properties that are not always set.

## Code Structure

The main symbol in the code is the `removeUndefined` function. This function is a generic utility that operates on objects of any type, iterating over their properties and constructing a new object that excludes any properties with `undefined` values.

## Symbols

### `removeUndefined`
#### Description
The `removeUndefined` function is designed to take an object as input and return a new object that contains only the properties of the original object that have defined values. This is useful for cleaning up objects before they are used in contexts where `undefined` values might cause issues, such as serialization or API requests.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| obj  | T    | An object of any type `T` from which properties with `undefined` values will be removed. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ret  | T    | A new object of type `T` with all properties that had `undefined` values removed. |

#### Internal Logic
1. The function initializes an empty object `ret` of the same type as the input object.
2. It iterates over each key in the input object `obj`.
3. For each key, it checks if the value is not `undefined`.
4. If the value is defined, it assigns the key-value pair to the `ret` object.
5. Finally, it returns the `ret` object.

## References

The `removeUndefined` function is referenced in other parts of the codebase, particularly in the `encoding.ts` and `reducer.ts` files. In these files, it is used to clean up objects before they are processed further, ensuring that only defined properties are included in the resulting objects.

## Dependencies

There are no external dependencies in the target file. The function is self-contained and does not rely on any external libraries or modules.

## Error Handling

The function does not include explicit error handling. It assumes that the input is a valid object and that the operation of checking for `undefined` values will not throw errors.

## Usage in Related Files

- In `encoding.ts`, the `removeUndefined` function is used in the `fromFieldQuery` function to clean up the field definition object before returning it. This ensures that only relevant properties are included in the final object.
- In `reducer.ts`, the function is used in the `setEncoding` action to merge and clean the encoding object, ensuring that the state only contains defined properties.

The use of `removeUndefined` in these contexts highlights its utility in maintaining clean and predictable data structures throughout the application.