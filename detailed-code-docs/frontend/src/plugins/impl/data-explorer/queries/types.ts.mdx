---
title: "types.ts"
---

## High-level description

The target file `types.ts` defines TypeScript interfaces and types that are used to represent the structure and components of data visualization queries and results within a data exploration plugin. These types facilitate the creation, manipulation, and rendering of data visualizations by defining the necessary data structures for plots, queries, and chart results.

## Code Structure

The main symbols in the code are interconnected as follows:
- `PlotFieldInfo` and `ResultPlot` are used to define the structure of individual plots.
- `Result` encapsulates a collection of plots and the query that generated them.
- `ResultingCharts` aggregates different types of results, including main results and alternative encodings.
- `QueryCreator` is responsible for creating queries based on a specified type and limit.
- `TopLevelFacetedUnitSpec` is a type alias that extends a Vega-Lite specification with named data.

## Symbols

### `PlotFieldInfo`
#### Description
Represents information about a field used in a plot, including its definition and the encoding channel it is associated with.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fieldDef | FieldDefinition | The definition of the field. |
| channel | EncodingChannel | The encoding channel for the field. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | N/A |

### `ResultPlot`
#### Description
Defines a plot result, which includes a list of field information and a visualization specification.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fieldInfos | PlotFieldInfo[] | Array of field information used in the plot. |
| spec | VisualizationSpec | The specification for rendering the plot. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | N/A |

### `Result`
#### Description
Represents the outcome of a query, including the plots generated, the query itself, and a limit on the number of results.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| plots | ResultPlot[] \| null | Array of plots or null if no plots are generated. |
| query | Query | The query that generated the result. |
| limit | number | The maximum number of results. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | N/A |

### `TopLevelFacetedUnitSpec`
#### Description
A type alias that extends a Vega-Lite specification with named data, used for defining the structure of a visualization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | NamedData | The named data to be used in the specification. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | N/A |

### `ResultingCharts`
#### Description
Aggregates different types of chart results, including main results, histograms, and alternative encodings.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| main | Result | The main result of the query. |
| histograms | Result | Histogram results. |
| addCategoricalField | Result | Results for adding a categorical field. |
| addQuantitativeField | Result | Results for adding a quantitative field. |
| addTemporalField | Result | Results for adding a temporal field. |
| alternativeEncodings | Result | Results for alternative encodings. |
| summaries | Result | Summary results. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | N/A |

### `QueryCreator`
#### Description
Defines a structure for creating queries, specifying the type of result and a limit on the number of results.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| type | keyof ResultingCharts | The type of result to create. |
| limit | number | The maximum number of results. |
| createQuery | (query: Query) =&gt; Query | A function to create a query. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | N/A |

## References

- `FieldDefinition` and `EncodingChannel` are imported from `../encoding`, which defines the structure and types for field encodings.
- `Query` is imported from `compassql`, which is a library for generating and manipulating data visualization queries.
- `VisualizationSpec` is imported from `react-vega`, which is used for rendering Vega and Vega-Lite visualizations.
- `NamedData`, `TopLevel`, and `FacetedUnitSpec` are imported from `vega-lite`, which is a high-level grammar for creating visualizations.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `compassql` | Used for query generation and manipulation. |
| `react-vega` | Used for rendering Vega and Vega-Lite visualizations. |
| `vega-lite` | Provides the specification format for visualizations. |

## Error Handling
The code does not explicitly handle errors within the types defined, as it primarily focuses on type definitions rather than executable logic.

## Logging
There is no logging implemented in this file, as it is focused on type definitions.

## TODOs
There are no TODOs or notes left in the code.