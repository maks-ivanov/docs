---
title: "column-summary.tsx"
---

## High-level description

The `column-summary.tsx` file defines a React component named `ColumnSummary` that displays a summary of columns from a given schema. It provides a user interface to view and interact with column data, including selecting a column to view its statistics and toggling the display of additional columns.

## Code Structure

The main symbol in this file is the `ColumnSummary` component, which utilizes several imported components and utilities to render its UI and manage state. It interacts with a schema object to retrieve column names and statistics, and it uses state hooks to manage user interactions such as selecting a column and toggling the display of more columns.

## Symbols

### `ColumnSummary`
#### Description
The `ColumnSummary` component is a React functional component that displays a summary of columns from a given schema. It allows users to select a column to view its statistics and provides a toggle to show more or fewer columns.

#### Inputs
| Name   | Type   | Description          |
|:-------|:-------|:---------------------|
| schema | Schema | The schema object containing column data and methods to retrieve field names and statistics. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSX  | JSX.Element | The rendered UI component displaying column summaries and statistics. |

#### Internal Logic
- **State Management**: Uses `useState` to manage `selectedField` (the currently selected column) and `showMore` (whether to show more columns).
- **Field Retrieval**: Retrieves field names from the schema and calculates statistics for the selected field.
- **UI Rendering**: 
  - Displays an icon and the number of fields.
  - Renders a grid or dropdown of fields, depending on the screen size.
  - Allows users to select a field to view its statistics.
  - Provides a button to toggle the display of additional columns.
  - Displays statistics for the selected field using a predefined set of keys (`STAT_KEYS`).

### `formatStat`
#### Description
Formats a given statistic value for display, handling numbers, strings, and dates appropriately.

#### Inputs
| Name  | Type   | Description                |
|:------|:-------|:---------------------------|
| value | unknown | The statistic value to format. |

#### Outputs
| Name   | Type   | Description                  |
|:-------|:-------|:-----------------------------|
| string | string | The formatted statistic value as a string. |

#### Internal Logic
- **Number Formatting**: Formats numbers to two decimal places.
- **String Handling**: Returns strings as-is.
- **Date Formatting**: Formats dates to a "day, month, year" format.
- **Fallback**: Converts other types to strings.

## References

- **`Schema`**: The `Schema` type is imported from `compassql` and is used to interact with the schema data, providing methods like `fieldNames`, `stats`, `cardinality`, `primitiveType`, and `vlType`.
- **`Button`**: A UI component used to render buttons, imported from `@/components/ui/button`.
- **`Select` and related components**: Used to render a dropdown for selecting columns, imported from `@/components/ui/select`.
- **`cn`**: A utility function for merging class names, imported from `@/utils/cn`.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `lucide-react` | Provides the `BarChartBigIcon` used in the UI. |
| `compassql` | Provides the `Schema` type and related methods for schema interaction. |
| `@/components/ui/button` | Provides the `Button` component for rendering buttons. |
| `@/components/ui/select` | Provides components for rendering a dropdown menu. |
| `@/utils/cn` | Utility for merging class names. |

## Error Handling

The component does not explicitly handle errors within its logic. It assumes that the schema and its methods will function correctly. Any errors would likely need to be handled at a higher level in the application.

## Logging

There is no logging implemented in this component.

## TODOs

There are no TODOs or notes left in the code.