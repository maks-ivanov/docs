---
title: "python.ts"
---

## High-level description

The target file, `python.ts`, defines a `PythonLanguageAdapter` class that integrates Python language support into a CodeMirror-based editor. It customizes the Python language features, such as syntax folding and autocompletion, to enhance the editing experience. The file also includes a function to provide a customized language support extension for Python, allowing for additional syntax node folding.

## Code Structure

The main symbol in this file is the `PythonLanguageAdapter` class, which implements the `LanguageAdapter` interface. This class interacts with various CodeMirror extensions and configurations to provide Python language support. The `customPythonLanguageSupport` function is another key symbol that provides a customized language support extension for Python.

## Symbols

### `PythonLanguageAdapter`
#### Description
The `PythonLanguageAdapter` class is a language adapter for Python, implementing the `LanguageAdapter` interface. It provides methods to transform code, check support for Python code, and retrieve language-specific extensions for CodeMirror.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| code | string | The Python code to be transformed or checked. |
| completionConfig | CompletionConfig | Configuration for autocompletion behavior. |
| _hotkeys | HotkeyProvider | Provides hotkey configurations. |
| placeholderType | PlaceholderType | Type of placeholder to use in the editor. |
| cellMovementCallbacks | MovementCallbacks | Callbacks for cell movement actions. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| transformIn | [string, number] | Transformed code and an offset. |
| transformOut | [string, number] | Transformed code and an offset. |
| isSupported | boolean | Indicates if the code is supported. |
| getExtension | Extension[] | Array of CodeMirror extensions for Python. |

#### Internal Logic
- **transformIn/transformOut**: These methods currently return the input code unchanged with an offset of 0, indicating no transformation is applied.
- **isSupported**: Always returns `true`, indicating that all Python code is supported.
- **getExtension**: Constructs an array of CodeMirror extensions based on the provided configuration, including autocompletion settings and placeholder behavior.

### `customPythonLanguageSupport`
#### Description
This function provides a customized `LanguageSupport` for Python, allowing additional syntax nodes to be folded in the editor.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| customPythonLanguageSupport | LanguageSupport | Customized language support for Python. |

#### Internal Logic
- Configures the Python language to support folding of additional syntax nodes like `ParenthesizedExpression` and `ArgList`.
- Returns a `LanguageSupport` instance with the customized Python language and autocompletion sources.

## References

- **LanguageAdapter**: An interface that `PythonLanguageAdapter` implements, defining methods for code transformation and extension retrieval.
- **CompletionConfig**: Used to configure autocompletion behavior.
- **HotkeyProvider**: Provides hotkey configurations for the editor.
- **MovementCallbacks**: Provides callbacks for cell movement actions in the editor.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `@codemirror/state` | Provides the `Extension` and `Prec` used for configuring CodeMirror extensions. |
| `@codemirror/lang-python` | Provides Python language support and completion sources. |
| `@codemirror/language` | Provides language support utilities like `foldNodeProp` and `foldInside`. |
| `@codemirror/autocomplete` | Provides autocompletion functionality. |

## Error Handling

The code does not implement specific error handling mechanisms beyond basic exception raising.

## Logging

The code does not implement any logging mechanisms.

## TODOs

There are no TODOs or notes left in the code.