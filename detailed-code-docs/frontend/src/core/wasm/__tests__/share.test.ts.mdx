---
title: "share.test.ts"
---

## High-level description
The target file contains unit tests for the `createShareableLink` function, which is designed to generate a shareable URL. This URL can optionally include a compressed version of a provided code snippet in its hash segment. The tests ensure that the function behaves correctly under various input scenarios, such as when no code is provided or when a custom base URL is specified.

## Code Structure
The main symbol in the code is the `createShareableLink` function, which is imported from another module. The tests in this file use the `vitest` testing framework to verify the behavior of this function. The `compressToEncodedURIComponent` function from the `lz-string` library is used to compress code snippets before they are included in the URL.

## References
- `createShareableLink`: This function is imported from the `share.ts` file and is the primary focus of the tests.
- `compressToEncodedURIComponent`: This function from the `lz-string` library is used to compress code snippets.

## Symbols

### `describe`
#### Description
The `describe` function is used to group related tests together. In this file, it groups tests for the `createShareableLink` function.

### `it`
#### Description
The `it` function defines individual test cases within the `describe` block. Each test case checks a specific behavior of the `createShareableLink` function.

### `createShareableLink`
#### Description
The `createShareableLink` function generates a URL that includes a compressed code snippet in its hash segment if a code is provided. It defaults to using "https://marimo.app" as the base URL unless a different base URL is specified.

#### Inputs
| Name   | Type   | Description                                      |
|:-------|:-------|:-------------------------------------------------|
| code   | string | The code snippet to be compressed and included in the URL hash. |
| baseUrl| string | The base URL to be used for the generated link. Defaults to "https://marimo.app". |

#### Outputs
| Name   | Type   | Description                                      |
|:-------|:-------|:-------------------------------------------------|
| result | string | The generated URL with the optional compressed code in the hash. |

#### Internal Logic
1. Extracts `code` and `baseUrl` from the input options, defaulting `baseUrl` to "https://marimo.app".
2. Creates a new URL object using the `baseUrl`.
3. If `code` is provided, compresses it using `compressToEncodedURIComponent` and appends it to the URL's hash.
4. Returns the complete URL as a string.

## Dependencies
| Dependency       | Purpose                                           |
|:-----------------|:--------------------------------------------------|
| `vitest`         | Provides the testing framework for writing and running tests. |
| `lz-string`      | Used to compress code snippets for inclusion in the URL hash. |

## Error Handling
The tests do not explicitly handle errors, as they are designed to verify the expected output of the `createShareableLink` function under normal conditions. Any unexpected behavior would result in a test failure.

## Logging
There is no logging implemented in this test file.

## TODOs
There are no TODOs or notes left in the code.