---
title: "Overview"
---

## High-level description

The directory `frontend/src/core/wasm/__tests__` contains unit tests for various components related to web application functionality, specifically focusing on URL manipulation, shareable link generation, and file storage management. The tests are designed to ensure that these components behave as expected under different scenarios. The main components tested include the `PyodideRouter` class, the `createShareableLink` function, and different implementations of the `FileStore` interface.

## What does it do?

The tests in this directory verify the functionality of several key components:

1. **URL Manipulation with `PyodideRouter`:** The tests ensure that the `PyodideRouter` class can correctly manage URL parameters and hash fragments. This includes extracting filenames and code snippets from URLs and modifying these components as needed. The tests simulate different URL scenarios to confirm that the router behaves correctly.

2. **Shareable Link Generation with `createShareableLink`:** The tests for the `createShareableLink` function verify that it can generate a URL that includes a compressed code snippet in its hash segment. This is useful for creating links that can be easily shared and that contain all necessary information to reproduce a specific state or configuration.

3. **File Storage Management with `FileStore` Implementations:** The tests cover different implementations of the `FileStore` interface, which are responsible for saving and retrieving file contents. The `localStorageFileStore` uses the browser's local storage, the `domElementFileStore` interacts with DOM elements, and the `CompositeFileStore` aggregates multiple stores to manage file operations across them.

## Entry points

The directory contains multiple test files, each focusing on a specific component:

- **`router.test.ts`:** Tests the `PyodideRouter` class for URL manipulation.
- **`share.test.ts`:** Tests the `createShareableLink` function for generating shareable URLs.
- **`store.test.ts`:** Tests various `FileStore` implementations for file storage management.

Each test file is organized into test suites using the `describe` function, with individual test cases defined using the `test` or `it` functions. The tests use the `vitest` framework for assertions and mocking.

## Dependencies

The tests in this directory rely on the following external libraries:

- **`vitest`:** A testing framework used to define and run unit tests. It provides utilities such as `describe`, `test`, `expect`, and `vi` for mocking and assertions.
- **`lz-string`:** Used in the `share.test.ts` file to compress code snippets for inclusion in URL hashes. This library is chosen for its ability to efficiently compress strings into a format suitable for URLs.