---
title: "router.ts"
---

## High-level description

The `URLPyodideRouter` class in the `router.ts` file is designed to manage URL parameters and hash values related to filenames and code snippets in a web application. It provides methods to get and set these values, allowing the application to dynamically update and retrieve information from the URL, which is particularly useful for applications that need to maintain state or shareable links.

## Code Structure

The `URLPyodideRouter` class is the main symbol in this file. It provides methods to interact with URL parameters and hash values. The class is instantiated as `PyodideRouter`, which is exported for use in other parts of the application. The methods within the class are interconnected, as they all operate on the URL to get or set specific parameters.

## Symbols

### `URLPyodideRouter`
#### Description
The `URLPyodideRouter` class provides methods to manipulate URL parameters and hash values, specifically for handling filenames and code snippets. It allows setting and retrieving these values, which can be used to maintain application state or create shareable links.

#### Inputs
- `filename`: A string representing the filename to be set in the URL.
- `code`: A string representing the code snippet to be set in the URL hash.

#### Outputs
- Returns a string or null when retrieving filename or code from the URL.

#### Internal Logic
- **`getFilename`**: Retrieves the `filename` parameter from the URL's search parameters.
- **`setFilename`**: Sets the `filename` parameter in the URL's search parameters and updates the browser history.
- **`getCodeFromSearchParam`**: Retrieves the `code` parameter from the URL's search parameters.
- **`getCodeFromHash`**: Retrieves the code from the URL's hash if it starts with `#code/`.
- **`setCodeForHash`**: Sets the code in the URL's hash with the prefix `#code/`.
- **`setSearchParam`**: A private method to set a search parameter in the URL and update the browser history.
- **`getSearchParam`**: A private method to retrieve a search parameter from the URL.

## References

- The `PyodideRouter` instance is used in other parts of the application, such as in `htmlUtils.ts` and `bridge.ts`, to manage URL-based state.
- The `router.test.ts` file contains tests for the `URLPyodideRouter` class, ensuring its methods work as expected.

## Dependencies

The code does not explicitly import external libraries, but it relies on the browser's `window` object and URL manipulation capabilities.

## Error Handling

The code does not include explicit error handling mechanisms. It assumes that the URL and its parameters are well-formed and accessible.

## Logging

No logging mechanisms are implemented in this code.

## API/Interface Reference

The `URLPyodideRouter` class does not expose an API in the traditional sense but provides a set of methods that can be used by other parts of the application to interact with the URL.

## TODOs

There are no TODOs or notes left in the code.