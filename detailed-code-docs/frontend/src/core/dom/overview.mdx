---
title: "Overview"
---

## High-level description

The `frontend/src/core/dom` directory is a crucial part of a web application, focusing on HTML parsing, manipulation, and custom web component management. It includes utilities for handling HTML elements, defining custom elements, managing events, and synchronizing UI components. The directory also contains unit tests to ensure the reliability of these functionalities. Key components include utilities for HTML parsing (`htmlUtils.ts`), custom element definition (`defineCustomElement.ts`), event management (`events.ts`), and UI element synchronization (`ui-element.ts` and `uiregistry.ts`). Additionally, it provides CSS styling for custom elements and functions for generating document outlines (`outline.ts`).

## What does it do?

The directory implements several workflows and processes:

1. **HTML Parsing and Manipulation**: Functions in `htmlUtils.ts` parse and serialize JSON data from HTML attributes, manage initial values of UI elements, and retrieve filenames from the DOM. This is essential for applications that dynamically interact with HTML content, especially in environments involving WebAssembly (WASM).

2. **Custom Element Management**: The `defineCustomElement.ts` file provides a utility to safely register custom web components, ensuring they are only defined if supported by the browser and not already registered. This prevents errors and redundant definitions.

3. **Event Management**: The `events.ts` file defines custom events for communication between UI elements and the application. These events facilitate interaction and synchronization, particularly within a UI framework named Marimo.

4. **UI Element Synchronization**: The `ui-element.ts` and `uiregistry.ts` files manage the state and lifecycle of UI elements. They synchronize the state of child elements across instances and with a backend kernel, using custom events and a registry to manage updates.

5. **Document Outline Generation**: The `outline.ts` file provides functions to parse HTML content and generate an outline structure based on headings. It includes utilities to manipulate and query these outlines, such as merging outlines and determining collapsibility.

6. **Styling**: The `ui-element.css` file ensures that custom elements like `marimo-ui-element` are displayed as part of the normal document flow, using the `display: contents` property.

## Entry points

The main files in this directory are:

- **`htmlUtils.ts`**: Provides utility functions for HTML parsing and manipulation.
- **`defineCustomElement.ts`**: Contains the function to safely define custom web components.
- **`events.ts`**: Defines custom events for UI element communication.
- **`ui-element.ts`**: Defines the `UIElement` custom web component and its synchronization logic.
- **`uiregistry.ts`**: Manages the registration and synchronization of UI elements.
- **`outline.ts`**: Provides functions for generating and manipulating document outlines.

These files are organized to facilitate the flow of data and control between HTML content, custom elements, and UI synchronization processes.