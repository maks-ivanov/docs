---
title: "utils.ts"
---

## High-level description

The target file `utils.ts` contains a utility function `isIslands` that checks if the application is running in a specific environment called "Islands". This is determined by evaluating an environment variable `VITE_MARIMO_ISLANDS`. The function is used in various parts of the application to conditionally execute code based on the environment.

## Code Structure

The main symbol in the code is the function `isIslands`. This function is used in other parts of the codebase, as seen in the related files, to determine the execution path based on the environment setting.

## Symbols

### `isIslands`
#### Description
The `isIslands` function checks if the application is running in the "Islands" environment by evaluating the `VITE_MARIMO_ISLANDS` environment variable. It returns a boolean indicating whether the environment is set to "Islands".

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | N/A  | The function does not take any inputs. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | Returns `true` if the `VITE_MARIMO_ISLANDS` environment variable is set to `true`, otherwise `false`. |

## References

The `isIslands` function is referenced in several related files:

- **`frontend/src/core/dom/marimo-tag.ts`**: It is used to select between `domBasedMarimoSettings` and `islandsBasedMarimoSettings` configurations.
- **`frontend/src/core/network/requests.ts`**: It determines which request handling strategy to use, specifically whether to use `IslandsPyodideBridge` or other request strategies.
- **`frontend/src/theme/useTheme.ts`**: It influences the theme selection logic, particularly in determining the default theme mode.

## Dependencies

The function relies on the `import.meta.env` object to access environment variables, which is a feature provided by the build tool (e.g., Vite) used in the project.

## Error Handling

The function does not implement any specific error handling. It assumes that the environment variable `VITE_MARIMO_ISLANDS` is correctly set to a boolean value.

## Side Effects

There are no side effects associated with the `isIslands` function. It simply returns a boolean value based on the environment configuration.

## Performance Considerations

The function is lightweight and performs a simple check on an environment variable, so there are no significant performance considerations.

## Logging

The function does not implement any logging mechanisms.

## TODOs

There are no TODOs or notes left in the code.