---
title: "Overview"
---

## High-level description

The `__tests__` directory within the `frontend/src/core/kernel` path contains unit tests for various components of a frontend application. These tests are designed to ensure the correct functionality of key modules related to event management, URL query parameter manipulation, and session management. The main components tested include:

- `RuntimeState`: Manages the lifecycle of event listeners for UI elements.
- `queryParamHandlers`: Handles the manipulation of URL query parameters.
- `session`: Manages session IDs, including their generation and validation.

## What does it do?

The tests in this directory verify the behavior of different modules that are crucial for the frontend application's operation:

1. **Event Management (`RuntimeState.test.ts`)**: 
   - Ensures that the `RuntimeState` class correctly registers and deregisters event listeners for custom events, such as `MarimoValueReadyEvent`.
   - Verifies that the class enforces a singleton pattern, meaning it can only be started once to prevent multiple registrations of the same event listener.

2. **URL Query Parameter Manipulation (`handlers.test.ts`)**:
   - Tests the `queryParamHandlers` module to ensure it can append, set, delete, and clear query parameters in the URL.
   - Confirms that the browser's history state is updated correctly when query parameters are manipulated.

3. **Session Management (`session.test.ts`)**:
   - Validates the functionality of session management functions, specifically the generation and validation of session IDs.
   - Ensures that session IDs are generated in the correct format and can be accurately identified as valid or invalid.

## Entry points

The directory contains multiple test files, each focusing on a specific module:

- `RuntimeState.test.ts`: Tests the `RuntimeState` class for event listener management.
- `handlers.test.ts`: Tests the `queryParamHandlers` module for URL query parameter manipulation.
- `session.test.ts`: Tests session management functions for generating and validating session IDs.

These files are organized to test the respective modules they are named after, ensuring that each module's functionality is independently verified.

## Dependencies

The tests in this directory rely on the `vitest` testing framework, which provides the necessary tools for defining and executing test cases. `vitest` is used for:

- Structuring test suites and cases (`describe`, `it`).
- Making assertions (`expect`).
- Mocking functions and clearing mocks (`vi`).

This framework is chosen for its simplicity and effectiveness in handling unit tests in JavaScript and TypeScript environments.