---
title: "Overview"
---

## High-level description

The `frontend/src/core/state` directory is part of a frontend codebase that manages global state using the Jotai library. It provides mechanisms to create and manipulate a global state store outside of React components. The directory includes utility functions for waiting on state changes and creating side effects when state changes occur. Additionally, it contains unit tests to ensure the correctness of these functionalities.

## What does it do?

The code in this directory is responsible for managing application state in a way that is decoupled from React components, allowing for more flexible and centralized state management. It uses Jotai, a state management library, to create a global store that can be accessed and modified from anywhere in the application. This is particularly useful for applications that require a consistent state across different parts of the application.

The `waitFor` function is a utility that allows the application to pause execution until a specific condition is met by the state. This is useful in scenarios where certain operations depend on the state being in a particular condition before proceeding.

The `useJotaiEffect` hook is a React-specific utility that triggers side effects whenever the state changes. This is useful for performing actions like logging, analytics, or triggering other state changes in response to updates in the state.

## Entry points

The main files in this directory are:

- `jotai.ts`: This file is the core of the state management system. It defines the global store and utility functions like `waitFor` and `useJotaiEffect`.
- `__tests__`: This subdirectory contains unit tests for the `waitFor` function, ensuring that it behaves correctly under various conditions.

## Key Files

- **`jotai.ts`**: This file is crucial as it sets up the global state store using Jotai's `createStore` function. It also defines the `waitFor` function, which is used to wait for an atom's value to satisfy a given condition, and the `useJotaiEffect` hook, which triggers side effects on state changes.

## Dependencies

The directory relies on the following external libraries:

- **Jotai**: Used for state management. It provides the `Atom`, `createStore`, and `useStore` functions, which are essential for creating and managing the global state.
- **React**: Used for creating the `useJotaiEffect` hook, which leverages React's `useEffect` to manage side effects in response to state changes.
- **Vitest**: A testing framework used for writing and running unit tests for the `waitFor` function. It provides the `describe` and `it` functions to organize and define test cases.