---
title: "Overview"
---

## High-level description

The `cassiopeia/tools/fitness_estimator` directory is part of the Cassiopeia framework, which focuses on evolutionary biology and phylogenetic analysis. This directory specifically deals with estimating the fitness of nodes within phylogenetic trees. It provides an abstract base class for fitness estimation algorithms and a concrete implementation using the Local Branching Index (LBI) method via the Jungle package. The directory is structured to facilitate the development and integration of various fitness estimation algorithms, with a focus on modularity and extensibility.

## What does it do?

The directory provides tools for estimating the fitness of nodes in a phylogenetic tree, which is a representation of evolutionary relationships among species or genes. The fitness estimation process involves calculating a fitness value for each node in the tree, which can provide insights into evolutionary dynamics and the relative success of different lineages.

1. **Abstract Base Class**: The `FitnessEstimator` class serves as a blueprint for all fitness estimation algorithms. It requires any subclass to implement the `estimate_fitness` method, which is responsible for computing fitness values for nodes in a `CassiopeiaTree`.

2. **Concrete Implementation**: The `LBIJungle` class is a specific implementation of the `FitnessEstimator` that uses the Local Branching Index (LBI) method. This method leverages the Jungle package to estimate fitness values based on the branching patterns of the tree.

3. **Tree Conversion and Analysis**: The `_to_newick` utility function converts a tree from a networkx graph representation to a Newick string format, which is commonly used for phylogenetic analysis. This conversion is necessary for interfacing with the Jungle package.

4. **Error Handling**: The directory includes custom error handling through the `FitnessEstimatorError` class, which is used to manage errors specific to the fitness estimation process.

Overall, the directory provides a framework for developing and applying fitness estimation algorithms to phylogenetic trees, enabling researchers to analyze evolutionary processes and infer the fitness of different lineages.

## Entry points

The main entry points for this directory are the `__init__.py` file and the `_lbi_jungle.py` module. The `__init__.py` file imports key classes and functions from the `_FitnessEstimator` and `_lbi_jungle` modules, making them accessible at the package level. This setup allows users to easily access the `FitnessEstimator` abstract class and the `LBIJungle` implementation when they import the `fitness_estimator` package.

## Key Files

- **`_FitnessEstimator.py`**: Defines the `FitnessEstimator` abstract base class and the `FitnessEstimatorError` custom exception. This file is crucial for setting the interface that all fitness estimation algorithms must follow.

- **`_lbi_jungle.py`**: Implements the `LBIJungle` class, a concrete fitness estimator using the LBI method. It also includes the `_to_newick` utility function for converting trees to Newick format.

- **`_jungle` Directory**: Contains submodules and scripts for managing and analyzing phylogenetic trees, as well as generating and annotating forests of trees. This directory provides additional tools and data for phylogenetic analysis.

## Dependencies

The directory relies on several external libraries:

- **`abc`**: Used to define the abstract base class `FitnessEstimator`.
- **`networkx`**: Utilized for handling graph structures and converting them to Newick format.
- **`numpy`**: Used for setting random seeds and handling numerical operations.
- **`jungle`**: A package used for LBI fitness estimation, providing methods for annotating and inferring fitness values from phylogenetic trees.

These dependencies are essential for the functionality provided by the directory, enabling the implementation of fitness estimation algorithms and the manipulation of phylogenetic trees.