---
title: "Overview"
---

## High-level description

The `cassiopeia/preprocess` directory is a comprehensive module within the Cassiopeia library, designed to preprocess sequencing data for phylogenetic analysis. It includes a variety of utilities and functions to handle tasks such as UMI collapsing, error correction, sequence alignment, and lineage group assignment. The module is structured to facilitate the transformation of raw sequencing data into a format suitable for downstream phylogenetic inference, leveraging high-level functions and utilities to streamline the preprocessing pipeline.

## What does it do?

The preprocessing module in Cassiopeia is responsible for preparing sequencing data for phylogenetic analysis. It processes BAM files containing cell barcodes and UMIs, performing tasks such as:

1. **UMI Collapsing and Error Correction**: The module handles the collapsing of UMIs to account for sequencing errors, ensuring that similar UMIs are grouped together to form consensus sequences. This is crucial for reducing noise in the data and improving the accuracy of downstream analyses.

2. **Sequence Alignment**: It provides utilities for aligning sequences to a reference using both local and global alignment algorithms. This step is essential for identifying indels and other sequence variations that are important for phylogenetic inference.

3. **Filtering and Correction**: The module includes functions to filter out low-quality reads and correct errors in cell barcodes and integration barcodes (intBCs) using whitelists and distance-based methods. This ensures that only high-confidence data is used in the analysis.

4. **Lineage Group Assignment**: It assigns cells to lineage groups based on shared intBC patterns, helping to reconstruct clonal populations from single-cell sequencing data. This involves clustering cells with similar genetic profiles and refining these groups through iterative filtering.

5. **Data Conversion and Logging**: The module converts data between different formats (e.g., BAM to DataFrame) and logs detailed information about the preprocessing steps, aiding in debugging and ensuring reproducibility.

Overall, the preprocessing module automates the transformation of raw sequencing data into a structured format, ready for phylogenetic analysis, by applying a series of well-defined and interconnected processing steps.