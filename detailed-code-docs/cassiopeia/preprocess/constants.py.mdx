---
title: "constants.py"
---

## High-level description

The `constants.py` file in the `cassiopeia/preprocess` module is designed to store various constants used throughout the ProcessingPipeline module. These constants include tags for BAM files, DNA substitution matrices, and default parameters for different stages of the preprocessing pipeline. The constants are used to standardize and simplify the configuration and execution of the pipeline processes.

## Code Structure

The file defines several dictionaries that group related constants together. These dictionaries are used in other parts of the codebase to access specific constants needed for processing tasks. The main dictionaries include `BAM_CONSTANTS`, `SINGLE_CELL_BAM_TAGS`, `SPATIAL_BAM_TAGS`, `CHEMISTRY_BAM_TAGS`, `DNA_SUBSTITUTION_MATRIX`, and `DEFAULT_PIPELINE_PARAMETERS`.

## Symbols

### `BAM_CONSTANTS`
#### Description
This dictionary contains constants related to BAM file tags and quality thresholds. These constants are used to tag and process BAM files in the pipeline.

#### Contents
- `RAW_CELL_BC_TAG`: Tag for raw cell barcodes.
- `RAW_CELL_BC_QUALITY_TAG`: Tag for raw cell barcode quality.
- `CELL_BC_TAG`: Tag for corrected cell barcodes.
- `UMI_TAG`: Tag for Unique Molecular Identifiers (UMIs).
- `UMI_QUALITY_TAG`: Tag for UMI quality.
- `NUM_READS_TAG`: Tag for the number of reads.
- `CLUSTER_ID_TAG`: Tag for cluster IDs.
- `N_Q`: Quality value indicating no consensus.
- `HIGH_Q`: High-quality threshold.
- `LOW_Q`: Low-quality threshold.

### `SINGLE_CELL_BAM_TAGS`
#### Description
This dictionary maps UMI and cell barcode tags for single-cell BAM files. It uses constants from `BAM_CONSTANTS`.

#### Contents
- `umi`: Tuple of UMI tag and UMI quality tag.
- `cell_barcode`: Tuple of raw cell barcode tag and quality tag.

### `SPATIAL_BAM_TAGS`
#### Description
Similar to `SINGLE_CELL_BAM_TAGS`, but for spatial BAM files, mapping UMI and spot barcode tags.

#### Contents
- `umi`: Tuple of UMI tag and UMI quality tag.
- `spot_barcode`: Tuple of raw cell barcode tag and quality tag.

### `CHEMISTRY_BAM_TAGS`
#### Description
This dictionary maps different sequencing chemistries to their respective BAM tag configurations.

#### Contents
- `dropseq`, `10xv2`, `10xv3`, `indropsv3`: Use `SINGLE_CELL_BAM_TAGS`.
- `slideseq2`: Uses `SPATIAL_BAM_TAGS`.

### `DNA_SUBSTITUTION_MATRIX`
#### Description
A matrix defining substitution scores for DNA bases, used in sequence alignment processes.

#### Contents
- Scores for matches and mismatches between bases A, T, C, G, Z, and N.

### `DEFAULT_PIPELINE_PARAMETERS`
#### Description
This dictionary contains default parameters for various stages of the preprocessing pipeline. These parameters guide the behavior of the pipeline functions.

#### Contents
- `general`: General pipeline settings like entry and exit points.
- `convert`, `filter_bam`, `error_correct_cellbcs_to_whitelist`, `collapse`, `resolve`, `align`, `call_alleles`, `error_correct_intbcs_to_whitelist`, `error_correct_umis`, `filter_molecule_table`, `call_lineages`: Specific parameters for each stage of the pipeline.

## References

- The constants defined in this file are referenced in other parts of the codebase, such as `UMI_utils.py` and `pipeline.py`, where they are used to configure and execute various preprocessing tasks.

## Dependencies

No external libraries are directly imported in this file, but the constants are used by other modules that do have dependencies.

## Configuration

The `DEFAULT_PIPELINE_PARAMETERS` dictionary provides a set of default configuration options for the pipeline stages. These options can be overridden by user-provided configurations.

## Error Handling

This file does not implement error handling directly, but the constants defined here are used in functions that may include error handling logic.

## Logging

This file does not implement logging directly, but the constants defined here are used in functions that may include logging logic.

## API/Interface Reference

This file does not define an API or public interface directly, but the constants are used in functions that may be part of a larger API.

## TODOs

There are no TODOs or notes left in the code.