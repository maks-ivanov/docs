---
title: "SpatialDataSimulator.py"
---

## High-level description

The `SpatialDataSimulator.py` file defines an abstract class `SpatialDataSimulator`, which is a subclass of `DataSimulator`. This class is designed to overlay spatial data onto a `CassiopeiaTree`, setting spatial coordinates for the nodes of the tree and storing these coordinates as attributes of the nodes and in the cell metadata. The class is intended to be extended by specific implementations that define how spatial data is simulated and applied to the tree.

## Code Structure

The main class in this file is `SpatialDataSimulator`, which inherits from `DataSimulator`. The `SpatialDataSimulator` class is abstract and requires subclasses to implement the `overlay_data` method. This method is responsible for overlaying spatial data onto a `CassiopeiaTree`.

## References

- `CassiopeiaTree`: This is a data structure from the `cassiopeia.data` module that represents a phylogenetic tree with additional metadata. It is the primary data structure that the `SpatialDataSimulator` operates on.
- `DataSimulator`: An abstract base class from which `SpatialDataSimulator` inherits. It defines the interface for data simulators, specifically the `overlay_data` method.

## Symbols

### `SpatialDataSimulator`
#### Description
The `SpatialDataSimulator` is an abstract class designed to be a base for simulators that overlay spatial data onto a `CassiopeiaTree`. It is used in simulation pipelines to add spatial coordinates to the nodes of a tree, which can then be used for reconstructing tree topology or simulating spatial assays.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tree | `CassiopeiaTree` | The tree to overlay spatial data on. The tree topology must be initialized. |

#### Outputs
This class does not produce direct outputs as it is abstract. The `overlay_data` method, when implemented, modifies the `CassiopeiaTree` in place.

#### Internal Logic
The `overlay_data` method is abstract and must be implemented by subclasses. It is intended to set spatial coordinates for all nodes in the tree, storing these coordinates as a `spatial` attribute for nodes and in the `cell_meta` attribute for leaves.

## Side Effects
The `overlay_data` method, when implemented, will modify the `CassiopeiaTree` by adding spatial attributes to its nodes and updating the cell metadata.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `abc` | Used to define the abstract base class `SpatialDataSimulator`. |
| `CassiopeiaTree` | The data structure that the simulator operates on. |
| `DataSimulator` | The parent class that provides the abstract interface for data simulators. |

## Error Handling
The `SpatialDataSimulator` class itself does not implement error handling, as it is abstract. Error handling would be implemented in subclasses that define specific behavior for the `overlay_data` method.

## TODOs
There are no TODOs or notes left in the code.