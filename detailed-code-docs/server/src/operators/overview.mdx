---
title: "Overview"
---

## High-level description
The `server/src/operators` directory contains modules that handle various data operations within the Trieve application. These modules interact with different data stores, including a PostgreSQL database, a Qdrant vector database, a ClickHouse analytics database, and external services like OpenAI and Stripe.

## What does it do?
The `operators` directory acts as the backbone for data management in the Trieve application. It provides functions for:

- **User Management:** Creating, retrieving, updating, and deleting users, managing API keys, and handling user roles within organizations.
- **Organization Management:** Creating, updating, deleting organizations, managing users within organizations, and tracking organization usage.
- **Dataset Management:** Creating, retrieving, updating, and deleting datasets, managing dataset configurations, and tracking dataset usage.
- **Chunk Management:** Creating, retrieving, updating, and deleting chunks of data, generating embeddings, and managing chunk groups and bookmarks.
- **Search and Recommendation:** Performing semantic, full-text, and hybrid searches over chunks and groups, generating recommendations based on user interactions.
- **Chat and Messaging:** Managing chat topics, creating and retrieving messages, integrating with OpenAI's chat completion API, and incorporating RAG functionality.
- **File Management:** Handling file uploads, downloads, and deletions, interacting with an S3 bucket for file storage.
- **Analytics and Event Tracking:** Sending events to ClickHouse for analytics purposes, tracking user interactions, search queries, and other application events.
- **Stripe Integration:** Managing subscriptions, plans, and invoices, interacting with the Stripe API for payment processing.
- **Email Communication:** Sending invitation emails, notifications, and other email communications.

These modules work together to provide a comprehensive set of data operations that power the Trieve application's core functionality.

## Key Files
| File | Description |
|:-----|:------------|
| `analytics_operator.rs` | Defines functions for querying and manipulating data related to search, RAG, recommendation, and cluster analytics in ClickHouse. |
| `chunk_operator.rs` | Contains functions for interacting with the `chunk_metadata` table in the database and the Qdrant vector database, including inserting, updating, deleting, and retrieving chunk metadata. |
| `clickhouse_operator.rs` | Defines a service for sending events to ClickHouse, including functions for extracting latency from headers and sending different types of events. |
| `dataset_operator.rs` | Defines functions for interacting with the `datasets` table in the database, including creating, retrieving, updating, and deleting datasets. |
| `email_operator.rs` | Provides functionality for sending emails using the `lettre` crate, including retrieving SMTP credentials and sending HTML emails. |
| `event_operator.rs` | Defines a function for retrieving worker events from ClickHouse based on provided parameters. |
| `file_operator.rs` | Contains functions for handling file uploads, downloads, and deletions, interacting with an S3 bucket and the database. |
| `group_operator.rs` | Defines functions for managing chunk groups within a dataset, including creating, retrieving, updating, and deleting groups. |
| `invitation_operator.rs` | Defines functions for managing invitations, including creating, retrieving, deleting, and marking invitations as used. |
| `message_operator.rs` | Defines functions for managing messages within a chat topic, including creating, retrieving, deleting, and regenerating messages. |
| `model_operator.rs` | Contains functions for generating dense and sparse vector embeddings for text data using external embedding services. |
| `organization_operator.rs` | Defines functions for managing organizations, including creating, updating, deleting organizations, and managing users within organizations. |
| `parse_operator.rs` | Defines functions for parsing and processing text data, including converting HTML to text, chunking documents, and averaging embedding vectors. |
| `qdrant_operator.rs` | Defines functions for interacting with a Qdrant vector database, including creating and managing collections, upserting and updating points, and performing searches. |
| `search_operator.rs` | Contains the core functionality for performing various types of searches (semantic, full-text, hybrid) over chunks and groups of chunks. |
| `stripe_operator.rs` | Defines functions for interacting with the Stripe API and the database to manage subscriptions, plans, and invoices. |
| `topic_operator.rs` | Defines functions for managing chat topics, including creating, deleting, updating, and retrieving topics. |
| `user_operator.rs` | Defines functions for managing users, including fetching user details, adding users to organizations, managing API keys, and creating default users. |

These files represent the core data operations within the Trieve application, providing the foundation for its functionality.
