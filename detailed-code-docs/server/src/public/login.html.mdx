---
title: "login.html"
---

## High-level description
This HTML file provides a simple client-side script to authenticate a user with a backend service and redirect them to a local application with the acquired API key. This is specifically designed for a command-line interface (CLI) tool named "Trieve CLI".

## Table of contents
- Global script

## References
- This script references a backend API endpoint assumed to be located at `${host}/api/user/api_key`.

## Symbols
### `Global script`
#### Description
This script extracts the `host` parameter from the URL, sends a POST request to the backend API to generate an API key, and redirects the user to a local application with the received API key.

#### Inputs
- **Implicit input:** URL parameters, specifically `host`.

#### Outputs
- **Redirect:** Redirects the browser to `http://localhost:65535?apiKey=${data.api_key}`.

#### Internal Logic
1. **Extract host:** Retrieves the value of the `host` parameter from the URL query string.
2. **API request:** Sends a POST request to `${host}/api/user/api_key` with:
    - Headers: `Content-Type: application/json`
    - Body: JSON payload `{ name: "Trieve CLI", role: 1 }`
    - Credentials: `include` (to include cookies)
3. **Handle response:**
    - If successful, parses the JSON response and extracts the `api_key`.
    - Redirects the browser to `http://localhost:65535`, appending the `apiKey` as a query parameter.
    - If an error occurs, logs the error to the console.

## Side Effects
- **Browser redirection:** The script redirects the user's browser upon successful API key retrieval.

## Dependencies
- This script relies on the browser's built-in `fetch` API for making network requests.

## Error Handling
- Basic error handling is implemented by catching errors during the API request and logging them to the console. 
