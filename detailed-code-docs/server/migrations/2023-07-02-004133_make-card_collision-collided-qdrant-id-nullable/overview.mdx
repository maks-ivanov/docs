---
title: "Overview"
---

## High-level description
This directory contains database migration scripts related to the `card_collisions` table. Specifically, it focuses on making the `collision_qdrant_id` column nullable. 

## What does it do?
The scripts in this directory manage changes to how the application stores data about card collisions. One script makes the `collision_qdrant_id` nullable, meaning it can be left blank. The other script reverses this change if needed. This flexibility is important for handling situations where a Qdrant ID might not be available when recording a card collision. 

## Key Files
- **up.sql**: This script modifies the database schema by making the `collision_qdrant_id` column in the `card_collisions` table nullable. This means that the column can now contain NULL values in addition to actual Qdrant IDs.

    ```sql
    ALTER TABLE card_collisions
    ALTER COLUMN collision_qdrant_id DROP NOT NULL;
    ```

- **down.sql**: This script reverts the changes made by `up.sql`. It makes the `collision_qdrant_id` column non-nullable again, meaning that it cannot be left blank and must always contain a valid Qdrant ID.

    ```sql
    ALTER TABLE card_collisions
    ALTER COLUMN collision_qdrant_id SET NOT NULL;
    ```
