---
title: "down.sql"
---

## High-level description
This SQL migration script reverts changes made to the `events` table, removing new columns, adding back old columns, and renaming it back to `file_upload_completed_notifications`.

## Table of contents
- Dropping columns from `events` table
- Adding columns to `events` table
- Renaming `events` table

## Symbols

### SQL Migration Script
#### Description
This SQL script is designed to undo the changes made in a previous migration. It modifies the structure of the `events` table and renames it.

#### Internal Logic
1. Drops the `event_type` column from the `events` table.
2. Drops the `event_data` column from the `events` table.
3. Adds a `user_read` column to the `events` table with a boolean type and a default value of false.
4. Adds a `collection_id` column to the `events` table with a UUID type.
5. Renames the `events` table to `file_upload_completed_notifications`.

## Side Effects
- The structure of the `events` table is modified.
- The `events` table is renamed to `file_upload_completed_notifications`.
- Any data in the dropped columns (`event_type` and `event_data`) will be lost.

## Future Improvements
- Consider adding a backup mechanism before dropping columns to prevent data loss.
- If possible, implement a way to preserve the data from the dropped columns, possibly by storing it in a temporary table or in the `event_data` JSON column before dropping it.