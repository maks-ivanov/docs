---
title: "up.sql"
---

## High-level description
This SQL script creates a `users` table in a database, defining the structure for storing user account information including unique identifiers, email addresses, password hashes, and timestamps for creation and updates.

## Table of contents
- Table creation
- Column definitions
- Constraints

## Symbols

### `users` table
#### Description
The `users` table is designed to store essential information for user accounts in a system. It includes columns for unique identification, authentication, and tracking creation and modification times.

#### Columns
| Name | Type | Constraints | Description |
|:-----|:-----|:------------|:------------|
| id | UUID | NOT NULL, UNIQUE, PRIMARY KEY | Unique identifier for each user |
| email | VARCHAR(100) | NOT NULL, UNIQUE | User's email address |
| hash | VARCHAR(122) | NOT NULL | Argon2 password hash |
| created_at | TIMESTAMP | NOT NULL | Timestamp of user account creation |
| updated_at | TIMESTAMP | NOT NULL | Timestamp of last user account update |

#### Internal Logic
1. The table uses a UUID as the primary key, ensuring global uniqueness across distributed systems.
2. Email addresses are stored as VARCHAR with a maximum length of 100 characters and must be unique.
3. Password hashes are stored using the Argon2 hashing algorithm, with a fixed length of 122 characters.
4. Timestamps are used to track the creation and last update times of each user account.

## Performance Considerations
- The use of UUID as the primary key may have performance implications for indexing and joining operations compared to auto-incrementing integer IDs.
- The UNIQUE constraint on the email column will create an additional index, which may impact insert and update performance but will speed up queries searching by email.

## Future Improvements
- Consider adding an index on the `created_at` column if queries frequently filter or sort by this field.
- If user deletion is a feature, consider adding a `deleted_at` TIMESTAMP column for soft deletes.
- Depending on the application requirements, additional columns such as `last_login_at` or `status` might be beneficial.
- If the system needs to support multiple authentication methods, consider adding an `auth_type` column.