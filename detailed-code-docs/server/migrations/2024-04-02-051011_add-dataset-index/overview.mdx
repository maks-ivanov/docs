---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for managing database schema changes related to adding and removing indexes on specific tables. The `up.sql` script applies the changes, while the `down.sql` script reverts them.

## What does it do?
The scripts in this directory modify the database structure to improve query performance. They achieve this by adding indexes to columns frequently used in search criteria and removing an index that is deemed unnecessary. This process is akin to adding a table of contents to a book, making it faster to find specific information.

## Key Files
- **up.sql:** This script adds three new indexes to the `chunk_metadata` table: `idx_chunk_metadata_dataset_id`, `idx_chunk_metadata_created_at`, and `idx_chunk_metadata_time_stamp`. It also removes the `idx_card_metadata_qdrant_point_id` index from the `card_metadata` table.
```sql
CREATE INDEX idx_chunk_metadata_dataset_id ON chunk_metadata (dataset_id);
CREATE INDEX idx_chunk_metadata_created_at ON chunk_metadata (created_at);
CREATE INDEX idx_chunk_metadata_time_stamp ON chunk_metadata (time_stamp);
DROP INDEX idx_card_metadata_qdrant_point_id;
```
- **down.sql:** This script reverts the changes made by `up.sql`. It removes the three indexes added to `chunk_metadata` and recreates the `idx_card_metadata_qdrant_point_id` index on the `card_metadata` table.
```sql
DROP INDEX idx_chunk_metadata_dataset_id;
DROP INDEX idx_chunk_metadata_created_at;
DROP INDEX idx_chunk_metadata_time_stamp;
CREATE INDEX idx_card_metadata_qdrant_point_id ON card_metadata (qdrant_point_id);
``` 
