---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for altering the `files` table in the database. The scripts specifically focus on adding a new JSONB column named `metadata` to the table and removing an existing column named `mime_type`.

## What does it do?
The migration scripts in this directory manage changes to how files are represented in the database. Originally, file information was stored with a dedicated `mime_type` column. These scripts introduce a more flexible approach by adding a `metadata` column that can hold various file-related information in JSON format. This allows for storing additional details about files beyond just their mime type.

The `up.sql` script applies the changes, adding the `metadata` column and removing the `mime_type` column. Conversely, the `down.sql` script reverts these changes, effectively restoring the table to its previous state. This ensures that database changes can be applied and rolled back cleanly during development or deployment.

## Entry points
- `up.sql`: This script is executed to apply the migration, adding the `metadata` column and removing the `mime_type` column from the `files` table.
- `down.sql`: This script is executed to revert the migration, removing the `metadata` column and adding back the `mime_type` column to the `files` table.
