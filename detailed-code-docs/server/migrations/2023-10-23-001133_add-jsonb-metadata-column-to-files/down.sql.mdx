---
title: "down.sql"
---

## High-level description
This SQL migration script reverts the changes made in the corresponding `up.sql` file. It removes the `metadata` column from the `files` table and reintroduces the `mime_type` column.

## Table of contents
- Drop `metadata` column
- Add `mime_type` column

## Symbols

### ALTER TABLE files DROP COLUMN metadata
#### Description
This SQL command removes the `metadata` column from the `files` table.

#### Internal Logic
The `DROP COLUMN` clause is used to remove the specified column from the table.

### ALTER TABLE files ADD COLUMN mime_type TEXT NULL DEFAULT NULL
#### Description
This SQL command adds a new `mime_type` column to the `files` table.

#### Internal Logic
- The `ADD COLUMN` clause is used to add a new column to the table.
- The column is named `mime_type`.
- It is defined as `TEXT` data type.
- It allows NULL values.
- The default value is set to NULL.

## Side Effects
- The `metadata` column and its contents will be permanently removed from the `files` table.
- A new `mime_type` column will be added to the `files` table, potentially changing the table's structure and how applications interact with it.

## Future Improvements
- Consider adding a data migration step to preserve any important information from the `metadata` column before dropping it.
- If the `mime_type` column is expected to have a specific format or limited set of values, consider adding a CHECK constraint or creating an ENUM type for better data integrity.