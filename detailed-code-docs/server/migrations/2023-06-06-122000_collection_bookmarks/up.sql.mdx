---
title: "up.sql"
---

## High-level description
This SQL script creates a new table named `card_collection_bookmarks` to store bookmarks for cards within collections. It establishes relationships between collections and card metadata, allowing users to bookmark specific cards in a collection.

## Table of contents
- Table creation
- Column definitions
- Foreign key references
- Default timestamp values

## Symbols

### `card_collection_bookmarks` table
#### Description
This table is designed to store bookmarks for cards within collections. It links a card metadata entry to a collection, creating a bookmark relationship.

#### Columns
| Name | Type | Description |
|:-----|:-----|:------------|
| id | UUID | Primary key for the bookmark entry |
| collection_id | UUID | Foreign key referencing the card_collection table |
| card_metadata_id | UUID | Foreign key referencing the card_metadata table |
| created_at | TIMESTAMP | Timestamp of when the bookmark was created |
| updated_at | TIMESTAMP | Timestamp of when the bookmark was last updated |

#### Internal Logic
- The table uses UUIDs for its primary key and foreign keys, ensuring unique identifiers across the system.
- Foreign key constraints are established to maintain referential integrity with the `card_collection` and `card_metadata` tables.
- Default timestamps are set for `created_at` and `updated_at` columns, automatically recording the creation and last update times.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| card_collection | Referenced by collection_id to link bookmarks to specific collections |
| card_metadata | Referenced by card_metadata_id to link bookmarks to specific card metadata entries |

## Future Improvements
- Consider adding an index on `collection_id` and `card_metadata_id` columns to improve query performance when searching for bookmarks.
- Implement a unique constraint on the combination of `collection_id` and `card_metadata_id` if a card should only be bookmarked once per collection.
- Add a `user_id` column if bookmarks need to be associated with specific users in a multi-user system.