---
title: "down.sql"
---

## High-level description
This SQL migration file is designed to revert the changes made in the corresponding `up.sql` file. It removes two indexes that were previously created for the `user_api_key` table, specifically for the `api_key_hash` and `blake3_hash` columns.

## Table of contents
- Drop index for `api_key_hash`
- Drop index for `blake3_hash`

## Symbols

### `DROP INDEX IF EXISTS user_api_key_api_key_hash_index`
#### Description
This SQL command removes the index named `user_api_key_api_key_hash_index` if it exists. This index was likely created on the `api_key_hash` column of the `user_api_key` table.

#### Side Effects
- Removes the index on the `api_key_hash` column, potentially affecting query performance for operations involving this column.
- If the index doesn't exist, the command will not raise an error due to the `IF EXISTS` clause.

### `DROP INDEX IF EXISTS user_api_key_blake3_hash_index`
#### Description
This SQL command removes the index named `user_api_key_blake3_hash_index` if it exists. This index was likely created on the `blake3_hash` column of the `user_api_key` table.

#### Side Effects
- Removes the index on the `blake3_hash` column, potentially affecting query performance for operations involving this column.
- If the index doesn't exist, the command will not raise an error due to the `IF EXISTS` clause.

## Performance Considerations
Removing these indexes may impact the performance of queries that were previously using them. Operations that search or filter on the `api_key_hash` or `blake3_hash` columns might become slower after this migration is applied.

## Future Improvements
- If these indexes are frequently recreated and dropped, consider implementing a more dynamic indexing strategy based on usage patterns.
- Evaluate the impact of removing these indexes on query performance and adjust the database schema or queries as needed to maintain optimal performance.