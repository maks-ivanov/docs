---
title: "down.sql"
---

## High-level description
This SQL script recreates the `stripe_customers` table, which was presumably dropped in the corresponding `up.sql` migration. It defines the structure for storing Stripe customer information, including a link to the `users` table.

## Table of contents
- Table creation
- Column definitions
- Primary key
- Foreign key constraint

## Code Structure
This SQL script consists of a single `CREATE TABLE` statement that defines the structure of the `stripe_customers` table.

## Symbols

### `stripe_customers` table
#### Description
Creates a table to store information about Stripe customers, including their unique identifiers, email, and timestamps.

#### Columns
| Name | Type | Constraints | Description |
|:-----|:-----|:------------|:------------|
| id | UUID | NOT NULL, UNIQUE, PRIMARY KEY | Unique identifier for the table |
| stripe_id | TEXT | NOT NULL, UNIQUE | Stripe's customer identifier |
| email | TEXT | UNIQUE, DEFAULT NULL | Customer's email address |
| created_at | TIMESTAMP | NOT NULL | Timestamp of record creation |
| updated_at | TIMESTAMP | NOT NULL | Timestamp of last record update |

#### Constraints
- Primary Key: `id` column
- Foreign Key: `email` column references `users(email)`
- Unique constraints: `id`, `stripe_id`, `email`

## Dependencies
This script assumes the existence of a `users` table with an `email` column, as it references it in the foreign key constraint.

## Future Improvements
- Consider adding indexes on frequently queried columns, such as `stripe_id` or `email`, to improve query performance.
- Depending on the application's needs, you might want to add more columns to store additional customer information from Stripe.
- If the `users` table uses a different primary key than `email`, consider updating the foreign key reference accordingly.