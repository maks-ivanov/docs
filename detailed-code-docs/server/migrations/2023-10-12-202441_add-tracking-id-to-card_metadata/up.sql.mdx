---
title: "up.sql"
---

## High-level description
This SQL migration script adds a new column called `tracking_id` to the `card_metadata` table. The new column is of type TEXT and has a UNIQUE constraint.

## Table of contents
- ALTER TABLE statement
- Column addition

## Symbols

### ALTER TABLE card_metadata
#### Description
This SQL command modifies the structure of the existing `card_metadata` table.

### ADD COLUMN tracking_id TEXT UNIQUE
#### Description
This clause adds a new column named `tracking_id` to the `card_metadata` table. The column is defined as TEXT data type with a UNIQUE constraint.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tracking_id | TEXT | A unique identifier for tracking purposes |

## Side Effects
- The `card_metadata` table structure is permanently modified.
- Any existing rows in the table will have NULL values for the new `tracking_id` column unless a default value is specified (which is not the case in this migration).
- The UNIQUE constraint ensures that no two rows can have the same `tracking_id` value.

## Performance Considerations
Adding a new column with a UNIQUE constraint may have performance implications:
1. The database will need to create an index to enforce the UNIQUE constraint, which could slow down INSERT and UPDATE operations on this table.
2. The addition of a new column might require table rewriting, depending on the database system, which could be a time-consuming operation for large tables.

## Future Improvements
- Consider adding a NOT NULL constraint if the `tracking_id` should always have a value.
- If the `tracking_id` is meant to be a primary identifier, consider making it the primary key or part of a composite primary key.
- Depending on the use case, adding an index on this column (beyond the implicit index created by the UNIQUE constraint) might improve query performance if it's frequently used in WHERE clauses.