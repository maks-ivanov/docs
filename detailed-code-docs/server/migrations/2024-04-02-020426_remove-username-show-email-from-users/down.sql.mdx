---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made to the `users` table, specifically adding back columns that were previously removed: `username`, `visible_email`, and `website`.

## Table of contents
- Add `username` column
- Add `visible_email` column
- Add `website` column

## Symbols

### ALTER TABLE users ADD COLUMN username TEXT;
#### Description
This SQL statement adds a `username` column of type TEXT to the `users` table.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
The `ALTER TABLE` command is used to modify the structure of the `users` table by adding a new column named `username` with the data type TEXT.

### ALTER TABLE users ADD COLUMN visible_email BOOLEAN NOT NULL DEFAULT FALSE;
#### Description
This SQL statement adds a `visible_email` column of type BOOLEAN to the `users` table with a NOT NULL constraint and a default value of FALSE.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
The `ALTER TABLE` command is used to modify the structure of the `users` table by adding a new column named `visible_email`. The column is defined as BOOLEAN, cannot contain NULL values (NOT NULL), and has a default value of FALSE.

### ALTER TABLE users ADD COLUMN website TEXT;
#### Description
This SQL statement adds a `website` column of type TEXT to the `users` table.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
The `ALTER TABLE` command is used to modify the structure of the `users` table by adding a new column named `website` with the data type TEXT.

## Side Effects
- The `users` table structure is modified by adding three new columns.
- Existing rows in the `users` table will have NULL values for `username` and `website` columns (unless there's a default value constraint on the table level).
- Existing rows in the `users` table will have FALSE values for the `visible_email` column due to the default value specified.

## Future Improvements
- Consider adding appropriate indexes on these columns if they will be frequently queried.
- If `username` is intended to be unique, consider adding a UNIQUE constraint.
- If `website` should follow a specific format, consider adding a CHECK constraint or handling validation at the application level.