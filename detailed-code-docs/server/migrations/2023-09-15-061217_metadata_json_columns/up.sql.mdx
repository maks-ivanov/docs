---
title: "up.sql"
---

## High-level description
This SQL script performs database migrations, specifically altering the structure of the `card_metadata` and `files` tables. It renames the `oc_file_path` column to `tag_set` in both tables and adds a new `metadata` column of type JSONB to the `card_metadata` table.

## Table of contents
- Renaming `oc_file_path` to `tag_set` in `card_metadata` table
- Adding `metadata` column to `card_metadata` table
- Renaming `oc_file_path` to `tag_set` in `files` table

## Symbols

### `ALTER TABLE card_metadata RENAME COLUMN oc_file_path TO tag_set;`
#### Description
This statement renames the column `oc_file_path` to `tag_set` in the `card_metadata` table.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This statement modifies the database schema.

### `ALTER TABLE card_metadata ADD COLUMN metadata JSONB NULL DEFAULT '{}'::JSONB;`
#### Description
This statement adds a new column named `metadata` to the `card_metadata` table. 
- The data type of the column is `JSONB`, which is a PostgreSQL specific type for storing JSON (JavaScript Object Notation) data in a decomposed binary format.
- `NULL` allows the column to contain null values.
- `DEFAULT '{}'::JSONB` sets the default value of the column to an empty JSON object (`{}`) if no value is provided during insertion.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This statement modifies the database schema.

### `ALTER TABLE files RENAME COLUMN oc_file_path TO tag_set;`
#### Description
This statement renames the column `oc_file_path` to `tag_set` in the `files` table.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This statement modifies the database schema.
