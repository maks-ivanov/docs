---
title: "down.sql"
---

## High-level description
This SQL script reverts database schema changes that were likely introduced in a migration named `2023-09-15-061217_metadata_json_columns`. It specifically targets the `card_metadata` and `files` tables, reversing column renaming and dropping a `metadata` column.

## Table of contents
- Renaming the `tag_set` column back to `oc_file_path` in the `card_metadata` table.
- Dropping the `metadata` column from the `card_metadata` table.
- Renaming the `tag_set` column back to `oc_file_path` in the `files` table.

## Code Structure
The code consists of three distinct SQL `ALTER TABLE` statements, each performing a specific schema change reversal on either the `card_metadata` or `files` table.

## Symbols
### `ALTER TABLE card_metadata RENAME COLUMN tag_set TO oc_file_path;`
#### Description
This statement renames the `tag_set` column back to its original name, `oc_file_path`, in the `card_metadata` table. This suggests that in the forward migration, the `oc_file_path` column was likely renamed to `tag_set`.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema, it doesn't return any output.

### `ALTER TABLE card_metadata DROP COLUMN metadata;`
#### Description
This statement drops the `metadata` column from the `card_metadata` table. This indicates that the forward migration likely added this column, and this statement is removing it during the rollback.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema, it doesn't return any output.

### `ALTER TABLE files RENAME COLUMN tag_set TO oc_file_path;`
#### Description
This statement renames the `tag_set` column back to its original name, `oc_file_path`, in the `files` table. Similar to the first statement, this suggests that the forward migration likely renamed `oc_file_path` to `tag_set` in the `files` table as well.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema, it doesn't return any output.
