---
title: "up.sql"
---

## High-level description
This SQL migration script removes the 'hash' column from the 'users' table and adds a new nullable 'name' column of type TEXT to the same table.

## Table of contents
- Drop 'hash' column
- Add 'name' column

## Symbols

### ALTER TABLE users DROP COLUMN hash;
#### Description
This SQL statement removes the 'hash' column from the 'users' table.

#### Internal Logic
The statement uses the ALTER TABLE command to modify the structure of the 'users' table. The DROP COLUMN clause is used to remove the 'hash' column entirely from the table.

### ALTER TABLE users ADD COLUMN name TEXT NULL;
#### Description
This SQL statement adds a new column named 'name' to the 'users' table.

#### Internal Logic
The statement uses the ALTER TABLE command to modify the structure of the 'users' table. The ADD COLUMN clause is used to create a new column with the following specifications:
- Column name: 'name'
- Data type: TEXT
- Constraint: NULL (allowing the column to contain null values)

## Side Effects
- The 'hash' column and all its data will be permanently removed from the 'users' table.
- A new 'name' column will be added to the 'users' table, initially containing null values for all existing rows.

## Future Improvements
- Consider adding a migration to populate the new 'name' column with data, if applicable.
- If the 'hash' column contained important data, ensure it has been backed up or migrated elsewhere before running this script.
- Depending on the application's needs, consider adding constraints (e.g., NOT NULL, UNIQUE) to the 'name' column in future migrations.