---
title: "up.sql"
---

## High-level description
This SQL migration file creates several indexes on existing tables to improve query performance for notifications related to file uploads and verifications.

## Table of contents
- Index creation for file_upload_completed_notifications
- Index creation for verification_notifications

## Symbols

### CREATE INDEX idx_file_upload_completed_notifications_user_uuid
#### Description
Creates an index on the `user_uuid` column of the `file_upload_completed_notifications` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user_uuid | UUID | The UUID of the user associated with the file upload notification |

### CREATE INDEX idx_file_upload_completed_notifications_collection_uuid
#### Description
Creates an index on the `collection_uuid` column of the `file_upload_completed_notifications` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| collection_uuid | UUID | The UUID of the collection associated with the file upload notification |

### CREATE INDEX idx_verification_notifications_user_uuid
#### Description
Creates an index on the `user_uuid` column of the `verification_notifications` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user_uuid | UUID | The UUID of the user associated with the verification notification |

### CREATE INDEX idx_verification_notifications_card_uuid
#### Description
Creates an index on the `card_uuid` column of the `verification_notifications` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| card_uuid | UUID | The UUID of the card associated with the verification notification |

### CREATE INDEX idx_verification_notifications_verification_uuid
#### Description
Creates an index on the `verification_uuid` column of the `verification_notifications` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| verification_uuid | UUID | The UUID of the verification associated with the notification |

## Performance Considerations
The creation of these indexes is intended to improve query performance when searching or filtering notifications based on user, collection, card, or verification UUIDs. This can significantly speed up operations that frequently access these columns, especially in tables with a large number of rows.

However, it's important to note that while indexes improve read performance, they can slightly impact write performance as the indexes need to be updated when data is inserted or modified. The trade-off is usually worthwhile for columns that are frequently used in WHERE clauses or JOIN conditions.

## Future Improvements
- Monitor the usage of these indexes to ensure they are being utilized as expected.
- Consider adding composite indexes if queries often filter on multiple columns simultaneously.
- Evaluate the need for additional indexes on other frequently queried columns in these tables.
- Periodically analyze the tables to update statistics and ensure optimal query planning.