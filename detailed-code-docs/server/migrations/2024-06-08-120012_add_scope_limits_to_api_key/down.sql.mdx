---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert the changes made in the corresponding `up.sql` file. It removes two columns, `dataset_ids` and `organization_ids`, from the `user_api_key` table if they exist.

## Table of contents
- ALTER TABLE statements to drop columns

## Symbols

### ALTER TABLE user_api_key DROP COLUMN IF EXISTS dataset_ids
#### Description
This SQL command removes the `dataset_ids` column from the `user_api_key` table if it exists.

#### Internal Logic
The `IF EXISTS` clause ensures that the command will not throw an error if the column doesn't exist in the table.

### ALTER TABLE user_api_key DROP COLUMN IF EXISTS organization_ids
#### Description
This SQL command removes the `organization_ids` column from the `user_api_key` table if it exists.

#### Internal Logic
Similar to the previous command, the `IF EXISTS` clause prevents errors if the column is not present in the table.

## Side Effects
- Modifies the structure of the `user_api_key` table by removing columns.
- May result in data loss if the columns contain any data before being dropped.

## Future Improvements
- Consider adding a backup mechanism before dropping columns to prevent unintended data loss.
- If these columns are part of any indexes or constraints, those should be dropped first in a separate migration to ensure a clean rollback.