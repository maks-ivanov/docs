---
title: "down.sql"
---

## High-level description
This SQL script is designed to revert changes made in a previous migration, specifically undoing the transition from "collections" to "groups" in the database schema. It renames tables and columns to restore the original "collection" terminology.

## Table of contents
- Table renaming
- Column renaming
- Table and column renaming for dataset counts

## Symbols

### ALTER TABLE statements
#### Description
These SQL statements are used to rename tables and columns, reverting them from "group" to "collection" terminology.

#### Internal Logic
1. Rename `chunk_group` table back to `chunk_collection`
2. Rename `chunk_group_bookmarks` table back to `chunk_collection_bookmarks`
3. Rename `groups_from_files` table back to `collections_from_files`
4. Rename `group_uuid` column to `collection_uuid` in `file_upload_completed_notifications` table
5. Rename `group_id` column to `collection_id` in `collections_from_files` table
6. Rename `group_id` column to `collection_id` in `chunk_collection_bookmarks` table
7. Rename `dataset_group_counts` table to `dataset_collection_counts`
8. Rename `group_count` column to `collection_count` in `dataset_collection_counts` table

## Side Effects
This migration will modify the database schema, potentially affecting any code or queries that rely on the "group" terminology introduced in the previous migration.

## Future Improvements
- Ensure that all related application code is updated to use the reverted "collection" terminology
- Verify that no data loss occurs during this reversion process
- Consider adding data validation steps to ensure the integrity of the data after the migration