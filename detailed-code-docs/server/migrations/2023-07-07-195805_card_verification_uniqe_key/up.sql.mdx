---
title: "up.sql"
---

## High-level description
This SQL migration script adds a unique constraint to the `card_verification` table, ensuring that each `card_id` is unique within the table.

## Table of contents
- ALTER TABLE statement
- CONSTRAINT addition

## Symbols

### ALTER TABLE statement
#### Description
This SQL command modifies the existing `card_verification` table by adding a new constraint.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| card_verification | table name | The name of the table being altered |

### CONSTRAINT addition
#### Description
This part of the SQL command adds a unique constraint to the `card_id` column of the `card_verification` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| uq_card_id | constraint name | The name given to the unique constraint |
| card_id | column name | The column on which the unique constraint is applied |

## Side Effects
- This migration will enforce uniqueness on the `card_id` column in the `card_verification` table.
- Any existing duplicate `card_id` values in the table will cause the migration to fail.
- Future attempts to insert or update rows with duplicate `card_id` values will be prevented.

## Performance Considerations
- Adding this constraint may slightly impact the performance of INSERT and UPDATE operations on the `card_verification` table, as the database will need to check for uniqueness.
- However, it may improve query performance when searching or joining on the `card_id` column, as the database can utilize the unique index created by this constraint.

## Future Improvements
- Consider adding an index on the `card_id` column if it's frequently used in WHERE clauses or joins, as this could further improve query performance.
- If the `card_id` is expected to be globally unique across multiple tables, consider implementing a foreign key constraint to enforce referential integrity with the parent table.