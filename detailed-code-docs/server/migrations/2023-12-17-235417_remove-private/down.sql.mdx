---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made in the corresponding `up.sql` file. It adds back the `private` column to both the `card_metadata` and `files` tables, which were presumably removed in the `up` migration.

## Table of contents
- Add `private` column to `card_metadata` table
- Add `private` column to `files` table

## Symbols

### ALTER TABLE card_metadata
#### Description
This SQL command adds the `private` column back to the `card_metadata` table.

#### Internal Logic
- Adds a new column named `private` to the `card_metadata` table
- Sets the column type as boolean
- Makes the column NOT NULL
- Sets a default value of false

### ALTER TABLE files
#### Description
This SQL command adds the `private` column back to the `files` table.

#### Internal Logic
- Adds a new column named `private` to the `files` table
- Sets the column type as boolean
- Makes the column NOT NULL
- Sets a default value of false

## Future Improvements
- Consider adding indexes on the `private` columns if they are frequently used in queries
- If privacy is a critical feature, consider adding a check constraint to ensure the `private` column only contains valid boolean values
- Evaluate if cascade rules are needed for related tables that might reference these `private` columns