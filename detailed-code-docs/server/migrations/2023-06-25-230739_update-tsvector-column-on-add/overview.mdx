---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for managing changes related to a tsvector column in the `card_metadata` table. The scripts handle both the upgrade and rollback of these changes, ensuring consistent database schema management.

## What does it do?
These SQL scripts automate the process of updating the database schema to include functionality for full-text search on the `card_metadata` table. 

The `up.sql` script creates a function (`update_tsvector()`) and a trigger (`update_tsvector_trigger`) in the database. The function takes the text content of a card, processes it into a special format called a tsvector, and updates the `card_metadata_tsvector` column. The trigger ensures that every time a new card is added to the database, this function is automatically called, keeping the search index up-to-date.

The `down.sql` script reverses these changes. It removes the trigger and the function, effectively disabling the automatic updating of the tsvector column. This is essential for reverting the database to a previous state if needed. 
