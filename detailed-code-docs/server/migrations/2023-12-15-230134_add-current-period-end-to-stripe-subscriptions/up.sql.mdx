---
title: "up.sql"
---

## High-level description
This SQL migration script adds a new column `current_period_end` to the `stripe_subscriptions` table. The column is designed to store the timestamp of when the current subscription period ends.

## Table of contents
- ALTER TABLE statement
- ADD COLUMN statement

## Symbols

### ALTER TABLE stripe_subscriptions
#### Description
This SQL command modifies the structure of the existing `stripe_subscriptions` table.

### ADD COLUMN current_period_end TIMESTAMP DEFAULT NULL
#### Description
This clause adds a new column named `current_period_end` to the `stripe_subscriptions` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| current_period_end | TIMESTAMP | Stores the end time of the current subscription period |

#### Internal Logic
- The new column is of type TIMESTAMP, which can store both date and time information.
- The DEFAULT NULL clause allows this column to have NULL values if no specific value is provided during insertion or update operations.

## Side Effects
- This migration will modify the structure of the `stripe_subscriptions` table by adding a new column.
- Existing rows in the table will have NULL values for the new `current_period_end` column unless updated explicitly.

## Future Improvements
- Consider adding a corresponding DOWN migration to reverse this change if needed.
- If the `current_period_end` should never be NULL for active subscriptions, consider adding a NOT NULL constraint in a future migration after populating the data.
- Depending on the application's needs, you might want to add an index on this column if it will be frequently used in WHERE clauses or JOIN conditions.