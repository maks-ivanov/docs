---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made to the `events` table, specifically undoing the replacement of 'card_' with 'chunk_' in the `event_type` column.

## Table of contents
- UPDATE statement for reverting event_type changes

## Symbols

### UPDATE statement
#### Description
This SQL UPDATE statement modifies the `events` table, replacing 'chunk_' with 'card_' in the `event_type` column for all rows where `event_type` starts with 'chunk_'.

#### Internal Logic
1. The UPDATE statement targets the `events` table.
2. It uses the REPLACE function to substitute 'chunk_' with 'card_' in the `event_type` column.
3. The WHERE clause filters the rows to be updated, selecting only those where `event_type` starts with 'chunk_'.

## Side Effects
This migration will modify existing data in the `events` table, potentially affecting any queries or applications that rely on the 'chunk_' prefix in the `event_type` column.

## Future Improvements
- Consider adding a safety check to ensure that only intended rows are affected, such as verifying the total count of rows to be updated before executing the UPDATE statement.
- If there's a possibility of partial execution, implement a transaction to ensure atomicity of the operation.