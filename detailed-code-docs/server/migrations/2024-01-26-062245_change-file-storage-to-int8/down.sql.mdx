---
title: "down.sql"
---

## High-level description
This SQL migration script reverts changes made to the `stripe_plans` and `organization_usage_counts` tables, specifically changing the data type of the `file_storage` column from BIGINT (int8) back to INTEGER.

## Table of contents
- Alter `stripe_plans` table
- Alter `organization_usage_counts` table

## Symbols

### ALTER TABLE stripe_plans
#### Description
This SQL command modifies the `stripe_plans` table by changing the data type of the `file_storage` column from BIGINT (int8) to INTEGER.

#### Internal Logic
The command uses the `ALTER COLUMN` clause to change the data type of the `file_storage` column to INTEGER.

### ALTER TABLE organization_usage_counts
#### Description
This SQL command modifies the `organization_usage_counts` table by changing the data type of the `file_storage` column from BIGINT (int8) to INTEGER.

#### Internal Logic
The command uses the `ALTER COLUMN` clause to change the data type of the `file_storage` column to INTEGER.

## Side Effects
- The `file_storage` column in both `stripe_plans` and `organization_usage_counts` tables will have a reduced range of possible values after this migration.
- Any existing data in these columns that exceeds the INTEGER range may be truncated or cause errors during the migration.

## Performance Considerations
Changing column types on large tables can be a time-consuming operation and may lock the tables during the process, potentially impacting database performance temporarily.

## Future Improvements
- Consider adding a check to ensure no data loss occurs when downsizing the column from BIGINT to INTEGER.
- Implement a data validation step before executing the migration to identify any values that might be affected by the change.