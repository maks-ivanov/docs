---
title: "up.sql"
---

## High-level description
This SQL migration script alters the data type of the `file_storage` column in two tables, `stripe_plans` and `organization_usage_counts`, changing it from its current type to BIGINT (64-bit integer).

## Table of contents
- ALTER TABLE statement for stripe_plans
- ALTER TABLE statement for organization_usage_counts

## Symbols

### ALTER TABLE stripe_plans
#### Description
This SQL statement modifies the `stripe_plans` table by changing the data type of the `file_storage` column to BIGINT.

#### Internal Logic
The statement uses the `ALTER TABLE` command to modify the `stripe_plans` table. It then uses the `ALTER COLUMN` clause to change the data type of the `file_storage` column to BIGINT.

### ALTER TABLE organization_usage_counts
#### Description
This SQL statement modifies the `organization_usage_counts` table by changing the data type of the `file_storage` column to BIGINT.

#### Internal Logic
Similar to the previous statement, this one uses the `ALTER TABLE` command to modify the `organization_usage_counts` table. It then uses the `ALTER COLUMN` clause to change the data type of the `file_storage` column to BIGINT.

## Side Effects
- The data type of the `file_storage` column in both `stripe_plans` and `organization_usage_counts` tables will be changed to BIGINT.
- This change may affect the range of values that can be stored in these columns, allowing for larger numbers to be stored.
- Existing data in these columns will be converted to the new data type, which could potentially lead to data loss or truncation if the current values exceed the range of BIGINT.

## Performance Considerations
- Changing the data type of a column in large tables may take some time and could temporarily lock the tables, potentially affecting database performance during the migration.
- After the migration, queries involving these columns might perform differently due to the change in data type.

## Future Improvements
- Consider adding a check constraint to ensure that the `file_storage` values remain within an expected range, even with the increased capacity of BIGINT.
- If this change is part of a larger update, future migrations might need to update application code or other database objects (views, functions, etc.) that interact with these columns to ensure compatibility with the new data type.