---
title: "up.sql"
---

## High-level description
This SQL migration script adds a new column called 'size' to the 'files' table. The column is designed to store file sizes as large integers (bigint) with a default value of 0 and a NOT NULL constraint.

## Table of contents
- ALTER TABLE statement
- Column addition

## Symbols

### ALTER TABLE files
#### Description
This SQL command modifies the structure of the existing 'files' table by adding a new column.

#### Internal Logic
The command targets the 'files' table and uses the ADD COLUMN clause to include a new column in the table structure.

### ADD COLUMN size bigint NOT NULL DEFAULT 0
#### Description
This clause specifies the details of the new column being added to the 'files' table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| size | bigint | The name and data type of the new column |

#### Internal Logic
- Sets the column name as 'size'
- Defines the data type as 'bigint' (large integer)
- Applies a NOT NULL constraint, ensuring the column always has a value
- Sets a DEFAULT value of 0 for this column

## Side Effects
- This migration will modify the structure of the 'files' table in the database.
- Existing rows in the 'files' table will have the 'size' column added with a default value of 0.
- Future insertions into the 'files' table will require a value for the 'size' column (or will use the default value of 0).

## Performance Considerations
- Adding a column to an existing table can be a potentially time-consuming operation, especially if the table contains a large number of rows.
- The use of 'bigint' allows for storing very large file sizes (up to 8 bytes or 64 bits), which is suitable for handling files of various sizes, including very large ones.

## Future Improvements
- Consider adding an index on the 'size' column if it will be frequently used in queries, especially for filtering or sorting operations.
- If file sizes are always expected to be positive, consider adding a CHECK constraint to ensure 'size' is always greater than or equal to 0.