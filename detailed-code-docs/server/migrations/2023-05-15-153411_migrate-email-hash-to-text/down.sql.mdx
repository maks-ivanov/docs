---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made to the `users` table, specifically altering the data types of the `email` and `hash` columns back to their previous state.

## Table of contents
- ALTER TABLE statement
  - Modify `email` column
  - Modify `hash` column

## Symbols

### ALTER TABLE users
#### Description
This SQL command modifies the structure of the `users` table, specifically changing the data types of two columns.

#### Internal Logic
1. Alters the `email` column to change its data type to VARCHAR(100).
2. Alters the `hash` column to change its data type to VARCHAR(122).

## Side Effects
- This migration will change the data types of the `email` and `hash` columns in the `users` table, which may affect how data is stored and retrieved.
- Existing data in these columns might be truncated if it exceeds the new length limits.

## Performance Considerations
- Changing column data types on a large table can be a time-consuming operation and may lock the table during the migration.
- The performance impact depends on the size of the `users` table and the amount of data in the affected columns.

## Future Improvements
- Consider adding a check to ensure data integrity before applying the migration, especially if there's a risk of data truncation.
- If the original migration (`up.sql`) included any data transformations, this down migration might need to include reverse transformations to ensure data consistency.