---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert the changes made in the corresponding `up.sql` file. It removes the `deleted` column from the `datasets` table and drops the associated index, effectively undoing a soft delete implementation.

## Table of contents
- Remove `deleted` column from `datasets` table
- Drop index on `deleted` column

## Symbols

### ALTER TABLE datasets DROP COLUMN IF EXISTS deleted;
#### Description
This SQL command removes the `deleted` column from the `datasets` table if it exists.

#### Internal Logic
1. Checks if the `deleted` column exists in the `datasets` table
2. If the column exists, it is removed from the table structure

### DROP INDEX IF EXISTS idx_dataset_deleted;
#### Description
This SQL command drops the index named `idx_dataset_deleted` if it exists.

#### Internal Logic
1. Checks if the index `idx_dataset_deleted` exists
2. If the index exists, it is removed from the database

## Future Improvements
- Consider adding a comment explaining the purpose of this migration and its relationship to the corresponding `up.sql` file.
- If there are any data dependencies or constraints related to the `deleted` column, consider addressing them in this migration script.
- Ensure that any application code relying on the `deleted` column or the `idx_dataset_deleted` index is updated accordingly after running this migration.