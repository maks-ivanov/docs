---
title: "down.sql"
---

## High-level description
This SQL migration file is designed to revert the changes made in the corresponding `up.sql` file. It removes specific indexes from the `datasets` and `stripe_subscriptions` tables in the database.

## Table of contents
- Removal of index from `datasets` table
- Removal of index from `stripe_subscriptions` table

## Symbols

### ALTER TABLE datasets DROP INDEX datasets_organization_id_index
#### Description
This SQL command removes the index named `datasets_organization_id_index` from the `datasets` table.

#### Internal Logic
The command uses the `ALTER TABLE` statement to modify the `datasets` table structure by dropping the specified index.

### ALTER TABLE stripe_subscriptions DROP INDEX stripe_subscriptions_plan_id_index
#### Description
This SQL command removes the index named `stripe_subscriptions_plan_id_index` from the `stripe_subscriptions` table.

#### Internal Logic
The command uses the `ALTER TABLE` statement to modify the `stripe_subscriptions` table structure by dropping the specified index.

## Side Effects
- Removing these indexes may impact query performance for operations that previously utilized these indexes.
- The database schema will be modified, reverting it to the state before the corresponding `up.sql` migration was applied.

## Performance Considerations
Removing indexes can have performance implications:
1. Queries that previously used these indexes may become slower, especially for operations involving `organization_id` in the `datasets` table and `plan_id` in the `stripe_subscriptions` table.
2. The removal of indexes might slightly improve write performance on these tables, as the database no longer needs to update the index structures during insert, update, or delete operations.

## Future Improvements
- Before applying this migration in a production environment, it's crucial to assess the impact on query performance and ensure that removing these indexes doesn't negatively affect critical operations.
- Consider adding comments to explain why these indexes are being removed and any potential consequences.
- If these indexes are frequently added and removed, it might be worth investigating whether they should be permanent or if the database schema needs to be optimized differently.