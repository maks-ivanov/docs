---
title: "down.sql"
---

## High-level description
This SQL migration script reverts the changes made in the corresponding `up.sql` file. It modifies the foreign key constraint on the `user_organizations` table, removing the cascade delete behavior for the `organization_id` column.

## Table of contents
- Remove existing foreign key constraint
- Add new foreign key constraint without cascade delete

## Symbols

### ALTER TABLE user_organizations DROP CONSTRAINT
#### Description
This SQL command removes the existing foreign key constraint named `user_organizations_organization_id_fkey` from the `user_organizations` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user_organizations | Table | The table from which the constraint is being removed |
| user_organizations_organization_id_fkey | Constraint | The name of the foreign key constraint being dropped |

### ALTER TABLE user_organizations ADD CONSTRAINT
#### Description
This SQL command adds a new foreign key constraint named `fk_organization_id` to the `user_organizations` table, linking the `organization_id` column to the `id` column in the `organizations` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user_organizations | Table | The table to which the constraint is being added |
| fk_organization_id | Constraint | The name of the new foreign key constraint |
| organization_id | Column | The column in `user_organizations` that references `organizations.id` |
| organizations | Table | The referenced table |
| id | Column | The referenced column in the `organizations` table |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| user_organizations table | The table being modified |
| organizations table | The referenced table in the foreign key relationship |

## Future Improvements
- Consider adding a comment explaining why the cascade delete behavior was removed, if there's a specific reason for this change.
- Ensure that any application code that relies on the cascade delete behavior is updated to handle organization deletions manually if necessary.