---
title: "Overview"
---

## High-level description
This directory contains database migration scripts related to marking duplicate rows in the `search_queries` table. It includes two SQL scripts: `up.sql` for applying the migration and `down.sql` for reverting it.

## What does it do?
The scripts in this directory manage the lifecycle of the `is_duplicate` column in the `search_queries` table. 

1. **Applying the migration (`up.sql`):**
    - Adds a new column named `is_duplicate` to the `search_queries` table if it doesn't already exist.
    - The column is of type `UInt8` and defaults to 0, indicating that rows are not duplicates by default.

2. **Reverting the migration (`down.sql`):**
    - Removes the `is_duplicate` column from the `search_queries` table if it exists.

These scripts are likely part of a larger migration system that manages database schema changes over time.

## Key Files
- **up.sql:** Contains the SQL statements to apply the migration, adding the `is_duplicate` column to the `search_queries` table.
```sql
ALTER TABLE search_queries ADD COLUMN IF NOT EXISTS is_duplicate UInt8 DEFAULT 0
```

- **down.sql:** Contains the SQL statements to revert the migration, dropping the `is_duplicate` column from the `search_queries` table.
```sql
ALTER TABLE search_queries DROP COLUMN IF EXISTS is_duplicate
```
