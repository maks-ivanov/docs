---
title: "up.sql"
---

## High-level description
This SQL script removes the Time-To-Live (TTL) property from five specific tables in a database. The purpose is to disable automatic data expiration for these tables, allowing the data to persist indefinitely.

## Table of contents
- Remove TTL from dataset_events table
- Remove TTL from search_queries table
- Remove TTL from rag_queries table
- Remove TTL from recommendations table
- Remove TTL from ctr_data table

## Symbols

### `ALTER TABLE dataset_events REMOVE TTL;`
#### Description
This SQL statement removes the TTL property from the `dataset_events` table.

#### Internal Logic
The `ALTER TABLE` command is used to modify the table structure, and `REMOVE TTL` specifically removes the Time-To-Live property that was previously set on this table.

### `ALTER TABLE search_queries REMOVE TTL;`
#### Description
This SQL statement removes the TTL property from the `search_queries` table.

#### Internal Logic
Similar to the previous statement, this command alters the `search_queries` table to remove its TTL property.

### `ALTER TABLE rag_queries REMOVE TTL;`
#### Description
This SQL statement removes the TTL property from the `rag_queries` table.

#### Internal Logic
This command alters the `rag_queries` table to remove its TTL property.

### `ALTER TABLE recommendations REMOVE TTL;`
#### Description
This SQL statement removes the TTL property from the `recommendations` table.

#### Internal Logic
This command alters the `recommendations` table to remove its TTL property.

### `ALTER TABLE ctr_data REMOVE TTL;`
#### Description
This SQL statement removes the TTL property from the `ctr_data` table.

#### Internal Logic
This command alters the `ctr_data` table to remove its TTL property.

## Side Effects
- Data in these tables will no longer automatically expire or be deleted based on a time condition.
- This may lead to increased storage usage over time as data accumulates without automatic cleanup.
- Queries on these tables may become slower over time if the amount of data grows significantly.

## Future Improvements
- Implement a manual data retention policy or scheduled cleanup jobs to manage data growth in these tables.
- Consider adding monitoring or alerts for table sizes to ensure they don't grow uncontrollably.
- Evaluate the need for partitioning or archiving strategies for these tables if they are expected to contain large amounts of historical data.