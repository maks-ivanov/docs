---
title: "Overview"
---

## High-level description

The directory contains a suite of test scripts designed to validate various components of the `marimo` library, focusing on data handling and visualization functionalities. The tests cover a range of features, including chart generation, SQL query extraction, dataset updates, column previews, and data series summarization. Each test script is tailored to verify specific functions or classes within the `marimo` library, ensuring they perform as expected under different conditions and with various data inputs.

## What does it do?

The test scripts in this directory perform the following workflows:

1. **Chart Generation Tests**: These tests validate the functionality of chart-building components, ensuring that Altair chart code and JSON representations are generated correctly. They check for syntax correctness, handle special characters in column names, and verify integration with optional dependencies like `pandas` and `altair`.

2. **Dataset Update Detection**: This test script checks if SQL queries contain statements that would update a data source, such as `ATTACH`, `DETACH`, `ALTER`, or `CREATE`. It ensures that the `has_updates_to_datasource` function correctly identifies such queries.

3. **Column Preview Generation**: The tests verify that the `get_column_preview` function generates accurate previews for dataset columns, including charts and summaries. They ensure the function works correctly with different data types and under various conditions, such as dependency availability and operating system differences.

4. **Data Series Summarization**: These tests ensure that functions summarizing numeric, categorical, and date series provide accurate information. They validate the handling of data from both Pandas and Polars data structures, checking for correct identification of series properties like minimum, maximum, and unique categories.

5. **SQL Query Extraction**: The tests for the `SQLVisitor` class ensure it accurately extracts SQL queries from Python code by parsing Abstract Syntax Trees (AST). They verify the class's ability to handle different string formats and method call structures.

## Entry points

The main files in the directory are:

- `test_charts.py`: Tests chart generation and handling of special characters in column names.
- `test_get_datasets.py`: Verifies the detection of SQL queries that update data sources.
- `test_preview_column.py`: Tests the generation of column previews, including charts and summaries.
- `test_series.py`: Validates the summarization of numeric, categorical, and date series.
- `test_sql_visitor.py`: Tests the extraction of SQL queries from Python code using AST parsing.

These files are organized to test specific functionalities of the `marimo` library, with each script focusing on a particular aspect of data handling or visualization. The tests are structured using the `pytest` framework, allowing for parameterized testing and conditional execution based on dependencies and environment conditions.