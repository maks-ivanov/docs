---
title: "test_disposable.py"
---

## High-level description
The target file `tests/_utils/test_disposable.py` contains unit tests for the `Disposable` class, which is defined in the related file `marimo/_utils/disposable.py`. The `Disposable` class is designed to manage resources that need to be explicitly disposed of, ensuring that a specified action is executed when the resource is disposed.

## Code Structure
The target file consists of two test functions: `test_disposable` and `test_disposable_empty`. These functions test the behavior of the `Disposable` class, specifically its ability to execute an action upon disposal and to track its disposed state.

## References
- `Disposable` class from `marimo/_utils/disposable.py`: This class is the main subject of the tests in the target file.

## Symbols

### `test_disposable`
#### Description
This test function verifies that a `Disposable` object correctly executes a given action when disposed and accurately reflects its disposed state.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not take any inputs. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not return any outputs. |

#### Internal Logic
1. A boolean variable `was_action_called` is initialized to `False`.
2. An `action` function is defined, which sets `was_action_called` to `True`.
3. A `Disposable` object is created with the `action` function.
4. The test asserts that the `Disposable` object is not disposed initially.
5. The `dispose` method is called on the `Disposable` object.
6. The test asserts that `was_action_called` is `True`, indicating the action was executed.
7. The test asserts that the `Disposable` object is now disposed.

### `test_disposable_empty`
#### Description
This test function checks the behavior of a `Disposable` object created using the `empty` static method, which should not perform any action upon disposal but should still track its disposed state.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not take any inputs. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not return any outputs. |

#### Internal Logic
1. A `Disposable` object is created using the `empty` static method.
2. The test asserts that the `Disposable` object is not disposed initially.
3. The `dispose` method is called on the `Disposable` object.
4. The test asserts that the `Disposable` object is now disposed.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `marimo._utils.disposable.Disposable` | Provides the `Disposable` class that is being tested. |

## Error Handling
The test functions do not include explicit error handling. They rely on assertions to validate the expected behavior of the `Disposable` class.

## Logging
There is no logging implemented in the test functions.

## TODOs
There are no TODOs or notes left in the code.