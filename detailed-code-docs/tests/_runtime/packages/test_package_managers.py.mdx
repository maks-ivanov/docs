---
title: "test_package_managers.py"
---

## High-level description

The target file `test_package_managers.py` is a test suite designed to verify the functionality of the `create_package_manager` function from the `marimo` package. It ensures that the correct package manager class is instantiated based on the input string and that an appropriate error is raised for unknown package manager names.

## Code Structure

The main function in this test file is `test_create_package_managers`, which tests the `create_package_manager` function. This function is responsible for returning an instance of a specific package manager class based on the provided name. The test checks for both valid and invalid inputs to ensure the function behaves as expected.

## References

- `create_package_manager`: This function is imported from `marimo._runtime.packages.package_managers` and is the primary function being tested.
- `MicropipPackageManager`, `PipPackageManager`, `RyePackageManager`, `UvPackageManager`: These are the package manager classes imported from `marimo._runtime.packages.pypi_package_manager` and are used to verify the correct instantiation of package managers.

## Symbols

### `test_create_package_managers`
#### Description
This function tests the `create_package_manager` function to ensure it returns the correct package manager instance for known package manager names and raises an error for unknown names.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- The function uses `assert` statements to check if `create_package_manager` returns an instance of the expected package manager class for each known package manager name: "pip", "micropip", "rye", and "uv".
- It uses `pytest.raises` to verify that a `RuntimeError` is raised when an unknown package manager name, "foobar", is passed to `create_package_manager`.
- The error message is checked to ensure it contains the phrase "Unknown package manager".

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `pytest` | Used for testing, specifically to check for exceptions and assertions. |

## Error Handling

The test function checks for a `RuntimeError` when an unknown package manager name is provided. This ensures that the `create_package_manager` function correctly handles invalid input by raising an appropriate error.

## Logging

There is no explicit logging in this test file. The focus is on assertions and exception handling to verify the behavior of the `create_package_manager` function.

## TODOs

There are no TODOs or notes left in the code.