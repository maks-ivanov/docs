---
title: "test_functions.py"
---

## High-level description

The target file `tests/_runtime/test_functions.py` contains unit tests for the `Function`, `FunctionNamespace`, and `FunctionRegistry` classes from the `marimo._runtime.functions` module. These tests verify the initialization, invocation, and management of functions within namespaces and registries, ensuring that the classes behave as expected in various scenarios.

## Code Structure

The main symbols in the code are interconnected as follows:
- `Function`: Represents a callable entity with a name, argument class, and a function implementation.
- `FunctionNamespace`: Manages a collection of `Function` instances within a specific namespace.
- `FunctionRegistry`: Manages multiple `FunctionNamespace` instances, allowing for registration, retrieval, and deletion of functions across namespaces.

## Symbols

### `Args`
#### Description
A simple data class used to define the structure of arguments passed to functions in the tests. It contains a single integer field `value`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | int | An integer value used in function operations. |

#### Outputs
N/A

### `test_function_init`
#### Description
Tests the initialization of a `Function` instance, ensuring that its properties are correctly set.

#### Inputs
None

#### Outputs
None

### `test_function_call`
#### Description
Tests the synchronous invocation of a `Function` instance, verifying that it correctly processes input arguments and returns the expected result.

#### Inputs
None

#### Outputs
None

### `test_function_async_call`
#### Description
Tests the asynchronous invocation of a `Function` instance, ensuring that it handles asynchronous functions and returns the expected result.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- Defines an asynchronous function `async_function` that increments the `value` field of `Args`.
- Creates a `Function` instance with `async_function`.
- Invokes the function asynchronously and asserts the result.

### `test_function_namespace`
#### Description
Tests the `FunctionNamespace` class, verifying that functions can be added, retrieved, and handled correctly within a namespace.

#### Inputs
None

#### Outputs
None

### `test_function_registry`
#### Description
Tests the `FunctionRegistry` class, ensuring that functions can be registered, retrieved, and deleted across different namespaces.

#### Inputs
None

#### Outputs
None

## References

- `Function`: The primary class being tested, representing a callable entity.
- `FunctionNamespace`: A class for managing functions within a namespace.
- `FunctionRegistry`: A class for managing multiple namespaces of functions.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `dataclasses` | Used to define simple data structures for function arguments. |

## Error Handling

The tests implicitly handle errors by using assertions to verify expected outcomes. If an assertion fails, it indicates a discrepancy between the expected and actual behavior of the code being tested.

## Logging

No explicit logging is implemented in the test code. The tests rely on assertions to validate behavior.

## TODOs

No TODOs or notes are present in the code.