---
title: "Overview"
---

## High-level description

The `tests/_runtime` directory is a comprehensive suite of tests designed to validate various components and functionalities within the `marimo` library's runtime environment. This directory includes tests for output handling, package management, module reloading, cell execution, state management, error tracing, and more. The tests ensure that the `marimo` library behaves as expected under different scenarios, such as handling exceptions, managing virtual files, and executing code cells with dependencies.

## What does it do?

The tests in this directory cover a wide range of functionalities:

1. **Output Handling**: Tests verify that the `marimo` library correctly handles output, including capturing and redirecting standard output and error streams, and managing nested outputs.

2. **Package Management**: Tests ensure that the package management system functions correctly, including module registration, package manager instantiation, and environment isolation checks.

3. **Module Reloading**: Tests validate the module reloading process, ensuring that changes to Python modules are detected and handled correctly without restarting the application.

4. **Cell Execution**: Tests focus on the execution of code cells, capturing output, managing exceptions, and ensuring correct control flow within the `marimo` runtime.

5. **State Management**: Tests verify the functionality of setting and retrieving state values, handling state updates, and ensuring correct state transitions.

6. **Error Tracing**: Tests ensure that error messages and stack traces are correctly captured and formatted when scripts or applications encounter errors.

7. **Virtual File Management**: Tests focus on the creation, deletion, caching, and reference counting of virtual files, ensuring correct handling of these operations.

8. **Runtime Context**: Tests validate the installation and state of the runtime context, ensuring that the code is running in the correct environment.

9. **Control Flow**: Tests verify the behavior of the `marimo` runtime's control flow, specifically focusing on the `stop` functionality to conditionally halt execution.

10. **Copy Mechanisms**: Tests ensure that various copy mechanisms, such as `shadow_wrap`, `zero_copy`, and `shallow_copy`, behave as expected in terms of object immutability and reference handling.

11. **Dataflow Management**: Tests verify the functionality of the `DirectedGraph` class, ensuring correct handling of dependencies between computational cells.

12. **Function Management**: Tests validate the initialization, invocation, and management of functions within namespaces and registries.

13. **Debugger Integration**: Tests ensure the integration of a custom debugger, `MarimoPdb`, within the runtime environment.

14. **Micropip Functionality**: Tests verify the behavior of the `micropip` module, particularly in environments where it is not natively supported.

15. **Query Parameters and CLI Arguments**: Tests validate the management of query parameters and command-line arguments, ensuring correct operations like getting, setting, appending, and deleting parameters.

Overall, the tests in this directory ensure that the `marimo` library's runtime environment is robust, reliable, and capable of handling a wide range of scenarios and edge cases.