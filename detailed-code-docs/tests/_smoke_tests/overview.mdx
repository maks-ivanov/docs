---
title: "Overview"
---

## High-level description

The `tests/_smoke_tests` directory is designed to facilitate smoke testing for the Marimo project. Smoke testing is a preliminary testing process to check the basic functionality of scripts and ensure they run without critical errors. This directory contains configuration files and scripts that automate the execution of various Python scripts, verifying their behavior and handling expected errors. The main components include a configuration file (`config.yml`) that categorizes scripts based on their testing requirements, a script (`run_all.py`) that executes these tests asynchronously, and a test suite (`test_run_as_script.py`) that verifies the execution of tutorial scripts.

## What does it do?

The smoke testing process in this directory is structured to ensure that various Python scripts within the Marimo project execute correctly. Here's how it works:

1. **Configuration**: The `config.yml` file categorizes scripts into different sections based on their input requirements, expected errors, and whether they should be skipped. This configuration guides the testing framework on how to handle each script.

2. **Test Execution**: The `run_all.py` script is responsible for executing the smoke tests. It reads the configuration file to determine which scripts to run and how to handle expected failures. The script uses asynchronous programming to run multiple scripts concurrently, improving efficiency.

3. **Tutorial Verification**: The `test_run_as_script.py` file contains a test suite that verifies the execution of various tutorial scripts from the Marimo library. It uses the `pytest` framework to run these scripts in a temporary directory and checks for expected outcomes, such as successful execution or specific error messages.

Overall, the directory automates the process of running and verifying scripts, ensuring that they function as expected and identifying any issues that need attention.

## Entry points

The main files in this directory are:

- **`config.yml`**: This file provides the configuration settings for the smoke tests, categorizing scripts based on their testing requirements and expected outcomes.

- **`run_all.py`**: This script is the primary entry point for executing smoke tests. It reads the configuration file and runs the tests asynchronously, handling expected errors and logging results.

- **`test_run_as_script.py`**: This test suite verifies the execution of tutorial scripts from the Marimo library, ensuring they run correctly as standalone Python scripts.

## Dependencies

The directory relies on several external libraries to facilitate testing:

- **`asyncio`**: Used in `run_all.py` to provide asynchronous I/O capabilities, allowing multiple scripts to be executed concurrently.

- **`pytest`**: Utilized in both `run_all.py` and `test_run_as_script.py` for structuring and running test cases, as well as handling assertions and failures.

- **`yaml`**: Employed in `run_all.py` to load configuration settings from the `config.yml` file.

- **`subprocess`**: Used in `test_run_as_script.py` to execute tutorial scripts as standalone Python scripts.

These dependencies are chosen to streamline the testing process, enabling efficient execution and validation of scripts.