---
title: "Overview"
---

## High-level description

The `tests/_config` directory contains unit tests for the configuration management functionalities of the Marimo application. This includes testing both the configuration settings themselves and the management of these configurations. The directory is divided into two main test files: `test_config.py` and `test_manager.py`. 

- `test_config.py` focuses on testing the configuration settings, ensuring that configurations can be correctly merged, overridden, and manipulated, including handling sensitive information like API keys.
- `test_manager.py` tests the `UserConfigManager` class, which is responsible for saving and retrieving user configurations, handling secrets securely, and merging configurations with default settings.

## What does it do?

The tests in this directory ensure that the configuration management system of the Marimo application works as expected. They validate that configurations can be merged and overridden correctly, sensitive information is handled securely, and unknown configuration keys are managed gracefully. 

- **Configuration Tests (`test_config.py`)**: These tests check that configuration settings can be merged and overridden correctly. They also ensure that sensitive information, such as API keys, is masked and that secret placeholders can be removed. This ensures that the application can handle configuration changes without exposing sensitive data.

- **Configuration Manager Tests (`test_manager.py`)**: These tests focus on the `UserConfigManager` class, which manages user configurations. The tests ensure that configurations can be saved and retrieved correctly, secrets are handled securely, and configurations are merged with default settings. This ensures that users can customize their settings without compromising security.

## Entry points

The main files in this directory are `test_config.py` and `test_manager.py`. 

- `test_config.py` is organized around functions that test various aspects of the configuration management system, such as merging configurations and handling secrets.
- `test_manager.py` is structured as a class (`TestUserConfigManager`) that contains methods to test the `UserConfigManager` class, using the `unittest` framework and mocking dependencies to isolate tests.

## Dependencies

The tests in this directory rely on several external libraries:

- `unittest`: Provides the testing framework for writing and running tests.
- `unittest.mock`: Used to mock dependencies and isolate tests, ensuring that the tests focus on the functionality being tested without interference from external factors.
- `tomlkit`: Used for serializing configurations to a file, though it is mocked in the tests to avoid actual file operations.

Additionally, the tests depend on the `marimo._config.config` module, which provides configuration management utilities and constants used in the tests.