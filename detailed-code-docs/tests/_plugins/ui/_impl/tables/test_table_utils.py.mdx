---
title: "test_table_utils.py"
---

## High-level description

The target file `test_table_utils.py` contains unit tests for utility functions and classes related to table formatting and management within a UI plugin system. It tests the functionality of determining if an object is "dataframe-like", the behavior of a `DataFrameProtocolTableManager` when initialized with a "dataframe-like" object, and the formatting of values, rows, and columns using specified format mappings.

## Code Structure

The main symbols in the code are interconnected as follows:
- The `Fake`, `FakeReturningCallable`, and `Real` classes are used to simulate different types of objects to test the `is_dataframe_like` function.
- The `test_is_dataframe_like` function tests the `is_dataframe_like` function from the `types` module.
- The `test_df_protocol_manager_throws` function tests the `DataFrameProtocolTableManager` class from the `df_protocol_table` module.
- The `test_format_value`, `test_format_row`, and `test_format_column` functions test the `format_value`, `format_row`, and `format_column` functions from the `format` module, respectively.

## References

- `is_dataframe_like` from `types.py`: Used to determine if an object can be considered "dataframe-like".
- `DataFrameProtocolTableManager` from `df_protocol_table.py`: A class that manages tables using a dataframe protocol.
- `format_value`, `format_row`, `format_column` from `format.py`: Functions used to format individual values, rows, and columns based on a given format mapping.

## Symbols

### `Fake`
#### Description
A class used to simulate an object that does not have a `__dataframe__` method. It returns a placeholder for any attribute accessed.

### `FakeReturningCallable`
#### Description
A class similar to `Fake`, but returns a callable (lambda function) for any attribute accessed.

### `Real`
#### Description
A class that simulates an object with a `__dataframe__` method, returning a placeholder.

### `test_is_dataframe_like`
#### Description
Tests the `is_dataframe_like` function to ensure it correctly identifies objects that are "dataframe-like".

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Uses hardcoded test cases within the function |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Asserts the expected boolean result for each test case |

### `test_df_protocol_manager_throws`
#### Description
Tests that the `DataFrameProtocolTableManager` raises a `ValueError` when initialized with an object that does not fully implement the dataframe protocol.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Uses a `Real` object as input |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Asserts that a `ValueError` is raised |

### `test_format_value`
#### Description
Tests the `format_value` function to ensure it correctly formats values based on a given format mapping.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Uses hardcoded test cases within the function |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Asserts the expected formatted value for each test case |

### `test_format_row`
#### Description
Tests the `format_row` function to ensure it correctly formats rows based on a given format mapping.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Uses hardcoded test cases within the function |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Asserts the expected formatted row for each test case |

### `test_format_column`
#### Description
Tests the `format_column` function to ensure it correctly formats columns based on a given format mapping.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Uses hardcoded test cases within the function |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Asserts the expected formatted column for each test case |

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `pytest` | Used for running the unit tests and handling assertions |

## Error Handling

The `test_df_protocol_manager_throws` function specifically tests for error handling by asserting that a `ValueError` is raised when the `DataFrameProtocolTableManager` is initialized with an inappropriate object.

## Logging

No logging mechanisms are implemented in this test file.