---
title: "Overview"
---

## High-level description

The `tests/_plugins/stateless` directory contains unit tests for various components of the Marimo framework, specifically focusing on the stateless plugins. These tests ensure that the components behave as expected under different conditions and inputs. The main components tested include progress indicators, flexbox-based layout functions, icon rendering, image handling, lazy evaluation, and route management. Each test file targets a specific functionality within the Marimo framework, verifying its correctness and integration.

## What does it do?

The tests in this directory validate the behavior of several stateless components in the Marimo framework:

1. **Progress Indicators**: Tests ensure that the progress indicator system initializes correctly, updates progress accurately, and handles closed indicators properly.

2. **Flexbox Layouts**: Tests verify that the `vstack` and `hstack` functions generate the correct HTML for vertically and horizontally stacked items, respectively, with various alignment and spacing configurations.

3. **Icon Rendering**: Tests check that the `icon` function produces the correct HTML representation of icons with different attributes like size, color, and transformations.

4. **Image Handling**: Tests cover the `image` function's ability to process different input types, such as URLs, byte streams, and local files, ensuring correct HTML output and integration with execution contexts.

5. **Lazy Evaluation**: Tests validate the `lazy` function's handling of direct values, synchronous functions, and asynchronous functions, ensuring correct HTML rendering.

6. **Route Management**: Tests confirm that routes are registered and executed correctly, producing the expected HTML output for both lazy and non-lazy configurations.

These tests collectively ensure that the Marimo framework's stateless components function as intended, providing reliable and predictable behavior across different scenarios.

## Entry points

The directory contains several test files, each focusing on a specific aspect of the Marimo framework:

- `test_progress.py`: Tests the progress indicator system.
- `test_flex.py`: Tests the flexbox layout functions.
- `test_icon.py`: Tests the icon rendering functionality.
- `test_image.py`: Tests the image handling capabilities.
- `test_lazy.py`: Tests the lazy evaluation feature.
- `test_routes.py`: Tests the route management system.

Each file contains test functions that are organized to cover different scenarios and inputs for the respective component being tested. The tests are structured using the `pytest` framework, with some tests utilizing asynchronous execution to simulate real-world usage.

## Dependencies

The tests rely on several dependencies to function correctly:

- `pytest`: Used for writing and running the unit tests.
- `unittest.mock`: Used to mock functions and verify their invocation in tests.
- `marimo`: The framework being tested, providing the components and functions under test.
- `gc`: Used for garbage collection in some tests to ensure a clean runtime context.
- `numpy` and `pillow`: Optional dependencies required for certain image tests involving array inputs.

These dependencies are essential for setting up the test environment, simulating execution contexts, and verifying the behavior of the Marimo framework's components.