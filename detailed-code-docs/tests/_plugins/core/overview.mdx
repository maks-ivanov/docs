---
title: "Overview"
---

## High-level description

The `tests/_plugins/core` directory contains unit tests for various components of the Marimo library, specifically focusing on JSON encoding, media handling, and web component functionalities. The tests are designed to ensure that these components behave correctly when handling different data types and scenarios. The main components tested include a custom JSON encoder, media-related functions, and web component utilities.

## What does it do?

The tests in this directory verify the functionality of several key components:

1. **JSON Encoding**: The `test_json_encoder.py` file tests the `WebComponentEncoder`, a custom JSON encoder that can handle complex data types such as those from `numpy` and `pandas`, as well as Python-specific structures like sets and dataclasses. The tests ensure that these data types are correctly serialized into JSON format.

2. **Media Handling**: The `test_media.py` file tests functions related to media processing, such as determining MIME types, converting data to data URLs, and checking if data is empty. These tests ensure that the functions can handle various input types, including strings, bytes, and file-like objects.

3. **Web Components**: The `test_web_component.py` file tests the construction and parsing of HTML components within the Marimo library. It ensures that HTML components are correctly built with proper escaping of special characters and that markdown labels are compiled accurately, especially when dealing with LaTeX content.

## Entry points

The directory contains three main test files, each focusing on a different aspect of the Marimo library:

- `test_json_encoder.py`: Tests the `WebComponentEncoder` for JSON serialization.
- `test_media.py`: Tests media-related functions such as MIME type guessing and data URL conversion.
- `test_web_component.py`: Tests the construction and parsing of web components, including HTML and markdown handling.

These files are organized to test specific functionalities, with each test function focusing on a particular feature or edge case. The tests use the `pytest` framework for execution and rely on assertions to validate expected outcomes.

## Dependencies

The tests in this directory utilize several external libraries:

- `pytest`: Used for defining and running the test cases.
- `json`: Used for encoding objects into JSON format.
- `numpy` and `pandas`: Provide numerical and data structure types for testing the JSON encoder.
- `io`: Used to create `BytesIO` objects for simulating file-like input in media tests.
- `re`: Used for regular expression operations in web component tests.

These dependencies are chosen to facilitate testing of complex data types and to simulate real-world scenarios that the Marimo library might encounter.