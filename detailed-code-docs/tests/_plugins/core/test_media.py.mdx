---
title: "test_media.py"
---

## High-level description

The target file `tests/_plugins/core/test_media.py` contains unit tests for functions in the `marimo._plugins.core.media` module. These tests verify the functionality of three main functions: `guess_mime_type`, `io_to_data_url`, and `is_data_empty`. The tests ensure that these functions behave as expected when handling different types of input data, such as strings, bytes, and file-like objects.

## Code Structure

The target file is structured with three test functions, each corresponding to a function in the `marimo._plugins.core.media` module. Each test function uses assertions to verify that the output of the function under test matches the expected result for various input scenarios.

## References

The target file references the following functions from the `marimo._plugins.core.media` module:
- `guess_mime_type`
- `io_to_data_url`
- `is_data_empty`

## Symbols

### `test_guess_mime_type`
#### Description
This function tests the `guess_mime_type` function to ensure it correctly identifies the MIME type of different input sources, including data URLs, file names, and file-like objects.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not return any value. It uses assertions to validate behavior. |

#### Internal Logic
- Asserts that `guess_mime_type` returns `None` for `None` input.
- Asserts that `guess_mime_type` correctly extracts the MIME type from a data URL.
- Asserts that `guess_mime_type` correctly guesses the MIME type from a file name.
- Asserts that `guess_mime_type` returns `None` for a `BytesIO` object without a file name.

### `test_io_to_data_url`
#### Description
This function tests the `io_to_data_url` function to ensure it correctly converts various input types into a data URL format.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not return any value. It uses assertions to validate behavior. |

#### Internal Logic
- Asserts that `io_to_data_url` returns `None` for `None` input.
- Asserts that `io_to_data_url` correctly converts a `BytesIO` object to a data URL.
- Asserts that `io_to_data_url` correctly converts a bytes object to a data URL.
- Asserts that `io_to_data_url` returns the input string unchanged if it is already a string.

### `test_is_data_empty`
#### Description
This function tests the `is_data_empty` function to ensure it correctly identifies whether various data inputs are empty.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not return any value. It uses assertions to validate behavior. |

#### Internal Logic
- Asserts that `is_data_empty` returns `True` for empty strings, bytes, and `BytesIO` objects.
- Asserts that `is_data_empty` returns `False` for non-empty strings, bytes, and `BytesIO` objects.

## Dependencies

The test file depends on the `io` module for creating `BytesIO` objects, which are used in the tests to simulate file-like input.

| Dependency | Purpose |
|:-----------|:--------|
| `io` | Used to create `BytesIO` objects for testing file-like input. |

## Error Handling

The test functions do not include explicit error handling. They rely on assertions to validate the expected behavior of the functions under test. If an assertion fails, it indicates a discrepancy between the expected and actual behavior, which is typical in unit testing.

## Logging

There is no logging implemented in the test file. The focus is on using assertions to verify the correctness of the functions.

## TODOs

There are no TODOs or notes left in the code.