---
title: "Overview"
---

## High-level description

The `tests/_plugins` directory is part of the Marimo framework's testing suite, focusing on various components and functionalities of the framework. It is organized into three main subdirectories: `core`, `stateless`, and `ui`. Each subdirectory contains unit tests targeting specific aspects of the Marimo library, ensuring that the components behave correctly under different conditions and inputs.

- The `core` subdirectory tests JSON encoding, media handling, and web component functionalities.
- The `stateless` subdirectory tests components like progress indicators, flexbox layouts, icon rendering, image handling, lazy evaluation, and route management.
- The `ui` subdirectory is further divided into `_core` and `_impl`, testing UI element registration, resolution, cloning, data transformation, table management, and integration with visualization libraries.

## What does it do?

The `tests/_plugins` directory ensures the robustness and correctness of the Marimo framework's components through comprehensive testing:

1. **Core Functionality**:
   - **JSON Encoding**: Tests verify that the custom JSON encoder can handle complex data types and serialize them into JSON format.
   - **Media Handling**: Tests ensure that media-related functions correctly process various input types and determine MIME types.
   - **Web Components**: Tests validate the construction and parsing of HTML components, ensuring proper handling of special characters and markdown content.

2. **Stateless Components**:
   - **Progress Indicators**: Tests confirm the correct initialization and updating of progress indicators.
   - **Flexbox Layouts**: Tests verify the correct HTML generation for vertically and horizontally stacked items.
   - **Icon Rendering**: Tests check the HTML representation of icons with different attributes.
   - **Image Handling**: Tests cover the processing of different input types for image functions.
   - **Lazy Evaluation**: Tests validate the handling of direct values and functions in lazy evaluation.
   - **Route Management**: Tests ensure correct registration and execution of routes.

3. **UI Components**:
   - **UI Element Registration and Resolution**: Tests ensure proper registration and management of UI elements.
   - **UI Element Cloning and Boolean Evaluation**: Tests verify distinct instances of cloned UI elements and their boolean evaluation.
   - **Data Transformation and Visualization**: Tests ensure data compatibility with visualization libraries.
   - **Dataframe Handling**: Tests validate operations on dataframes using libraries like Pandas and Polars.
   - **Table Management**: Tests ensure correct operations on tables, such as sorting and searching.
   - **UI Component Testing**: Tests verify the behavior of UI components like buttons and sliders.
   - **Integration with External Libraries**: Tests ensure correct integration with libraries like Altair for visualization.

## Entry points

The directory is organized into subdirectories, each containing test files focused on specific functionalities:

- **Core**:
  - `test_json_encoder.py`: Tests JSON serialization.
  - `test_media.py`: Tests media processing functions.
  - `test_web_component.py`: Tests HTML component construction.

- **Stateless**:
  - `test_progress.py`: Tests progress indicators.
  - `test_flex.py`: Tests flexbox layout functions.
  - `test_icon.py`: Tests icon rendering.
  - `test_image.py`: Tests image handling.
  - `test_lazy.py`: Tests lazy evaluation.
  - `test_routes.py`: Tests route management.

- **UI**:
  - `_core/test_registry.py`: Tests UI element registry.
  - `_core/test_ui_element.py`: Tests UI element functionalities.
  - `_impl`: Contains tests for data transformation, table management, and UI component behavior.

## Dependencies

The tests in the `tests/_plugins` directory rely on several external libraries:

- **`pytest`**: Used for writing and running unit tests.
- **`json`, `numpy`, `pandas`**: Used for testing JSON encoding and data handling.
- **`io`, `unittest.mock`, `gc`**: Used for simulating file-like input and managing runtime contexts.
- **`marimo`**: The framework being tested, providing components and functions under test.
- **`pillow`**: Used in image tests for handling array inputs.
- **`contextlib.redirect_stderr`**: Used to capture standard error output in UI tests.

These dependencies facilitate testing of complex data types, simulate real-world scenarios, and ensure the correct execution of tests.