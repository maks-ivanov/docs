---
title: "test_data.py"
---

## High-level description

The target file `tests/_output/test_data.py` contains a set of unit tests designed to verify the functionality of the `marimo._output.data.data` module. These tests ensure that various types of content (HTML, plain text, JSON, and CSV) are correctly processed into virtual files with appropriate filenames and data URLs encoded in base64.

## Code Structure

The file consists of four test functions, each testing a different type of content. These functions utilize the `mo_data` module to create virtual files and then assert that the resulting filenames and URLs are as expected.

## References

- `marimo._output.data.data`: This module is referenced as `mo_data` and is crucial for understanding the tests, as it provides the functions being tested.

## Symbols

### `test_html`
#### Description
Tests the creation of a virtual file from HTML content using the `mo_data.html` function.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not return any value. |

#### Internal Logic
- Creates a string containing HTML content.
- Calls `mo_data.html` with the HTML content.
- Asserts that the resulting virtual file's filename ends with `.html`.
- Asserts that the URL of the virtual file matches the expected base64-encoded data URL.

### `test_text`
#### Description
Tests the creation of a virtual file from plain text content using the `mo_data.any_data` function with a `.txt` extension.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not return any value. |

#### Internal Logic
- Creates a string containing plain text content.
- Calls `mo_data.any_data` with the text content and specifies the extension as `txt`.
- Asserts that the resulting virtual file's filename ends with `.txt`.
- Asserts that the URL of the virtual file matches the expected base64-encoded data URL.

### `test_json`
#### Description
Tests the creation of a virtual file from JSON content using the `mo_data.json` function.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not return any value. |

#### Internal Logic
- Creates a dictionary representing JSON content.
- Converts the dictionary to a JSON string using `json.dumps`.
- Calls `mo_data.json` with the JSON string.
- Asserts that the resulting virtual file's filename ends with `.json`.
- Asserts that the URL of the virtual file matches the expected base64-encoded data URL.

### `test_csv`
#### Description
Tests the creation of a virtual file from CSV content using the `mo_data.csv` function.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not take any parameters. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | This function does not return any value. |

#### Internal Logic
- Creates a string containing CSV content.
- Calls `mo_data.csv` with the CSV content.
- Asserts that the resulting virtual file's filename ends with `.csv`.
- Asserts that the URL of the virtual file matches the expected base64-encoded data URL.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `json` | Used to convert a dictionary to a JSON string for testing JSON content. |
| `marimo._output.data.data` | Provides the functions for creating virtual files from different content types. |

## Error Handling

The test functions use assertions to verify the correctness of the output. If any assertion fails, it indicates a problem with the `mo_data` functions being tested.

## Logging

There is no explicit logging in the test file. The test framework used to run these tests would typically handle output and logging of test results.