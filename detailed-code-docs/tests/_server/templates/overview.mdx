---
title: "Overview"
---

## High-level description

The `tests/_server/templates` directory is part of a server-side application, likely used for testing purposes. It contains HTML templates and associated test scripts to ensure the correct rendering of these templates with dynamic data. The main components include an HTML template file (`index.html`), a Python script for testing the templates (`test_templates.py`), and utility functions for processing HTML content (`utils.py`).

## What does it do?

The directory is responsible for managing and testing HTML templates used in a server-side application. The `index.html` file serves as a template for web pages, preloading assets like images and fonts, setting up metadata, and including a script to dynamically resize iframes. This template uses placeholders for dynamic content, which are populated by a server-side rendering engine.

The `test_templates.py` file contains unit tests that verify the functionality of HTML template rendering functions. These tests ensure that the templates for different pages (notebook, home, and static notebook) are correctly populated with dynamic data such as configuration settings and server tokens.

The `utils.py` file provides utility functions to normalize HTML content by removing hash values from URLs and replacing version numbers. This normalization is crucial for maintaining consistent HTML snapshots across different software versions.

## Entry points

The main files in this directory are:

- `index.html`: This is the HTML template file that serves as the basis for web pages in the application. It includes placeholders for dynamic content and scripts for client-side functionality.
- `test_templates.py`: This Python script contains unit tests for the HTML templates, ensuring they render correctly with dynamic data.
- `utils.py`: This file contains utility functions used to process and normalize HTML content, particularly for testing purposes.

## Key Files

- **`index.html`**: A template for web pages, including preloading of assets and dynamic content placeholders. It is structured with a `&lt;head&gt;` section for metadata and assets, and a `&lt;body&gt;` section with a "root" div for mounting client-side applications.
  
- **`test_templates.py`**: Contains unit tests for verifying the rendering of HTML templates. It includes test classes for different templates, setting up test environments, and validating rendered HTML against expected outputs.

- **`utils.py`**: Provides utility functions to normalize HTML content by removing hashes from URLs and replacing version numbers, ensuring consistent HTML snapshots for testing.

## Dependencies

The directory uses several external libraries and frameworks:

- **`unittest`**: A testing framework used in `test_templates.py` to create and run unit tests.
- **`os`**: Used in `utils.py` for file path manipulations and in `test_templates.py` for reading HTML content.
- **`json`**: Utilized in `test_templates.py` for JSON serialization of configuration settings.
- **`re`**: Employed in `utils.py` for regular expression operations to find and replace parts of the HTML content.
- **`marimo`**: Provides the `__version__` variable used in `utils.py` for version replacement in HTML content.

## Configuration

The `index.html` template uses several placeholders for dynamic content, which are populated by a server-side rendering engine. These placeholders include:

- `{{ base_url }}`: The base URL for the application.
- `{{ filename }}`: The name of the file being displayed.
- `{{ mode }}`: The mode of the application.
- `{{ version }}`: The version of the application.
- `{{ user_config }}`: User-specific configuration settings.
- `{{ app_config }}`: Application-specific configuration settings.
- `{{ server_token }}`: A token for server authentication.
- `{{ title }}`: The title of the web page.

These placeholders allow the template to be dynamically populated with relevant data, ensuring that the rendered HTML is tailored to the current context and user settings.