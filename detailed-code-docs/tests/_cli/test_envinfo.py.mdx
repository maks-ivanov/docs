---
title: "test_envinfo.py"
---

## High-level description

The target file `tests/_cli/test_envinfo.py` contains unit tests for the `get_system_info` function from the `marimo._cli.envinfo` module. These tests verify that the system information, including node version, package versions, and overall system details, is correctly retrieved and structured as expected.

## Code Structure

The main function being tested is `get_system_info`, which is imported from the `marimo._cli.envinfo` module. The tests in this file are organized into three functions, each focusing on a specific aspect of the system information:

1. `test_get_node_version`: Tests the presence and type of the Node version in the system information.
2. `test_get_package_versions`: Tests the presence and validity of specific package versions in the system information.
3. `test_get_system_info`: Tests the overall structure and presence of key components in the system information.

## References

- `get_system_info`: This function is the primary focus of the tests and is responsible for gathering and returning system information.

## Symbols

### `test_get_node_version`
#### Description
This test function checks if the Node version is correctly included in the system information retrieved by `get_system_info`.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- Calls `get_system_info` to retrieve system information.
- Asserts that "Binaries" and "Node" are keys in the returned dictionary.
- Checks that the Node version is either `None` or a string.

### `test_get_package_versions`
#### Description
This test function verifies that specific package versions are present and valid in the system information.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- Calls `get_system_info` to retrieve system information.
- Asserts that "Requirements" is a key in the returned dictionary.
- Checks that the package versions are stored in a dictionary.
- Verifies the presence of specific packages ("click", "starlette", "pymdown-extensions") and ensures "pymdown-extensions" is not marked as "missing".

### `test_get_system_info`
#### Description
This test function ensures that the overall system information structure is correct and contains expected keys.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- Calls `get_system_info` to retrieve system information.
- Asserts that the returned value is a dictionary.
- Checks for the presence of keys such as "marimo", "OS", "OS Version", "Python Version", "Binaries", and "Requirements".

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `marimo._cli.envinfo` | Provides the `get_system_info` function used to gather system information. |

## Error Handling

The tests use assertions to validate the expected structure and content of the system information. If any assertion fails, it indicates a discrepancy between the expected and actual results, which would be reported as a test failure.

## Logging

There is no explicit logging in the test file. The test framework (e.g., pytest) would handle any output related to test results.

## TODOs

There are no TODOs or notes left in the code.