---
title: "mocks.py"
---

## High-level description

The `mocks.py` file defines a `MockLoader` class, which is a mock implementation of the `Loader` abstract base class. This mock is used for testing purposes, simulating the behavior of a cache loader without actually performing file operations. It provides methods to simulate cache hits, loading, and saving operations, which are essential for testing caching mechanisms in the system.

## Code Structure

The `MockLoader` class inherits from the `Loader` class, which is an abstract base class for cache loaders. The `MockLoader` implements the abstract methods defined in `Loader`, providing mock functionality for testing. The class interacts with the `Cache` class from the `marimo._save.cache` module, simulating cache operations.

## Symbols

### `MockLoader`
#### Description
The `MockLoader` class is a mock implementation of the `Loader` abstract base class. It is used for testing caching mechanisms by simulating cache hits, loading, and saving operations without actual file I/O. This allows for testing the behavior of caching logic in a controlled environment.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The name of the loader, default is "mock". |
| save_path | str | The path where the cache would be saved, default is an empty string. |
| data | Optional[Dict[str, Any]] | Initial data to simulate a cache hit, default is None. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The class does not return a value but modifies its internal state. |

#### Internal Logic
- **Initialization**: Sets up the loader with a name, save path, and initial data. It also initializes flags to track cache hits, loading, and saving operations.
- **`cache_hit` Method**: Returns a boolean indicating whether the cache was hit, based on the presence of initial data.
- **`load_cache` Method**: Simulates loading a cache by setting the `_loaded` flag to `True` and returning a `Cache` object initialized with the provided data.
- **`save_cache` Method**: Simulates saving a cache by setting the `_saved` flag to `True`.

## References

- **`Loader` Class**: The `MockLoader` class inherits from this abstract base class, implementing its abstract methods.
- **`Cache` Class**: Used in the `load_cache` method to create a cache object with the mock data.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `marimo._save.cache` | Provides the `Cache` class and `CacheType` used in the mock loader. |
| `marimo._save.loaders` | Provides the `Loader` abstract base class that `MockLoader` extends. |

## Error Handling

The `MockLoader` class does not implement specific error handling mechanisms as it is designed for testing purposes. It assumes that the inputs are controlled and valid within the test environment.

## Logging

The `MockLoader` class does not implement any logging mechanisms. It is focused on simulating cache operations for testing rather than providing runtime diagnostics.

## TODOs

There are no TODOs or notes left in the code. The `MockLoader` class is a straightforward implementation for testing purposes.