---
title: "datasources.py"
---

## High-level description

The target file `marimo/_smoke_tests/datasources.py` is a script designed to test data source functionalities within the Marimo framework. It utilizes the Marimo application framework to create a series of interactive cells that load datasets, manipulate data using Pandas, and display data using various UI components. The script demonstrates the integration of different data processing libraries like Pandas, Polars, and PyArrow, and showcases how to create interactive UI elements such as dropdowns and tables.

## Code Structure

The script is structured around the Marimo application framework, which uses decorators to define interactive cells. Each cell performs a specific task, such as loading data, transforming it, or displaying it in the UI. The main symbols in the code are the `app` object, which represents the Marimo application, and the `@app.cell` decorator, which is used to define individual interactive cells. These cells are executed in sequence to build a data processing and visualization pipeline.

## Symbols

### `app`
#### Description
The `app` is an instance of the `marimo.App` class, which serves as the main application object for the Marimo framework. It is configured with a full-width layout and is responsible for managing the execution of the interactive cells defined in the script.

### `@app.cell`
#### Description
The `@app.cell` decorator is used to define a function as an interactive cell within the Marimo application. Each decorated function represents a step in the data processing or visualization pipeline. The functions are executed in the order they are defined, and their outputs can be used as inputs for subsequent cells.

### `__()`
#### Description
Multiple functions are defined with the name `__`, each decorated with `@app.cell`. These functions perform various tasks such as importing libraries, creating dataframes, and displaying UI components. The use of the same function name is a stylistic choice, likely to emphasize the sequence of operations rather than the individual function names.

#### Inputs and Outputs
Each function takes different inputs and produces different outputs, depending on its role in the pipeline. For example, some functions take a Pandas DataFrame as input and return a modified DataFrame, while others take UI components as input and return rendered UI elements.

#### Internal Logic
- **Data Import and Setup**: The first cell imports necessary libraries and datasets.
- **DataFrame Creation**: Subsequent cells create and return Pandas DataFrames with sample data.
- **UI Components**: Cells create UI components like dropdowns and tables using the Marimo UI library.
- **Data Transformation**: Data is transformed into different formats using libraries like Polars and PyArrow.
- **Data Display**: The final cells display the data in various formats using Marimo's UI capabilities.

## Side Effects

- The script modifies the global state of the Marimo application by defining and executing interactive cells.
- It interacts with external data sources via the `vega_datasets` library to load datasets.

## Dependencies

| Dependency     | Purpose                                                                 |
|:---------------|:------------------------------------------------------------------------|
| `marimo`       | Provides the application framework and UI components for building interactive applications. |
| `vega_datasets`| Supplies example datasets for testing and demonstration purposes.        |
| `pandas`       | Used for data manipulation and creation of DataFrames.                   |
| `polars`       | Converts Pandas DataFrames to Polars DataFrames for performance testing. |
| `pyarrow`      | Converts Pandas DataFrames to PyArrow Tables for interoperability testing.|

## Error Handling

The script does not explicitly handle errors beyond the basic functionality provided by the Marimo framework. It assumes that the datasets and libraries are available and correctly configured.

## Logging

The script does not implement any logging mechanisms. It relies on the Marimo framework's execution model to manage the flow of data and UI updates.

## API/Interface Reference

The script does not expose an API or public interface. It is intended to be run as a standalone application within the Marimo framework.

## TODOs

There are no TODOs or notes left in the code. The script appears to be complete and functional for its intended purpose of testing data source functionalities within the Marimo framework.