---
title: "lazy.py"
---

## High-level description

The target file `marimo/_smoke_tests/lazy.py` is a set of smoke tests for the Marimo framework, specifically testing the lazy loading functionality of UI components. It defines several UI components such as sliders, tabs, and accordions, and demonstrates how to use lazy loading to defer the execution of certain functions or the rendering of components until they are needed. This is useful for optimizing performance and improving user experience by reducing initial load times.

## Code Structure

The code is structured around the `marimo.App` class, which is used to define a web application with a full-width layout. The application is composed of several cells, each defined by the `@app.cell` decorator. Each cell contains a function that returns UI components or data, which are then used to build the application's interface. The main symbols in the code are the UI components like sliders, tabs, and accordions, and the functions that generate or manipulate data for these components.

## Symbols

### `app`
#### Description
The `app` is an instance of the `marimo.App` class, which represents the web application. It is configured with a full-width layout and is responsible for managing the lifecycle of the application, including running it when executed as a script.

### `@app.cell`
#### Description
The `@app.cell` decorator is used to define a cell in the Marimo application. Each cell is a function that returns UI components or data. The decorator registers the function with the application, allowing it to be executed and its output to be integrated into the application's interface.

### `__(mo)`
#### Description
This function creates a slider UI component with a range from 0 to 10 using the Marimo UI library. It returns the slider component, which can be used in other parts of the application.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mo | Marimo object | The Marimo object used to access UI components and other functionalities. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| slider | Slider component | A slider UI component with a range from 0 to 10. |

### `__(generate_number, mo, slider, table)`
#### Description
This function creates a set of tabs with lazy loading for certain components. It demonstrates how to use the `mo.lazy` function to defer the loading of components until they are needed.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| generate_number | Function | A function to generate a random number. |
| mo | Marimo object | The Marimo object used to access UI components and other functionalities. |
| slider | Slider component | A slider UI component. |
| table | Table component | A table UI component. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tabs | Tabs component | A set of tabs with lazy loading for certain components. |

#### Internal Logic
- Creates tabs with three sections: "First" with the slider, "Second" with a lazy-loaded table, and "Third" with a lazy-loaded number generator.
- Uses `mo.lazy` to defer loading of the table and number generator.

### `__(generate_number_async, mo)`
#### Description
This function creates an accordion with a lazy-loaded asynchronous function. It demonstrates how to use lazy loading with asynchronous functions in Marimo.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| generate_number_async | Async function | An asynchronous function to generate a random number. |
| mo | Marimo object | The Marimo object used to access UI components and other functionalities. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | None | The function does not return any value. |

#### Internal Logic
- Creates an accordion with a section titled "Lazy async function" that uses `mo.lazy` to defer the execution of the asynchronous function.

### `generate_number_async`
#### Description
An asynchronous function that simulates a delay before generating a random number. It is used to demonstrate lazy loading with asynchronous functions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| random | Random module | The random module used to generate random numbers. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| num | int | A randomly generated number between 0 and 100. |

#### Internal Logic
- Prints "Loading..." to simulate a loading state.
- Waits for 1 second using `asyncio.sleep`.
- Prints "Loaded!" to indicate completion.
- Generates and returns a random number.

### `generate_number`
#### Description
A synchronous function that simulates a delay before generating a random number. It is used to demonstrate lazy loading with synchronous functions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| random | Random module | The random module used to generate random numbers. |
| time | Time module | The time module used to introduce a delay. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| num | int | A randomly generated number between 0 and 100. |

#### Internal Logic
- Prints "Loading..." to simulate a loading state.
- Waits for 1 second using `time.sleep`.
- Prints "Loaded!" to indicate completion.
- Generates and returns a random number.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `marimo` | Used to create and manage the web application and UI components. |
| `pandas` | Used for data manipulation and analysis. |
| `random` | Used to generate random numbers. |
| `time` | Used to introduce delays in synchronous functions. |
| `asyncio` | Used to introduce delays in asynchronous functions. |
| `vega_datasets` | Provides sample datasets for use in the application. |

## Error Handling

The code does not implement specific error handling mechanisms beyond basic exception raising. It assumes that the functions and UI components will execute without errors.

## Logging

The code includes basic print statements to simulate loading states in the `generate_number` and `generate_number_async` functions. These are not formal logging mechanisms but serve to indicate the progress of these functions.

## TODOs

There are no TODOs or notes left in the code.