---
title: "anywidget_compat.py"
---

## High-level description

The target file `anywidget_compat.py` is a smoke test script for the Marimo framework, specifically testing the compatibility and integration of the `anywidget` library with Marimo's reactive execution engine. It defines a simple interactive widget using `anywidget` and `traitlets`, and demonstrates how to use this widget within a Marimo application. The script also includes examples of integrating other libraries like Altair and Pandas for data visualization.

## Code Structure

The main components of the code are:
- The `marimo.App` instance, which serves as the application container.
- Several `@app.cell` decorated functions, which define the cells of the Marimo application. Each cell can import modules, define widgets, or perform operations.
- The `CounterWidget` class, which is a custom widget created using `anywidget` and `traitlets`.
- Integration with other libraries like `altair` and `pandas` for data visualization.

## Symbols

### `CounterWidget`
#### Description
The `CounterWidget` is a custom widget class that extends `anywidget.AnyWidget`. It is designed to be a simple counter with a button that increments a count value each time it is clicked. The widget's state is synchronized between Python and JavaScript using `traitlets`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | N/A  | The class does not take inputs directly. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| count | int | The current count value, synchronized between Python and JavaScript. |

#### Internal Logic
- The widget's front-end logic is defined in the `_esm` string, which contains JavaScript code to render a button and handle click events.
- The `_css` string defines the styling for the button.
- The `count` attribute is a `traitlets.Int` that is tagged for synchronization with the front-end.

### `app.cell` Decorated Functions
#### Description
These functions define the cells of the Marimo application. Each function is decorated with `@app.cell`, indicating that it is a reactive cell in the Marimo app. The functions perform various tasks such as importing modules, creating widgets, and handling data.

#### Inputs and Outputs
Each function has different inputs and outputs, typically involving the creation or manipulation of widgets and data. For example, one function might create an instance of `CounterWidget`, while another might return a data visualization chart.

#### Internal Logic
- Functions import necessary modules and define widgets or data operations.
- Some functions demonstrate the use of the `CounterWidget` in both reactive and non-reactive contexts.
- Integration with libraries like `altair` and `pandas` is shown for data visualization.

## References

- The `CounterWidget` class is similar to the example provided in the related file `docs/api/inputs/anywidget.md`.
- The `anywidget` library is used to create custom widgets compatible with Jupyter and Marimo.
- The `traitlets` library is used for defining synchronized stateful properties in widgets.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| marimo | Framework for building reactive applications. |
| anywidget | Library for creating custom Jupyter-compatible widgets. |
| traitlets | Library for defining synchronized stateful properties. |
| altair | Library for declarative statistical visualization. |
| pandas | Library for data manipulation and analysis. |

## Error Handling

The script does not explicitly handle errors beyond basic exception raising. It assumes that the necessary libraries are installed and available.

## Logging

The script does not implement any logging mechanisms.

## API/Interface Reference

The script does not expose an API or public interface. It is a standalone script intended for testing and demonstration purposes.

## TODOs

There are no TODOs or notes left in the code.