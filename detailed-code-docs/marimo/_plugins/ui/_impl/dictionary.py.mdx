---
title: "dictionary.py"
---

## High-level description

The `dictionary` class in the `marimo/_plugins/ui/_impl/dictionary.py` file is a specialized UI component that allows for the creation and management of a collection of UI elements, organized in a dictionary-like structure. This class facilitates the dynamic creation and logical grouping of UI elements, enabling users to access and manipulate these elements through a dictionary interface. The class also supports cloning of UI elements to ensure that interactions with the dictionary do not affect the original elements.

## Code Structure

The `dictionary` class inherits from `_batch_base`, which is a base class for UI elements that manage a collection of other UI elements. The `dictionary` class utilizes several other components from the `marimo` library, such as `Html` for rendering, `json_output` for displaying JSON data, and `hstack` and `vstack` for layout management.

## Symbols

### `dictionary`
#### Description
The `dictionary` class is a UI component that encapsulates a collection of UI elements in a dictionary-like structure. It allows for the dynamic creation and logical grouping of UI elements, providing a convenient interface for accessing and manipulating these elements.

#### Inputs
| Name      | Type                                      | Description                                      |
|:----------|:------------------------------------------|:-------------------------------------------------|
| elements  | `dict[str, UIElement[Any, Any]]`          | A dictionary mapping names to UI elements.       |
| label     | `str`                                     | A descriptive name for the dictionary.           |
| on_change | `Optional[Callable[[dict[str, object]], None]]` | A callback function triggered on value changes. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A  | N/A  | N/A         |

#### Internal Logic
- **Initialization**: The constructor clones the provided UI elements to ensure that interactions with the dictionary do not affect the original elements. It then formats these elements into a JSON structure and initializes the base class with this formatted data.
- **Cloning**: The `_clone` method creates a new instance of the `dictionary` with copies of the UI elements, ensuring that the new dictionary is independent of the original.
- **Layout Management**: The `hstack` and `vstack` methods provide functionality to arrange the UI elements horizontally or vertically, respectively, using the `hstack` and `vstack` functions from the `marimo` library.

## References

- **`_batch_base`**: The base class from which `dictionary` inherits, providing core functionality for managing a collection of UI elements.
- **`UIElement`**: The class representing individual UI elements, which are managed by the `dictionary`.
- **`Html`**: Used for rendering the UI elements as HTML.
- **`json_output`**: Utilized to display the dictionary's elements in a JSON format.
- **`hstack` and `vstack`**: Functions used for arranging UI elements in horizontal or vertical stacks.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `marimo._output.formatters.structures` | Provides the `format_structure` function for formatting UI elements. |
| `marimo._output.hypertext` | Provides the `Html` class for rendering UI elements. |
| `marimo._output.rich_help` | Provides the `mddoc` decorator for documentation. |
| `marimo._plugins.stateless.flex` | Provides `hstack` and `vstack` for layout management. |
| `marimo._plugins.stateless.json_output` | Provides the `json_output` function for JSON rendering. |
| `marimo._plugins.ui._core.ui_element` | Provides the `UIElement` class for individual UI components. |
| `marimo._plugins.ui._impl.batch` | Provides the `_batch_base` class for managing collections of UI elements. |

## Error Handling

The code does not explicitly handle errors beyond basic exception raising. However, it ensures that the cloning of UI elements and the initialization of the dictionary are robust by using defensive programming techniques, such as cloning elements to prevent unintended side effects.

## Logging

The code does not implement any logging mechanisms.

## TODOs

There are no TODOs or notes left in the code.