---
title: "array.py"
---

## High-level description

The target file, `array.py`, defines a class `array` that extends the `UIElement` class to represent a dynamic collection of UI elements in a user interface. This class allows for the creation, management, and interaction with a sequence of UI elements, providing functionalities such as accessing individual elements, iterating over them, and handling changes in their values. The `array` class is designed to facilitate the grouping of related UI elements and manage their state collectively.

## Code Structure

The `array` class is a subclass of `UIElement`, which is a generic class for UI components that have a value and can interact with the frontend. The `array` class manages a sequence of `UIElement` instances, providing methods to access, iterate, and manipulate these elements. It also integrates with other components like `json_output` for rendering and `hstack`/`vstack` for layout management.

## References

- `UIElement`: The base class for the `array` class, providing core functionalities for UI components.
- `json_output`: Used to generate HTML for displaying JSON data.
- `hstack` and `vstack`: Used for arranging UI elements horizontally and vertically, respectively.
- `format_structure`: Formats the structure of the UI elements for JSON output.

## Symbols

### `array`
#### Description
The `array` class represents a collection of UI elements that can be dynamically created and managed. It allows for accessing, iterating, and updating the values of these elements, and provides methods for horizontal and vertical stacking of the elements.

#### Inputs
| Name      | Type                                      | Description                                      |
|:----------|:------------------------------------------|:-------------------------------------------------|
| elements  | `Sequence[UIElement[Any, Any]]`           | The UI elements to include in the array.         |
| label     | `str`                                     | A descriptive name for the array.                |
| on_change | `Optional[Callable[[Sequence[object]], None]]` | Callback to run when the array's value changes. |

#### Outputs
| Name   | Type                        | Description                                      |
|:-------|:----------------------------|:-------------------------------------------------|
| output | `array`                     | An instance of the `array` class.                |

#### Internal Logic
- **Initialization**: Clones the provided UI elements and sets up the array with a label and optional change callback. It uses `json_output` to format the elements for display.
- **Value Conversion**: The `_convert_value` method updates the values of the elements if they have changed, ensuring synchronization between the frontend and backend.
- **Cloning**: The `_clone` method creates a new instance of the array with the same elements and configuration.
- **Element Access**: Implements methods like `__getitem__`, `__iter__`, and `__len__` to access and iterate over the elements.
- **Stacking**: Provides `hstack` and `vstack` methods to arrange elements horizontally or vertically.

## Dependencies

| Dependency | Purpose                                                                 |
|:-----------|:------------------------------------------------------------------------|
| `json_output` | Used to generate HTML for displaying JSON data.                        |
| `hstack` and `vstack` | Used for arranging UI elements horizontally and vertically.   |
| `format_structure` | Formats the structure of the UI elements for JSON output.        |

## Error Handling

The `array` class does not explicitly handle errors beyond basic type checks and validations during initialization. It relies on the underlying `UIElement` class for error management related to UI interactions.

## Logging

There is no explicit logging implemented in the `array` class. Any logging would be handled by the underlying `UIElement` class or other components in the system.

## TODOs

No TODOs or notes are present in the code.