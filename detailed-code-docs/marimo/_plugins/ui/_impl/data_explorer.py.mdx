---
title: "data_explorer.py"
---

## High-level description

The `data_explorer` class in the `marimo/_plugins/ui/_impl/data_explorer.py` file is designed to facilitate the exploration of data frames by providing automatically suggested visualizations. It extends the `UIElement` class, allowing users to interact with data frames in a user interface, and it supports data frames from popular libraries like Pandas, Polars, and PyArrow.

## Code Structure

The `data_explorer` class is a subclass of `UIElement`, which is a generic class for creating interactive HTML elements with a value. The `data_explorer` class uses the `get_table_manager` utility to manage data frames and convert them into a format suitable for visualization. It also utilizes the `mo_data.csv` function to convert the data into a CSV format for rendering.

## References

- `UIElement`: The base class for creating UI elements, providing methods and properties for managing the element's value and interactions.
- `get_table_manager`: A utility function that returns a table manager for handling different types of data frames.
- `mo_data.csv`: A function that converts data into a CSV format, used for rendering the data in the UI.

## Symbols

### `data_explorer`
#### Description
The `data_explorer` class is a UI component that allows users to explore data frames with automatically suggested visualizations. It initializes with a data frame and provides a mechanism to convert the data into a format suitable for visualization.

#### Inputs
| Name      | Type                                           | Description                              |
|:----------|:-----------------------------------------------|:-----------------------------------------|
| `df`      | `Union[pd.DataFrame, pl.DataFrame, pa.Table]`  | The data frame to visualize.             |
| `on_change` | `Optional[Callable[[Dict[str, Any]], None]]` | A callback function triggered on change. |

#### Outputs
| Name  | Type               | Description                              |
|:------|:-------------------|:-----------------------------------------|
| `value` | `Dict[str, Any]` | The resulting data frame chart specification. |

#### Internal Logic
1. **Initialization**: The constructor initializes the `data_explorer` with a data frame and an optional `on_change` callback. It uses the `get_table_manager` function to obtain a manager for the data frame.
2. **CSV Conversion**: The data frame is converted to a CSV format using `mo_data.csv`, which is then used to initialize the parent `UIElement` class.
3. **Value Conversion**: The `_convert_value` method is a placeholder that currently returns the input value unchanged. This method can be overridden to implement custom value conversion logic.

## Dependencies

| Dependency | Purpose                                      |
|:-----------|:---------------------------------------------|
| `pandas`   | To handle data frames for visualization.     |
| `polars`   | To handle data frames for visualization.     |
| `pyarrow`  | To handle tables for visualization.          |

## Error Handling

The code does not explicitly handle errors beyond basic type checking in the constructor. It assumes that the provided data frame is valid and that the necessary dependencies are installed.

## Logging

There is no explicit logging implemented in this code. However, the `UIElement` class, which `data_explorer` extends, may have logging mechanisms for debugging and tracking interactions.

## TODOs

There are no TODOs or notes left in the code.