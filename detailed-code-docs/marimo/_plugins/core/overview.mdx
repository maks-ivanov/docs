---
title: "Overview"
---

## High-level description

The `marimo/_plugins/core` directory contains utility modules that facilitate the handling of JSON encoding, media files, and web components within the Marimo framework. This framework appears to be designed for building interactive web applications, and these utilities support various aspects of data serialization, media processing, and HTML component construction.

- **`json_encoder.py`**: Provides a custom JSON encoder, `WebComponentEncoder`, which extends Python's default `JSONEncoder` to handle complex data types, including those from NumPy and Pandas, as well as dataclasses, bytes, sets, and datetime objects.
- **`media.py`**: Offers utility functions for managing media files, including guessing MIME types, converting file-like objects to data URLs, and checking if data is empty.
- **`web_component.py`**: Contains functions for constructing HTML components, encoding attributes safely for HTML, and parsing initial values from HTML strings. These functions are used to build both stateful and stateless web components.

## What does it do?

The utilities in this directory serve several key functions:

1. **JSON Encoding**: The `WebComponentEncoder` class in `json_encoder.py` allows for the serialization of complex Python objects into JSON format. This is crucial for transmitting data over the web or storing it in a JSON-compatible format. The encoder handles various data types, including those from popular libraries like NumPy and Pandas, ensuring that they can be converted into a JSON-serializable form.

2. **Media Handling**: The functions in `media.py` provide essential tools for working with media files. They can determine the MIME type of a file, convert files to data URLs for embedding in HTML, and check if data is empty. These capabilities are important for rendering media in web applications or preparing files for download.

3. **Web Component Construction**: The utilities in `web_component.py` facilitate the creation of HTML components that can be used as plugins in a web-based UI. They allow developers to construct both stateful and stateless components, ensuring that attributes are safely encoded to prevent security vulnerabilities. Additionally, they provide mechanisms for parsing initial values from HTML, which is useful for initializing component states.

## Entry points

The directory is organized into three main files, each serving a distinct purpose:

- **`json_encoder.py`**: The entry point for custom JSON encoding logic. Developers looking to serialize complex data types into JSON should start here.
- **`media.py`**: The entry point for media-related utilities. This file is essential for handling media files and converting them into formats suitable for web use.
- **`web_component.py`**: The entry point for building HTML components. This file provides the necessary functions to construct and manipulate web components within the Marimo framework.

## Dependencies

The directory relies on several external libraries and modules:

- **`json`**: Used for JSON serialization and deserialization.
- **`dataclasses`**: Utilized in `json_encoder.py` to check and convert dataclass objects.
- **`datetime`**: Used for handling datetime objects in JSON serialization.
- **`base64`**: Employed in `media.py` for encoding data in base64 format.
- **`io`**: Provides support for file-like objects in `media.py`.
- **`mimetypes`**: Used in `media.py` to guess MIME types and file extensions.
- **`re`**: Utilized in `web_component.py` for regular expression operations.
- **`html.escape` and `html.unescape`**: Used in `web_component.py` for safely encoding and decoding HTML strings.

These dependencies are chosen to provide robust support for data serialization, media handling, and HTML construction, ensuring that the utilities can handle a wide range of use cases within the Marimo framework.