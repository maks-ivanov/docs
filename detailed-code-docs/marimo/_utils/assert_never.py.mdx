---
title: "assert_never.py"
---

## High-level description

The `assert_never.py` file defines a utility function `assert_never` that is used to handle unexpected values in code paths that should be unreachable. This function is typically used in conjunction with type checking to ensure that all possible cases in a type union or enumeration are handled, and it raises an `AssertionError` if an unexpected value is encountered.

## Symbols

### `assert_never`
#### Description
The `assert_never` function is designed to be used in situations where a value should never be encountered. It is a utility function that raises an `AssertionError` if called, indicating that the code has reached an unexpected state. This is particularly useful in exhaustive checks, such as when using type unions or enums, to ensure that all possible cases are handled.

#### Inputs
| Name  | Type    | Description                        |
|:------|:--------|:-----------------------------------|
| value | NoReturn | A value that should never be encountered. |

#### Outputs
| Name | Type    | Description |
|:-----|:--------|:------------|
| None | NoReturn | This function does not return; it raises an error. |

#### Internal Logic
The function simply raises an `AssertionError` with a message that includes the unhandled value and its type. This provides a clear indication of what unexpected value was encountered, aiding in debugging.

## References

The `assert_never` function is referenced in several other parts of the codebase, particularly in files that handle various transformations and operations, such as:

- `marimo/_plugins/ui/_impl/dataframes/transforms/apply.py`
- `marimo/_plugins/ui/_impl/dataframes/transforms/handlers.py`
- `marimo/_runtime/runtime.py`
- `marimo/_server/api/endpoints/ai.py`

In these files, `assert_never` is used to ensure that all possible cases are handled in switch-like constructs, such as when dealing with different types of transformations or operations. If an unexpected case arises, `assert_never` will raise an error, indicating a potential bug or oversight in the code logic.

## Dependencies

The `assert_never.py` file does not have any external dependencies beyond the standard library. It uses the `NoReturn` type from the `typing` module to indicate that the function does not return a value.

## Error Handling

The primary error handling mechanism in this file is the raising of an `AssertionError` when an unexpected value is encountered. This is a deliberate design choice to catch logical errors during development and testing, ensuring that all code paths are properly handled.

## Logging

There is no logging implemented in this file. The function's purpose is to raise an error when an unexpected value is encountered, which serves as its own form of error reporting.