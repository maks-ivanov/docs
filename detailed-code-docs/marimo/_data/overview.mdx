---
title: "Overview"
---

## High-level description

The `marimo/_data` directory is a part of the Marimo project, focusing on data handling, visualization, and analysis. It contains modules for generating chart visualizations, extracting datasets from various sources, defining data models, previewing dataset columns, summarizing data series, and parsing SQL queries embedded in Python code. The directory leverages external libraries like Altair for charting and DuckDB for database interactions, and it supports data processing with Pandas and Polars.

## What does it do?

The directory provides a comprehensive suite of tools for data manipulation and visualization:

1. **Chart Generation**: It uses the Altair library to create visual representations of data columns based on their types (e.g., numerical, string, date). This is achieved through a set of builder classes that generate both the chart specifications and the corresponding Python code.

2. **Dataset Extraction**: It extracts datasets from in-memory variables and DuckDB databases, converting them into a standardized `DataTable` format for further analysis within the Marimo framework.

3. **Data Modeling**: It defines data structures to represent data tables and their columns, including summaries of column data. These models help in organizing and understanding the data's structure and content.

4. **Column Preview**: It generates previews of specific columns in a dataset, including data summaries and visual charts, if possible. This functionality checks for necessary dependencies and handles various data types.

5. **Series Summarization**: It provides utility functions to extract summary information from numeric, categorical, and date series, supporting both Pandas and Polars data series.

6. **SQL Parsing**: It identifies and processes SQL queries embedded within Python code, particularly those formatted as f-strings, by traversing the Abstract Syntax Tree (AST).

## Entry points

The directory is organized into several key files, each serving a specific purpose:

- **`charts.py`**: This file is the main entry point for generating chart visualizations. It defines various builder classes for different data types and a function to select the appropriate builder.

- **`get_datasets.py`**: This file handles the extraction of datasets from different sources, converting them into `DataTable` objects.

- **`models.py`**: This file defines the data structures used to represent data tables and their columns, as well as column summaries.

- **`preview_column.py`**: This file provides functionality to generate previews of dataset columns, including data summaries and visual charts.

- **`series.py`**: This file contains utility functions for summarizing different types of data series.

- **`sql_visitor.py`**: This file is responsible for parsing SQL queries embedded in Python code, particularly those formatted as f-strings.

## Dependencies

The directory relies on several external libraries:

- **Altair**: Used for creating chart visualizations. It is chosen for its declarative approach to building interactive charts.

- **DuckDB**: Utilized for executing SQL queries and extracting table information from DuckDB databases, providing efficient data processing capabilities.

- **Pandas and Polars**: These libraries are used for handling data series, offering robust data manipulation and analysis features.

The code also uses Python's standard libraries like `ast` for parsing and traversing the Abstract Syntax Tree, and `dataclasses` for defining data structures.