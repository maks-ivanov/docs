---
title: "completion.py"
---

## High-level description

The target file defines a data model for AI completion requests within the Marimo application. It uses Python's `dataclasses` to create a structured representation of a request that includes a prompt, additional code context, and the programming language for which the completion is requested.

## Code Structure

The main symbol in the code is the `AiCompletionRequest` class, which is a data class used to encapsulate the details of a request for AI code completion. This class is referenced in other parts of the codebase, particularly in API endpoints where AI completion functionality is implemented.

## Symbols

### `AiCompletionRequest`
#### Description
The `AiCompletionRequest` class is a data model that represents a request for AI code completion. It includes fields for the prompt, additional code context, and the language of the code. This class is used to structure the data sent to AI models for generating code completions.

#### Inputs
| Name               | Type   | Description                                                                 |
|:-------------------|:-------|:----------------------------------------------------------------------------|
| prompt             | str    | The main text or query for which AI completion is requested.                |
| include_other_code | str    | Additional code context that might be relevant for generating the completion.|
| code               | str    | The current code that is being worked on, which might need completion.      |
| language           | Literal["python", "markdown", "sql"] | The programming language for the code completion, defaulting to "python". |

#### Outputs
There are no direct outputs from this class as it is a data structure used to encapsulate input data.

## References

- The `AiCompletionRequest` class is referenced in the `marimo/_server/api/endpoints/ai.py` file, where it is used to parse and handle incoming requests for AI code completion.

## Dependencies

The code uses the following Python standard library modules:
- `dataclasses`: Used to define the `AiCompletionRequest` as a data class.
- `typing`: Provides type hints, including `Literal` for specifying the allowed values for the `language` field.

## Error Handling

There is no explicit error handling in the target file itself, as it primarily defines a data structure. Error handling related to this class would typically occur in the parts of the codebase where instances of this class are used, such as in API request parsing and validation.

## API/Interface Reference

The `AiCompletionRequest` class is part of the API interface for handling AI completion requests. It is used in the `/completion` endpoint defined in the `marimo/_server/api/endpoints/ai.py` file, where it is referenced in the request body schema.

## TODOs

There are no TODOs or notes left in the code.