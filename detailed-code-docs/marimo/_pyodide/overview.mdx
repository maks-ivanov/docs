---
title: "Overview"
---

## High-level description

The `marimo/_pyodide` directory is part of the Marimo project and is focused on integrating Pyodide, a Python distribution for the browser and Node.js, into the application. This directory contains modules that manage Pyodide sessions, handle communication between the client and the Pyodide kernel, and manage input/output streams. The main components include session management, stream handling, and the initialization of Pyodide environments.

## What does it do?

The code in this directory facilitates the execution of Python code in a web environment using Pyodide. It manages the lifecycle of Pyodide sessions, allowing users to run Python code directly in their browsers. The system handles asynchronous communication between the client and the Pyodide kernel, ensuring that input and output are correctly managed and displayed. It also provides mechanisms for saving and loading application data, managing user configurations, and handling various types of requests such as code execution, file operations, and UI interactions.

## Entry points

The main files in this directory are:

- `bootstrap.py`: This file is responsible for initializing and managing Pyodide sessions. It provides functions to create new sessions, instantiate execution requests, and save files. It integrates with other components of the Marimo system to facilitate the execution of code in a Pyodide environment.

- `pyodide_session.py`: This file manages the client session compatible with Pyodide. It includes classes and functions to handle asynchronous communication, manage input/output streams, and facilitate operations like code execution and file management.

- `streams.py`: This file provides classes that wrap around standard input, output, and error streams to facilitate communication between the Pyodide kernel and the frontend interface. These classes ensure data is correctly formatted and sent through appropriate channels.

## Key Files

- **`bootstrap.py`**: Manages the initialization and configuration of Pyodide sessions. It includes functions like `instantiate`, `create_session`, and `save_file` to handle session creation, execution requests, and file saving.

- **`pyodide_session.py`**: Contains the core logic for managing Pyodide sessions. It includes classes like `AsyncQueueManager`, `PyodideSession`, and `PyodideBridge` to handle session management, communication, and request processing.

- **`streams.py`**: Provides stream handling classes such as `PyodideStream`, `PyodideStdout`, `PyodideStderr`, and `PyodideStdin` to manage standard input, output, and error streams in a Pyodide environment.

## Dependencies

The directory relies on several external libraries and frameworks:

- **`asyncio`**: Used for managing asynchronous operations and queues, crucial for handling non-blocking communication between the client and the Pyodide kernel.

- **`json`**: Utilized for JSON serialization and deserialization, enabling the exchange of data between different components.

- **`base64`**: Used for encoding and decoding data, particularly in the context of communication between the client and the kernel.

- **`sys`**: Provides access to system-specific parameters and functions, such as encoding and error handling.

These dependencies are chosen to facilitate asynchronous communication, data serialization, and system-level operations necessary for running Python code in a web environment using Pyodide.