---
title: "hooks.py"
---

## High-level description

The target file, `hooks.py`, is part of the Marimo runtime system and serves as a central registry for various hook types used during the execution of a runner's subgraph. These hooks are categorized into four main types: preparation hooks, pre-execution hooks, post-execution hooks, and on-finish hooks. Each category corresponds to a specific phase in the execution lifecycle of a runner, allowing for custom logic to be executed at different stages.

## Code Structure

The file imports four lists of hooks from separate modules, each corresponding to a different phase of the runner's lifecycle:
- `PREPARATION_HOOKS` from `hooks_preparation.py`
- `PRE_EXECUTION_HOOKS` from `hooks_pre_execution.py`
- `POST_EXECUTION_HOOKS` from `hooks_post_execution.py`
- `ON_FINISH_HOOKS` from `hooks_on_finish.py`

These lists are then made available for use in other parts of the Marimo system by including them in the `__all__` list, which defines the public API of the module.

## References

The target file references the following modules:
- `hooks_on_finish.py`: Defines hooks to be executed after the runner finishes executing its subgraph.
- `hooks_post_execution.py`: Defines hooks to be executed after each cell is run.
- `hooks_pre_execution.py`: Defines hooks to be executed before each cell is run.
- `hooks_preparation.py`: Defines hooks to be executed before the runner starts running its subgraph.

## Symbols

### `PREPARATION_HOOKS`
#### Description
A list of hooks that are executed before the runner starts running its subgraph. These hooks typically prepare the environment or the runner's state for execution.

### `PRE_EXECUTION_HOOKS`
#### Description
A list of hooks that are executed right before each cell is run. These hooks are used to set up the necessary conditions for the execution of individual cells.

### `POST_EXECUTION_HOOKS`
#### Description
A list of hooks that are executed right after each cell is run. These hooks handle tasks such as broadcasting outputs, updating statuses, and managing resources post-execution.

### `ON_FINISH_HOOKS`
#### Description
A list of hooks that are executed once the runner has finished executing its subgraph. These hooks are used for cleanup and finalization tasks after the entire execution process is complete.

## Dependencies

The target file does not directly use any external libraries or modules, but it imports hook lists from other modules within the Marimo system.

## Error Handling

The target file itself does not implement any error handling mechanisms. Error handling is likely managed within the individual hook functions defined in the related modules.

## Logging

The target file does not implement any logging. Logging is likely handled within the individual hook functions in the related modules.

## TODOs

There are no TODOs or notes left in the target file.