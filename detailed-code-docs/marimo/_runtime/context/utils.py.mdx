---
title: "utils.py"
---

## High-level description

The target file `marimo/_runtime/context/utils.py` contains a utility function `running_in_notebook` that determines whether the current execution environment is a Marimo notebook. This is achieved by checking the context of the runtime environment and verifying if it is an instance of `KernelRuntimeContext`.

## Code Structure

The main symbol in this file is the function `running_in_notebook`. It relies on the `get_context` function to retrieve the current runtime context and checks if it is an instance of `KernelRuntimeContext`. If the context is not initialized, it catches the `ContextNotInitializedError` and returns `False`.

## References

- `get_context`: This function is used to retrieve the current runtime context.
- `ContextNotInitializedError`: This exception is caught to handle cases where the context is not initialized.
- `KernelRuntimeContext`: The function checks if the current context is an instance of this class to determine if it is running in a notebook.

## Symbols

### `running_in_notebook`
#### Description
The `running_in_notebook` function checks if the current execution is happening within a Marimo notebook environment. It does this by attempting to retrieve the current context and verifying its type.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | bool | Returns `True` if running in a Marimo notebook, `False` otherwise. |

#### Internal Logic
1. The function attempts to get the current context using `get_context`.
2. If `ContextNotInitializedError` is raised, it returns `False`, indicating that the context is not set up for a notebook.
3. If no exception is raised, it checks if the context is an instance of `KernelRuntimeContext`.
4. Returns `True` if the context is a `KernelRuntimeContext`, otherwise returns `False`.

## Dependencies

| Dependency | Purpose |
|:-----------|:--------|
| `marimo._output.rich_help.mddoc` | Used as a decorator to enhance the documentation of the function. |
| `marimo._runtime.context` | Provides the `get_context` function and `ContextNotInitializedError` exception. |
| `marimo._runtime.context.kernel_context.KernelRuntimeContext` | The class used to verify if the context is a notebook context. |

## Error Handling

The function handles the `ContextNotInitializedError` to safely return `False` when the context is not initialized, indicating that the execution is not within a Marimo notebook.

## Logging

No logging mechanisms are implemented in this code.

## TODOs

There are no TODOs or notes left in the code.