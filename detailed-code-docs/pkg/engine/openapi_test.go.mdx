---
title: "openapi_test.go"
---

## High-level description
This file contains unit tests for the OpenAPI parameter serialization functionality in the `engine` package. It tests various scenarios for path and query parameter serialization with different styles and explode options.

## Code Structure
The file contains two main test functions: `TestPathParameterSerialization` and `TestQueryParameterSerialization`. These functions test different aspects of parameter serialization for OpenAPI specifications. The tests use a common input structure and iterate through various test cases to ensure correct serialization behavior.

## Symbols

### TestPathParameterSerialization
#### Description
This function tests the serialization of path parameters in OpenAPI specifications with different styles and explode options.

#### Internal Logic
1. Defines an input structure with various data types (int, array, object).
2. Creates a test path with placeholders for parameters.
3. Iterates through test cases with different styles and explode options.
4. For each test case, it calls `openapi.HandlePathParameters` and verifies the result against expected paths.

### TestQueryParameterSerialization
#### Description
This function tests the serialization of query parameters in OpenAPI specifications with different styles and explode options.

#### Internal Logic
1. Defines an input structure similar to the path parameter test.
2. Iterates through test cases with different parameter configurations (name, style, explode).
3. For each test case, it calls `openapi.HandleQueryParameters` and verifies the encoded query string against expected queries.

### getParameters
#### Description
A helper function that creates an array of `openapi.Parameter` objects based on the given style and explode option.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| style | string | The serialization style for the parameters |
| explode | bool | Whether to explode the parameters or not |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | []openapi.Parameter | An array of Parameter objects |

### boolPointer
#### Description
A helper function that returns a pointer to a boolean value.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| b | bool | The boolean value to create a pointer for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | *bool | A pointer to the input boolean value |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| encoding/json | Used for JSON marshaling of test input |
| net/url | Used for URL-related operations |
| testing | Used for running unit tests |
| github.com/gptscript-ai/gptscript/pkg/openapi | Contains the OpenAPI handling functions being tested |
| github.com/stretchr/testify/require | Used for test assertions |

This test file ensures that the OpenAPI parameter serialization functions in the `engine` package work correctly for various scenarios, styles, and options as defined in the OpenAPI specification.