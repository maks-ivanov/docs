---
title: "credentials_test.go"
---

## High-level description
This file contains unit tests for the `parseCredentialOverrides` function in the `runner` package. The tests verify the function's ability to parse credential overrides from environment variables and input strings, handling various scenarios including single and multiple credentials, environment variables, and key-value pairs.

## Symbols

### TestParseCredentialOverrides
#### Description
This function is a table-driven test that verifies the behavior of the `parseCredentialOverrides` function under different input scenarios.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| t | *testing.T | Testing object provided by Go's testing package |

#### Internal Logic
1. Defines a slice of test cases, each with a name, input environment variables, input strings, expected output, and error expectation.
2. Iterates through each test case:
   - Sets up the environment variables for the test.
   - Calls `parseCredentialOverrides` with the test input.
   - Checks if an error is expected and verifies the result accordingly.
   - If no error is expected, compares the output with the expected result.

The test cases cover various scenarios:
- Nil input
- Empty input (expecting an error)
- Single credential with a single environment variable
- Single credential with multiple environment variables
- Single credential with key-value pairs
- Multiple credentials with multiple environment variables
- Multiple credentials with key-value pairs
- Invalid format (expecting an error)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | Used to set environment variables for testing |
| testing | Go's built-in testing framework |
| github.com/stretchr/testify/require | Provides additional assertion functions for testing |

## Error Handling
The test function uses `require.Error` and `require.NoError` to check for expected errors in the test cases. This ensures that the `parseCredentialOverrides` function handles error cases correctly.

## Notes
1. The `parseCredentialOverrides` function being tested is not included in this file, suggesting it's defined elsewhere in the package.
2. The tests make use of environment variables, which are set and potentially modified during test execution. Care should be taken to ensure these changes don't affect other tests or the system environment.
3. The test cases cover a wide range of scenarios, including edge cases and error conditions, which is a good practice for thorough testing.