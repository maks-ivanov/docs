---
title: "credential.go"
---

## High-level description
This code defines the `Credential` struct and related functions for managing credentials in the GPTScript CLI. It provides functionality to list, delete, and show stored credentials for different contexts and tools.

## Code Structure
The main `Credential` struct is defined with methods for customizing and running the credential command. It interacts with the `GPTScript` struct, which is likely defined in another file. The code also includes helper functions for handling credential data and formatting output.

## Symbols

### `Credential`
#### Description
Represents the credential command in the GPTScript CLI.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| root | *GPTScript | Reference to the main GPTScript struct |
| AllContexts | bool | Flag to list credentials for all contexts |
| ShowEnvVars | bool | Flag to show names of environment variables in each credential |

#### Internal Logic
- Customizes the command with aliases and subcommands
- Implements the `Run` method to list stored credentials

### `Credential.Customize`
#### Description
Customizes the credential command by setting its usage, aliases, and subcommands.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cmd | *cobra.Command | The command to be customized |

### `Credential.Run`
#### Description
Executes the credential command, listing stored credentials based on the provided options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cmd | *cobra.Command | The command being run |
| _ | []string | Unused argument slice |

#### Internal Logic
1. Reads the CLI configuration
2. Sets up the GPTScript options and runtime manager
3. Initializes the credential store
4. Lists credentials and formats them for output
5. Prints the formatted credential information

### `printFields`
#### Description
Helper function to print formatted fields to a tabwriter.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| w | *tabwriter.Writer | The tabwriter to write to |
| fields | []any | The fields to be printed |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| fmt | Formatting and printing |
| os | File and environment operations |
| sort | Sorting slices |
| strings | String manipulation |
| text/tabwriter | Formatted text output |
| time | Time-related operations |
| cmd2 | Custom command package |
| cache | Caching operations |
| config | Configuration management |
| credentials | Credential management |
| repos/runtimes | Runtime management |
| runner | Command execution |
| spf13/cobra | CLI framework |

## Error Handling
The code uses error wrapping to provide context for errors that occur during execution. Errors are returned to the caller for handling at a higher level.

## Logging
The code uses a custom logging package (likely defined in `mvl`) for debug logging.

This code provides a comprehensive solution for managing credentials in the GPTScript CLI, allowing users to list, delete, and show credentials with various options for customization and output formatting.