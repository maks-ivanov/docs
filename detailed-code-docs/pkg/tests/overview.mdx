---
title: "Overview"
---

## High-level description
The `pkg/tests` directory contains test suites and utilities for the GPTScript project. It includes smoke tests, unit tests for the runner, a judge for comparing expected and actual values, and various test data and examples. The tests cover different aspects of GPTScript functionality, including chat interactions, tool calls, runtime environments, and context handling.

## What does it do?
This directory serves several key purposes:

1. Smoke Testing: Verifies the correct functioning of the GPTScript command-line tool across different AI models and tool implementations.
2. Runner Testing: Provides unit tests for the GPTScript runner, covering chat functionality, tool calls, error handling, and runtime environments.
3. Output Comparison: Implements a judge using OpenAI's GPT-4 model to compare expected and actual outputs of tests.
4. Test Data and Examples: Contains various test cases, configuration files, and example scripts to support different testing scenarios.

The tests in this directory ensure the reliability and consistency of the GPTScript system across different AI providers, tool implementations, and usage scenarios.

## Entry points
The main entry points for the tests are:

1. `smoke/smoke_test.go`: Contains the `TestSmoke` function, which runs the smoke test suite.
2. `runner_test.go`: Includes multiple test functions for the GPTScript runner.
3. `judge/judge.go`: Defines the `Judge` struct and associated methods for comparing expected and actual values.

## Key Files
1. `smoke/smoke_test.go`: Orchestrates the smoke test suite, running the GPTScript command-line tool with various test cases.
2. `runner_test.go`: Contains unit tests for the GPTScript runner, covering various aspects of its functionality.
3. `judge/judge.go`: Implements the `Judge` struct for comparing expected and actual values using GPT-4.
4. `tester/runner.go`: Implements a `Runner` for executing GPTScript programs in test environments.
5. `testdata/`: Contains test data and example files for various test cases, including environment handling, runtime configurations, and system context management.

## Dependencies
The test suite relies on several external libraries and internal packages:

1. `github.com/gptscript-ai/chat-completion-client`: For interacting with OpenAI API.
2. `github.com/gptscript-ai/gptscript/pkg/runner`: Provides runner-related types and functions.
3. `github.com/gptscript-ai/gptscript/pkg/engine`: Core engine functionality.
4. `github.com/gptscript-ai/gptscript/pkg/types`: Common types used in the project.
5. `github.com/stretchr/testify`: Assertion library for testing.
6. `gotest.tools/v3/icmd`: Helps with running and asserting command-line programs.
7. `github.com/getkin/kin-openapi/openapi3gen`: For generating OpenAPI schemas.

The tests also depend on various AI models from providers such as OpenAI, Anthropic, and Mistral AI.

## Configuration
While there are no separate configuration files for the tests themselves, the test data includes various configuration elements:

1. JSON files in the `testdata` directory contain embedded configuration details for different test scenarios.
2. The `tester/runner.go` file includes configuration options for the test runner, such as parallel tool execution and credential handling.
3. Test cases in `runner_test.go` often include specific configurations for different runtime environments and tool implementations.

These tests provide a comprehensive framework for verifying the behavior of the GPTScript system across different scenarios, ensuring its reliability and consistency.