---
title: "test.go"
---

## High-level description
This code is a test program that demonstrates how to access and use the `GPTSCRIPT_CONTEXT` environment variable in a GPTScript application. It unmarshals the JSON data from the environment variable into a struct and then prints information about the agents in the agent group.

## Symbols

### `main`
#### Description
The `main` function is the entry point of the program. It reads the `GPTSCRIPT_CONTEXT` environment variable, unmarshals its JSON content into a struct, and then prints information about each agent in the agent group.

#### Internal Logic
1. Define a struct to hold the `CallContext` data.
2. Unmarshal the JSON data from the `GPTSCRIPT_CONTEXT` environment variable into the struct.
3. Iterate through the `AgentGroup` slice in the `CallContext`.
4. Print the `Reference` and `ToolID` for each agent.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| encoding/json | For unmarshaling JSON data |
| fmt | For printing output |
| os | For accessing environment variables |
| github.com/gptscript-ai/gptscript/pkg/engine | For using the `CallContext` type |

## Error Handling
The program uses a simple error handling mechanism:
- If there's an error during JSON unmarshaling, it panics with the error message.

## Side Effects
The program reads from the `GPTSCRIPT_CONTEXT` environment variable and prints to the standard output.

## References
The code references the following external symbols:
- `engine.CallContext` from the `github.com/gptscript-ai/gptscript/pkg/engine` package

## Additional Notes
1. The program expects the `GPTSCRIPT_CONTEXT` environment variable to contain valid JSON data that can be unmarshaled into the defined struct.
2. The `CallContext` struct is embedded within an anonymous struct, which allows for potential expansion of the data structure in the future.
3. This code is likely part of a test suite or example program to demonstrate how to work with the GPTScript context in a real application.